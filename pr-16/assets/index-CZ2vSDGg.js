var Yn=Object.defineProperty;var Qn=(l,e,t)=>e in l?Yn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var Ct=(l,e,t)=>Qn(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function z(){}function Xn(l){return!!l&&(typeof l=="object"||typeof l=="function")&&typeof l.then=="function"}function Jn(l){return l()}function Ut(){return Object.create(null)}function Fe(l){l.forEach(Jn)}function Jt(l){return typeof l=="function"}function Me(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function Zn(l){return Object.keys(l).length===0}function Bt(l,...e){if(l==null){for(const n of e)n(void 0);return z}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function xn(l){let e;return Bt(l,t=>e=t)(),e}function Se(l,e,t){l.$$.on_destroy.push(Bt(e,t))}const es=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function c(l,e){l.appendChild(e)}function C(l,e,t){l.insertBefore(e,t||null)}function I(l){l.parentNode&&l.parentNode.removeChild(l)}function Re(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function d(l){return document.createElement(l)}function S(l){return document.createTextNode(l)}function N(){return S(" ")}function be(){return S("")}function oe(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function $t(l){return function(e){return e.preventDefault(),l.call(this,e)}}function r(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function ts(l){return Array.from(l.childNodes)}function O(l,e){e=""+e,l.data!==e&&(l.data=e)}function zt(l,e){l.value=e??""}function Ae(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Te(l,e,t){l.classList.toggle(e,!!t)}function ls(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}let ot;function De(l){ot=l}function yt(){if(!ot)throw new Error("Function called outside component initialization");return ot}function Tt(l){yt().$$.on_mount.push(l)}function Bn(l){yt().$$.on_destroy.push(l)}function ns(){const l=yt();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=ls(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}const tt=[],Je=[];let lt=[];const Ot=[],Dn=Promise.resolve();let qt=!1;function Un(){qt||(qt=!0,Dn.then(Dt))}function pt(){return Un(),Dn}function Pt(l){lt.push(l)}function Vt(l){Ot.push(l)}const Nt=new Set;let Ze=0;function Dt(){if(Ze!==0)return;const l=ot;do{try{for(;Ze<tt.length;){const e=tt[Ze];Ze++,De(e),ss(e.$$)}}catch(e){throw tt.length=0,Ze=0,e}for(De(null),tt.length=0,Ze=0;Je.length;)Je.pop()();for(let e=0;e<lt.length;e+=1){const t=lt[e];Nt.has(t)||(Nt.add(t),t())}lt.length=0}while(tt.length);for(;Ot.length;)Ot.pop()();qt=!1,Nt.clear(),De(l)}function ss(l){if(l.fragment!==null){l.update(),Fe(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Pt)}}function is(l){const e=[],t=[];lt.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),lt=e}const ut=new Set;let Qe;function $e(){Qe={r:0,c:[],p:Qe}}function ze(){Qe.r||Fe(Qe.c),Qe=Qe.p}function me(l,e){l&&l.i&&(ut.delete(l),l.i(e))}function we(l,e,t,n){if(l&&l.o){if(ut.has(l))return;ut.add(l),Qe.c.push(()=>{ut.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}function Wt(l,e){const t=e.token={};function n(s,i,o,a){if(e.token!==t)return;e.resolved=a;let f=e.ctx;o!==void 0&&(f=f.slice(),f[o]=a);const u=s&&(e.current=s)(f);let p=!1;e.block&&(e.blocks?e.blocks.forEach((_,m)=>{m!==i&&_&&($e(),we(_,1,1,()=>{e.blocks[m]===_&&(e.blocks[m]=null)}),ze())}):e.block.d(1),u.c(),me(u,1),u.m(e.mount(),e.anchor),p=!0),e.block=u,e.blocks&&(e.blocks[i]=u),p&&Dt()}if(Xn(l)){const s=yt();if(l.then(i=>{De(s),n(e.then,1,e.value,i),De(null)},i=>{if(De(s),n(e.catch,2,e.error,i),De(null),!e.hasCatch)throw i}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,l),!0;e.resolved=l}}function os(l,e,t){const n=e.slice(),{resolved:s}=l;l.current===l.then&&(n[l.value]=s),l.current===l.catch&&(n[l.error]=s),l.block.p(n,t)}function se(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function $n(l,e){l.d(1),e.delete(l.key)}function zn(l,e,t,n,s,i,o,a,f,u,p,_){let m=l.length,v=i.length,h=m;const g={};for(;h--;)g[l[h].key]=h;const y=[],b=new Map,k=new Map,w=[];for(h=v;h--;){const j=_(s,i,h),A=t(j);let R=o.get(A);R?w.push(()=>R.p(j,e)):(R=u(A,j),R.c()),b.set(A,y[h]=R),A in g&&k.set(A,Math.abs(h-g[A]))}const F=new Set,q=new Set;function M(j){me(j,1),j.m(a,p),o.set(j.key,j),p=j.first,v--}for(;m&&v;){const j=y[v-1],A=l[m-1],R=j.key,T=A.key;j===A?(p=j.first,m--,v--):b.has(T)?!o.has(R)||F.has(R)?M(j):q.has(T)?m--:k.get(R)>k.get(T)?(q.add(R),M(j)):(F.add(T),m--):(f(A,o),m--)}for(;m--;){const j=l[m];b.has(j.key)||f(j,o)}for(;v;)M(y[v-1]);return Fe(w),y}function Kt(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function Ue(l){l&&l.c()}function Le(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Pt(()=>{const i=l.$$.on_mount.map(Jn).filter(Jt);l.$$.on_destroy?l.$$.on_destroy.push(...i):Fe(i),l.$$.on_mount=[]}),s.forEach(Pt)}function He(l,e){const t=l.$$;t.fragment!==null&&(is(t.after_update),Fe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function rs(l,e){l.$$.dirty[0]===-1&&(tt.push(l),Un(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Ve(l,e,t,n,s,i,o=null,a=[-1]){const f=ot;De(l);const u=l.$$={fragment:null,ctx:[],props:i,update:z,not_equal:s,bound:Ut(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ut(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};o&&o(u.root);let p=!1;if(u.ctx=t?t(l,e.props||{},(_,m,...v)=>{const h=v.length?v[0]:m;return u.ctx&&s(u.ctx[_],u.ctx[_]=h)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](h),p&&rs(l,_)),m}):[],u.update(),p=!0,Fe(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const _=ts(e.target);u.fragment&&u.fragment.l(_),_.forEach(I)}else u.fragment&&u.fragment.c();e.intro&&me(l.$$.fragment),Le(l,e.target,e.anchor),Dt()}De(f)}class We{constructor(){Ct(this,"$$");Ct(this,"$$set")}$destroy(){He(this,1),this.$destroy=z}$on(e,t){if(!Jt(t))return z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Zn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const as="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(as);const xe=[];function cs(l,e){return{subscribe:Ge(l,e).subscribe}}function Ge(l,e=z){let t;const n=new Set;function s(a){if(Me(l,a)&&(l=a,t)){const f=!xe.length;for(const u of n)u[1](),xe.push(u,l);if(f){for(let u=0;u<xe.length;u+=2)xe[u][0](xe[u+1]);xe.length=0}}}function i(a){s(a(l))}function o(a,f=z){const u=[a,f];return n.add(u),n.size===1&&(t=e(s,i)||z),a(l),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function at(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return cs(t,(o,a)=>{let f=!1;const u=[];let p=0,_=z;const m=()=>{if(p)return;_();const h=e(n?u[0]:u,o,a);i?o(h):_=Jt(h)?h:z},v=s.map((h,g)=>Bt(h,y=>{u[g]=y,p&=~(1<<g),f&&m()},()=>{p|=1<<g}));return f=!0,m(),function(){Fe(v),_(),f=!1}})}function Pe(l){try{return JSON.parse(l)}catch{return null}}function _t(l){if(typeof l!="string")return"";let e=l.replace(/^\uFEFF/,"");return e.includes("\\r\\n")&&!e.includes(`
`)&&(e=e.replace(/\\r\\n/g,`
`)),e.includes("\\n")&&!e.includes(`
`)&&(e=e.replace(/\\n/g,`
`)),e}function fs(l){const t=(o=>{if(!o)return null;if(typeof o=="object")return o;if(typeof o!="string")return null;const a=o.trim();if(!a)return null;let f=Pe(a);if(typeof f=="string"){const _=Pe(f.trim());if(_&&typeof _=="object")return _}if(f&&typeof f=="object")return f;const u=a.indexOf("{"),p=a.lastIndexOf("}");if(u!==-1&&p!==-1&&p>u){const _=a.slice(u,p+1);if(f=Pe(_),f&&typeof f=="object")return f}return null})(l);if(!t)return null;const n=t.filePath||t.path||t.file||t.filename,s=t.oldString??t.old??t.before,i=t.newString??t.new??t.after;return typeof s!="string"&&typeof i!="string"?null:{filePath:n,oldString:_t(s),newString:_t(i)}}function us(l){const t=(i=>{if(!i)return null;if(typeof i=="object")return i;if(typeof i!="string")return null;const o=i.trim();if(!o)return null;let a=Pe(o);if(typeof a=="string"){const p=Pe(a.trim());if(p&&typeof p=="object")return p}if(a&&typeof a=="object")return a;const f=o.indexOf("{"),u=o.lastIndexOf("}");if(f!==-1&&u!==-1&&u>f){const p=o.slice(f,u+1);if(a=Pe(p),a&&typeof a=="object")return a}return null})(l);if(!t)return null;const n=Array.isArray(t.replacements)?t.replacements:null;if(!n||n.length===0)return null;const s=n.map(i=>{if(!i||typeof i!="object")return null;const o=i.filePath||i.path||i.file||i.filename,a=i.oldString??i.old??i.before,f=i.newString??i.new??i.after;if(typeof a!="string"&&typeof f!="string")return null;const u=typeof i.explanation=="string"?i.explanation:"";return{filePath:o,oldString:_t(a),newString:_t(f),explanation:u}}).filter(Boolean);return s.length?{explanation:typeof t.explanation=="string"?t.explanation:"",replacements:s}:null}function Ft(l){const e=l==null?void 0:l.replacements;if(!Array.isArray(e)||e.length===0)return"<pre>Invalid diff</pre>";const t=l!=null&&l.explanation?`<div class="diff-header">${Ee(l.explanation)}</div>`:"",n=e.map((s,i)=>{const o=s!=null&&s.filePath?Ee(s.filePath):`Replacement ${i+1}`,a=s!=null&&s.explanation?`<div class="diff-note">${Ee(s.explanation)}</div>`:"";return`
<div class="diff-container">
  <div class="diff-header">${o}</div>
  ${a}
  <div class="diff-section diff-old">
    <h4>‚àí Removed</h4>
    <div class="diff-content">${Ee((s==null?void 0:s.oldString)||"")}</div>
  </div>
  <div class="diff-section diff-new">
    <h4>+ Added</h4>
    <div class="diff-content">${Ee((s==null?void 0:s.newString)||"")}</div>
  </div>
</div>`}).join(`
`);return t?`
<div class="diff-container">${t}</div>
${n}`:n}function ds(l){const t=(s=>{if(!s)return null;if(typeof s=="object")return s;if(typeof s!="string")return null;const i=s.trim();if(!i)return null;let o=Pe(i);if(typeof o=="string"){const u=Pe(o.trim());if(u&&typeof u=="object")return u}if(o&&typeof o=="object")return o;const a=i.indexOf("{"),f=i.lastIndexOf("}");if(a!==-1&&f!==-1&&f>a){const u=i.slice(a,f+1);if(o=Pe(u),o&&typeof o=="object")return o}return null})(l);if(!t)return null;const n=Array.isArray(t.todoList)?t.todoList:null;return n?{operation:t.operation,todoList:n.map(s=>!s||typeof s!="object"?null:{id:s.id,title:s.title||"",description:s.description||"",status:s.status||""}).filter(Boolean)}:null}function Mt(l){const e=l==null?void 0:l.todoList;if(!Array.isArray(e))return null;const t=l!=null&&l.operation?`Todo List (${String(l.operation)})`:"Todo List",n=e.map(s=>{const i=(s.status||"").toLowerCase(),o=i||"unknown",a=i==="completed"?"x":i==="in-progress"?"-":" ",f=Ee(s.title||""),u=(s.description||"").trim(),p=u?`<div class="todo-desc">${Ee(u)}</div>`:"",_=s.id!==void 0&&s.id!==null?`<span class="todo-id">${Ee(String(s.id))}.</span> `:"";return`
        <div class="todo-item ${o}">
          <div class="todo-line">
            <span class="todo-box" aria-hidden="true">[${a}]</span>
            <span class="todo-title">${_}${f}</span>
          </div>
          ${p}
        </div>`}).join(`
`);return`
    <div class="todo-container">
      <div class="diff-container">
        <div class="diff-header">${Ee(t)}</div>
      </div>
      <div class="todo-body">${n}</div>
    </div>`}function it(l){return Array.isArray(l)?l:[]}function ps(l){if(l==="None")return"#6c757d";const e=["#007bff","#28a745","#dc3545","#ffc107","#17a2b8","#6f42c1","#fd7e14","#20c997","#e83e8c","#343a40","#495057","#6610f2","#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c","#34495e","#95a5a6","#f1c40f","#e67e22","#8e44ad","#16a085","#2c3e50","#c0392b","#d35400","#7f8c8d","#27ae60","#2980b9"];let t=0;for(let n=0;n<l.length;n++)t=(t<<5)-t+l.charCodeAt(n),t|=0;return e[Math.abs(t)%e.length]}function Et(l){const{oldString:e,newString:t,filePath:n}=l||{};return!e&&!t?"<pre>Invalid diff</pre>":`
<div class="diff-container">
  <div class="diff-header">${n||"File Changes"}</div>
  <div class="diff-section diff-old">
    <h4>‚àí Removed</h4>
    <div class="diff-content">${Ee(e||"")}</div>
  </div>
  <div class="diff-section diff-new">
    <h4>+ Added</h4>
    <div class="diff-content">${Ee(t||"")}</div>
  </div>
</div>`}function Ee(l=""){return l.replace(/[&<>"']/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e])}const _s=["apply_patch","create_directory","create_file","create_new_jupyter_notebook","edit_notebook_file","file_search","test_search","grep_search","get_changed_files","copilot_getNotebookSummary","get_search_view_results","get_vscode_api","github_repo","list_code_usages","list_dir","open_simple_browser","read_file","run_notebook_cell","semantic_search","test_failure","create_and_run_task","get_terminal_output","manage_todo_list","run_in_terminal","terminal_last_command","terminal_selection","insert_edit_into_file"],ms=["replace_string_in_file","apply_patch","edit_file","create_file","create_directory","run_in_terminal"],Gt=["#f97316","#ea580c","#fb923c","#d97706","#f59e0b","#c2410c","#f8b400","#ffb454"],Yt=["#1d4ed8","#2563eb","#3b82f6","#0ea5e9","#38bdf8","#1e40af","#1e3a8a","#60a5fa","#0284c7"],Qt=["#047857","#059669","#10b981","#34d399","#16a34a","#0d9488","#14b8a6","#22c55e","#2dd4bf"];function vs(l){let e=0;for(let t=0;t<l.length;t++)e=Math.imul(31,e)+l.charCodeAt(t)|0;return Math.abs(e)}let St=null;function Vn(){if(St)return St;const l={};return ms.forEach((e,t)=>{l[e]=Gt[t%Gt.length]}),_s.filter(e=>!l[e]).forEach((e,t)=>{l[e]=Yt[t%Yt.length]}),l.grep_search&&l.read_file&&l.grep_search===l.read_file&&(l.read_file="#0f7497"),St=l,l}function jt(l){if(!l)return"#6b7280";if(l==="None")return"#000000";if(l==="analyze_files_and_patterns")return"#2563eb";if(l==="patch_file")return"#7c3aed";const e=String(l).trim(),t=e.toLowerCase(),n=Vn();return n[e]?n[e]:n[t]?n[t]:Qt[vs(t)%Qt.length]}Vn();const et="#dc2626",Xt="#9333ea",Rt="#7c3aed",nt=Ge([]),Be=Ge([]),ct=Ge("unknown"),qe=Ge({callIndex:0,totalAll:0}),Ke=Ge(-1),dt=Ge({fn:"",response:""}),mt=Ge({startIdx:-1,endIdx:-1}),Xe=at([Be,dt,mt,ct],([l,e,t,n])=>{const s=e.fn.trim().toLowerCase(),i=e.response.trim().toLowerCase(),o=n==="new-agent"&&t.startIdx!==-1&&t.endIdx!==-1;if(!s&&!i&&!o)return[];const a=[];return l.forEach((f,u)=>{var _,m,v,h,g;let p=!0;if(o){if(typeof f.requestIndex!="number")return;p=p&&f.requestIndex>=t.startIdx&&f.requestIndex<=t.endIdx}if(s&&(p=p&&f.name.toLowerCase().includes(s)),i){let y="";(m=(_=f.request)==null?void 0:_.response)!=null&&m.value&&(y+=f.request.response.value.join(" ")),(h=(v=f.request)==null?void 0:v.response)!=null&&h.copilotFunctionCalls&&f.request.response.copilotFunctionCalls.forEach(b=>{y+=" "+(b.arguments||"")}),(g=f.request)!=null&&g.requestMessages&&f.request.requestMessages.forEach(b=>{Array.isArray(b.content)&&b.content.forEach(k=>{k.text&&(y+=" "+k.text)})}),p=p&&y.toLowerCase().includes(i)}p&&a.push(u)}),a}),hs=at([Be,Xe],([l,e])=>e.length?e:l.map((t,n)=>n)),bs=at([Be,Xe],([l,e])=>{const t=e.length?e:l.map((s,i)=>i),n=new Map;return t.forEach(s=>{const i=l[s],o=i.requestIndex;n.has(o)||n.set(o,{requestIndex:o,calls:[],request:i.request}),n.get(o).calls.push({...i,originalIndex:s})}),Array.from(n.values()).sort((s,i)=>s.requestIndex-i.requestIndex)}),Wn=at([nt,Be],([l,e])=>{if(!l.length)return!1;const t=new Map;return l.forEach((n,s)=>{t.set(s,0)}),e.forEach(n=>{if(n.hasFunction){const s=t.get(n.requestIndex)||0;t.set(n.requestIndex,s+1)}}),Array.from(t.values()).every(n=>n===0||n===1)}),gs=at([nt],([l])=>{var t,n;const e={};if(!Array.isArray(l))return e;for(const s of l){const i=s==null?void 0:s.requestMessages;if(Array.isArray(i))for(const o of i){if((o==null?void 0:o.role)!=="tool")continue;const a=o.tool_call_id||o.id||o.toolCallId;if(!a||(t=e[a])!=null&&t.text)continue;const f=[],u=o.content;if(Array.isArray(u))for(const p of u)typeof p=="string"?f.push(p):p!=null&&p.text?f.push(p.text):f.push(JSON.stringify(p));else typeof u=="string"?f.push(u):u!=null&&u.text&&f.push(u.text);e[a]={parts:f,text:f.join(`
`),requestId:(n=s==null?void 0:s.response)==null?void 0:n.requestId}}}return e});Xe.subscribe(l=>{let e;if(qe.subscribe(n=>e=n)(),l.length===0){Ke.set(-1);return}const t=l.indexOf(e.callIndex);Ke.set(t)});qe.subscribe(l=>{let e;if(Xe.subscribe(n=>e=n)(),!e||e.length===0){Ke.set(-1);return}const t=e.indexOf(l.callIndex);Ke.set(t)});function vt(l){qe.update(e=>({...e,callIndex:l})),setTimeout(()=>{try{const t=xn(Be)[l];if(t&&typeof t.callIndex=="number"&&t.callIndex>=0){const n="resp-fnhead-"+t.callIndex,s="resp-fncall-"+t.callIndex,i=document.getElementById(n)||document.getElementById(s);if(i){i.scrollIntoView({behavior:"auto",block:"center"});return}let o=0;const a=()=>{o++;const f=document.getElementById(n)||document.getElementById(s);if(f){f.scrollIntoView({behavior:"auto",block:"center"});return}if(o<5)setTimeout(a,80);else{const u=document.querySelector(".main-content");u&&u.scrollIntoView({behavior:"smooth",block:"start"})}};a()}else{const n=document.querySelector(".main-content");n&&n.scrollIntoView({behavior:"smooth",block:"start"})}}catch{const t=document.querySelector(".main-content");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}},60)}function ks(){qe.update(l=>l.callIndex>0?{...l,callIndex:l.callIndex-1}:l)}function ys(){qe.update(l=>l.callIndex<l.totalAll-1?{...l,callIndex:l.callIndex+1}:l)}function ws(){let l,e;if(Xe.subscribe(t=>l=t)(),Ke.subscribe(t=>e=t)(),!(!l||l.length===0||e===-1)&&e>0){const t=l[e-1];qe.update(n=>({...n,callIndex:t}))}}function Is(){let l,e;if(Xe.subscribe(t=>l=t)(),Ke.subscribe(t=>e=t)(),!(!l||l.length===0||e===-1)&&e<l.length-1){const t=l[e+1];qe.update(n=>({...n,callIndex:t}))}}function Kn(l){var e,t,n;return l!=null&&l.name&&Array.isArray(l==null?void 0:l.requestMessages)?"new-agent":(e=l.response)!=null&&e.copilotFunctionCalls&&Array.isArray(l.response.copilotFunctionCalls)?"sim-requests":(t=l.response)!=null&&t.toolCalls&&Array.isArray(l.response.toolCalls)?"fetchlog":(n=l.response)!=null&&n.copilotFunctionCalls?"sim-requests":l.requestId&&l.messages?"fetchlog":l.requestMessages?"sim-requests":"unknown"}function Cs(l){return!Array.isArray(l)||l.length===0?!1:l.every(e=>typeof(e==null?void 0:e.name)=="string"&&e.name.length>0)}function Ns(l){const e=it(l==null?void 0:l.requestMessages);let t=null;for(let o=e.length-1;o>=0;o--){const a=e[o];if((a==null?void 0:a.role)!=="assistant")continue;if(it(a==null?void 0:a.tool_calls).length){t=a;break}}if(!t)return[];const n=[],s=new Set,i=it(t==null?void 0:t.tool_calls);for(const o of i){const a=(o==null?void 0:o.id)||(o==null?void 0:o.tool_call_id)||(o==null?void 0:o.toolCallId);if(a&&s.has(a))continue;const f=(o==null?void 0:o.function)||(o==null?void 0:o.fn)||{},u=(f==null?void 0:f.name)||(o==null?void 0:o.name)||"Unknown",p=(f==null?void 0:f.arguments)??(o==null?void 0:o.arguments),_=typeof p=="string"?p:JSON.stringify(p||{});a&&s.add(a),n.push({name:u,arguments:_,id:a})}return n}function Ss(l){var t;return it((t=l.response)==null?void 0:t.copilotFunctionCalls).map(n=>({name:n.name||"Unknown",arguments:n.arguments||"{}",id:n.id}))}function js(l){var t;return it((t=l.response)==null?void 0:t.toolCalls).map(n=>{var a,f;const s=((a=n==null?void 0:n.function)==null?void 0:a.name)||"Unknown",i=(f=n==null?void 0:n.function)==null?void 0:f.arguments,o=typeof i=="string"?i:JSON.stringify(i||{});return{name:s,arguments:o,id:n==null?void 0:n.id}})}function Rs(l,e=[],t=0){var a;if(!l.messages||!Array.isArray(l.messages))return l;const n=[];for(const f of l.messages)if((f==null?void 0:f.role)==="assistant"){if(typeof f.content=="string"&&f.content.trim())n.push(f.content);else if(Array.isArray(f.content))for(const u of f.content)typeof u=="string"&&u.trim()?n.push(u):u!=null&&u.text&&u.text.trim()&&n.push(u.text)}const s=(()=>{var f;if(l.tools&&l.tools.length>0)return l.tools;for(const u of e)if(u.tools&&u.tools.length>0)return u.tools;return((f=l.requestOptions)==null?void 0:f.tools)||[]})();return{...l,response:{...l.response,value:n.length>0?n:((a=l.response)==null?void 0:a.value)||void 0,requestId:"fetchlog-unified-conversation"},requestMessages:l.messages,requestOptions:{...l.requestOptions,tools:s}}}function As(l){switch(Kn(l)){case"sim-requests":return Ss(l);case"fetchlog":return js(l);case"new-agent":return Ns(l);default:return console.warn("Unknown format for request:",l),[]}}function Ts(l){let e;try{e=JSON.parse(l)}catch{if(!l.match(/\[\s*\{/s)){console.error("No JSON array found");return}}if(!Array.isArray(e)){const i=l.match(/\[\s*\{[\s\S]*\}\s*\]/);if(i)try{e=JSON.parse(i[0])}catch{console.error("Failed to parse extracted JSON");return}}if(!Array.isArray(e))return;const t=Cs(e)?"new-agent":e.length>0?Kn(e[0]):"unknown";console.log(`[Format Detection] Detected format: ${t}`),ct.set(t);const n=t==="fetchlog"?e.map((i,o)=>Rs(i,e,o)):e;nt.set(n);const s=[];n.forEach((i,o)=>{var y,b,k,w,F,q,M,j,A;const a=R=>R?typeof R=="string"?R:Array.isArray(R)?R.map(T=>typeof T=="string"?T:(T==null?void 0:T.text)||"").join(""):typeof R=="object"&&typeof R.text=="string"?R.text:"":"",u=(R=>{const T=(R==null?void 0:R.requestMessages)||(R==null?void 0:R.messages);if(!Array.isArray(T))return"";for(const P of T){if((P==null?void 0:P.role)!=="user")continue;const E=a(P.content);if(E&&E.trim())return E.trim()}return""})(i),_=typeof u=="string"&&u.startsWith("Summarize the following actions in 6-7 words using past tense"),m=(()=>{const R="You are an expert at analyzing files and patterns.",T=i.requestMessages||i.messages;if(!T)return!1;for(const P of T)if((P==null?void 0:P.role)==="system"){if(typeof P.content=="string"){if(P.content.includes(R))return!0}else if(Array.isArray(P.content)){for(const E of P.content)if(((typeof E=="string"?E:E==null?void 0:E.text)||"").includes(R))return!0}}return!1})(),v=Array.isArray((y=i==null?void 0:i.response)==null?void 0:y.value)?i.response.value.join(`
`):((b=i==null?void 0:i.response)==null?void 0:b.value)||"",h=typeof v=="string"&&/\*\*\* Begin Patch[\s\S]*\*\*\* End Patch/.test(v),g=As(i);if(g.length)g.forEach((R,T)=>{var ae,U;const E=t!=="new-agent"||T===g.length-1?i:{...i,response:{...i.response||{},value:void 0}};let L=R.name||((ae=R.function)==null?void 0:ae.name)||"Unknown Function",H=!1;m&&L&&L.toLowerCase()==="none"?(L="analyze_files_and_patterns",H=!0):h&&L&&L.toLowerCase()==="none"&&(L="patch_file",H=!0);const te=L;let ie=jt(te)||ps(te);const re=((U=i==null?void 0:i.response)==null?void 0:U.type)==="failed";H&&!re&&(ie=Rt),re&&(ie=et),s.push({requestIndex:o,callIndex:T,name:te,arguments:R.arguments,id:R.id,request:E,hasFunction:!0,color:ie,inferred:H})});else{const R=Array.isArray((k=i==null?void 0:i.response)==null?void 0:k.value)?i.response.value.join(`
`):((w=i==null?void 0:i.response)==null?void 0:w.value)||"";if(typeof R=="string"&&R.trim().startsWith("<analysis>")){let P=Xt;((F=i==null?void 0:i.response)==null?void 0:F.type)==="failed"&&(P=et),s.push({requestIndex:o,callIndex:-1,name:"conversation_summary",arguments:null,request:i,hasFunction:!0,conversationSummary:!0,color:P})}else if(_){let P=Xt;((q=i==null?void 0:i.response)==null?void 0:q.type)==="failed"&&(P=et),s.push({requestIndex:o,callIndex:-1,name:"summarize",arguments:null,request:i,hasFunction:!0,conversationSummary:!0,synthetic:!0,color:P})}else if(m){let P=jt("analyze_files_and_patterns");((M=i==null?void 0:i.response)==null?void 0:M.type)==="failed"?P=et:P=Rt,s.push({requestIndex:o,callIndex:-1,name:"analyze_files_and_patterns",arguments:null,request:i,hasFunction:!0,synthetic:!0,inferred:!0,color:P})}else if(h){let P=jt("patch_file");((j=i==null?void 0:i.response)==null?void 0:j.type)==="failed"?P=et:P=Rt,s.push({requestIndex:o,callIndex:-1,name:"patch_file",arguments:null,request:i,hasFunction:!0,synthetic:!0,inferred:!0,color:P})}else{let P="#000000";((A=i==null?void 0:i.response)==null?void 0:A.type)==="failed"&&(P=et),s.push({requestIndex:o,callIndex:-1,name:"None",arguments:null,request:i,hasFunction:!1,color:P})}}}),Be.set(s),qe.set({callIndex:0,totalAll:s.length}),Ke.set((s.length,-1))}function Zt(l){let e;return{c(){e=d("div"),e.textContent="Drop file anywhere to load",r(e,"class","global-overlay svelte-1yh9h3i")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function Os(l){let e,t,n,s,i,o=l[0]||l[1]?"Release to Load":"Drop / Click",a,f,u,p,_,m,v,h,g,y=l[1]&&!l[0]&&Zt();return{c(){e=d("div"),t=d("div"),t.textContent="üìÅ",n=N(),s=d("div"),i=d("div"),a=S(o),f=N(),u=d("div"),u.innerHTML=`<span class="hint-label svelte-1yh9h3i">Supports:</span> <span class="hint-formats svelte-1yh9h3i"><span class="nowrap svelte-1yh9h3i">sim‚Äërequests</span>,
        <span class="nowrap svelte-1yh9h3i">fetchlog</span>,
        or <span class="nowrap svelte-1yh9h3i">vscode chat</span> files</span>`,p=N(),_=d("input"),m=N(),y&&y.c(),r(t,"class","icon svelte-1yh9h3i"),r(t,"aria-hidden","true"),r(i,"class","dd-text-main svelte-1yh9h3i"),r(u,"class","dd-text-hint svelte-1yh9h3i"),r(s,"class","dd-text svelte-1yh9h3i"),r(_,"type","file"),r(_,"accept",".txt,.json"),Ae(_,"display","none"),r(e,"class",v="drag-drop compact "+(l[0]||l[1]?"over":"")+" svelte-1yh9h3i"),r(e,"role","button"),r(e,"tabindex","0")},m(b,k){C(b,e,k),c(e,t),c(e,n),c(e,s),c(s,i),c(i,a),c(s,f),c(s,u),c(e,p),c(e,_),l[5](_),c(e,m),y&&y.m(e,null),h||(g=[oe(_,"change",l[3]),oe(e,"dragover",$t(l[6])),oe(e,"dragleave",$t(l[7])),oe(e,"drop",l[4]),oe(e,"click",l[8]),oe(e,"keydown",l[9])],h=!0)},p(b,[k]){k&3&&o!==(o=b[0]||b[1]?"Release to Load":"Drop / Click")&&O(a,o),b[1]&&!b[0]?y||(y=Zt(),y.c(),y.m(e,null)):y&&(y.d(1),y=null),k&3&&v!==(v="drag-drop compact "+(b[0]||b[1]?"over":"")+" svelte-1yh9h3i")&&r(e,"class",v)},i:z,o:z,d(b){b&&I(e),l[5](null),y&&y.d(),h=!1,Fe(g)}}}function qs(l,e,t){const n=ns();let s=!1,i=!1,o,a=[];function f(w){var q;const F=(q=w.target.files)==null?void 0:q[0];F&&p(F)}function u(w){var q;w.preventDefault(),t(0,s=!1);const F=(q=w.dataTransfer.files)==null?void 0:q[0];F&&p(F)}function p(w){const F=new FileReader;F.onload=()=>{n("loadText",F.result)},F.readAsText(w)}function _(w){w.dataTransfer&&Array.from(w.dataTransfer.types).includes("Files")&&(w.preventDefault(),w.dataTransfer.dropEffect="copy",t(1,i=!0))}function m(w){w.relatedTarget==null&&(t(1,i=!1),t(0,s=!1))}function v(w){var F,q;(q=(F=w.dataTransfer)==null?void 0:F.files)!=null&&q.length&&(w.preventDefault(),p(w.dataTransfer.files[0])),t(1,i=!1),t(0,s=!1)}Tt(()=>{window.addEventListener("dragover",_),window.addEventListener("dragleave",m),window.addEventListener("drop",v),a=[()=>window.removeEventListener("dragover",_),()=>window.removeEventListener("dragleave",m),()=>window.removeEventListener("drop",v)]}),Bn(()=>a.forEach(w=>w()));function h(w){Je[w?"unshift":"push"](()=>{o=w,t(2,o)})}return[s,i,o,f,u,h,()=>t(0,s=!0),()=>t(0,s=!1),()=>o.click(),w=>(w.key==="Enter"||w.key===" ")&&o.click()]}class Ps extends We{constructor(e){super(),Ve(this,e,qs,Os,Me,{})}}function xt(l,e,t){const n=l.slice();return n[26]=e[t],n[28]=t,n}function el(l,e,t){const n=l.slice();return n[23]=e[t],n}function tl(l,e,t){const n=l.slice();return n[20]=e[t],n}function ll(l,e,t){const n=l.slice();return n[23]=e[t],n}function Fs(l){let e,t,n=se(l[1]),s=[];for(let i=0;i<n.length;i+=1)s[i]=cl(xt(l,n,i));return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();r(e,"class",t="mixed-calls "+(l[0]==="top"?"top-flow":"panel-flow")+" svelte-1u08vn"),r(e,"role","listbox"),r(e,"aria-label","Tool calls (multi-call requests framed, single-call inline)")},m(i,o){C(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(i,o){if(o&23){n=se(i[1]);let a;for(a=0;a<n.length;a+=1){const f=xt(i,n,a);s[a]?s[a].p(f,o):(s[a]=cl(f),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}o&1&&t!==(t="mixed-calls "+(i[0]==="top"?"top-flow":"panel-flow")+" svelte-1u08vn")&&r(e,"class",t)},d(i){i&&I(e),Re(s,i)}}}function Ms(l){let e,t,n=se(l[4]),s=[];for(let i=0;i<n.length;i+=1)s[i]=ml(tl(l,n,i));return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();r(e,"class",t="flat-calls-container "+(l[0]==="top"?"top-flow":"panel-flow")+" svelte-1u08vn"),r(e,"role","listbox"),r(e,"aria-label","Tool calls")},m(i,o){C(i,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null)},p(i,o){if(o&21){n=se(i[4]);let a;for(a=0;a<n.length;a+=1){const f=tl(i,n,a);s[a]?s[a].p(f,o):(s[a]=ml(f),s[a].c(),s[a].m(e,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=n.length}o&1&&t!==(t="flat-calls-container "+(i[0]==="top"?"top-flow":"panel-flow")+" svelte-1u08vn")&&r(e,"class",t)},d(i){i&&I(e),Re(s,i)}}}function Es(l){let e;return{c(){e=d("div"),e.textContent="No matches.",r(e,"class","empty svelte-1u08vn")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function nl(l){let e,t,n,s,i,o=l[4][l[28]].roundNumber+"",a,f,u=bt(l[4][l[28]].requestId)+"",p,_,m,v,h,g,y,b;return{c(){e=d("div"),t=d("span"),n=N(),s=d("span"),i=S("Round "),a=S(o),f=d("span"),p=S(u),m=N(),v=d("span"),r(t,"class","rfs-line svelte-1u08vn"),r(t,"aria-hidden","true"),r(f,"class","rfs-id svelte-1u08vn"),r(f,"title",_=l[4][l[28]].requestId),r(s,"class","rfs-label svelte-1u08vn"),r(v,"class","rfs-line svelte-1u08vn"),r(v,"aria-hidden","true"),r(e,"class","round-full-separator svelte-1u08vn"),r(e,"data-round",h=l[4][l[28]].roundNumber),r(e,"data-request-id",g=l[4][l[28]].requestId),r(e,"title",y=`Round ${l[4][l[28]].roundNumber} ‚Ä¢ ${l[4][l[28]].requestId}`),r(e,"aria-label",b=`Round ${l[4][l[28]].roundNumber} boundary (request id ${l[4][l[28]].requestId})`)},m(k,w){C(k,e,w),c(e,t),c(e,n),c(e,s),c(s,i),c(s,a),c(s,f),c(f,p),c(e,m),c(e,v)},p(k,w){w&16&&o!==(o=k[4][k[28]].roundNumber+"")&&O(a,o),w&16&&u!==(u=bt(k[4][k[28]].requestId)+"")&&O(p,u),w&16&&_!==(_=k[4][k[28]].requestId)&&r(f,"title",_),w&16&&h!==(h=k[4][k[28]].roundNumber)&&r(e,"data-round",h),w&16&&g!==(g=k[4][k[28]].requestId)&&r(e,"data-request-id",g),w&16&&y!==(y=`Round ${k[4][k[28]].roundNumber} ‚Ä¢ ${k[4][k[28]].requestId}`)&&r(e,"title",y),w&16&&b!==(b=`Round ${k[4][k[28]].roundNumber} boundary (request id ${k[4][k[28]].requestId})`)&&r(e,"aria-label",b)},d(k){k&&I(e)}}}function sl(l){let e;return{c(){e=d("span"),e.textContent="‚àë",r(e,"class","infer-badge svelte-1u08vn"),r(e,"title","Inferred tool name")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function il(l){let e;return{c(){e=d("span"),e.textContent="üìã",r(e,"class","summary-emoji svelte-1u08vn"),r(e,"title","Conversation summary"),r(e,"aria-hidden","true")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function ol(l){let e;return{c(){e=d("span"),e.textContent="‚ö†Ô∏è",r(e,"class","fail-emoji svelte-1u08vn"),r(e,"title","Failed response"),r(e,"aria-hidden","true")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function rl(l){var j,A;let e,t,n=l[23].originalIndex+1+"",s,i,o,a=ht(l[23])+"",f,u,p,_,m,v,h,g,y,b,k,w=l[23].inferred&&sl(),F=l[23].conversationSummary&&il(),q=((A=(j=l[23].request)==null?void 0:j.response)==null?void 0:A.type)==="failed"&&ol();function M(){return l[17](l[23])}return{c(){var R,T;e=d("button"),t=d("span"),s=S(n),i=N(),o=d("span"),f=S(a),w&&w.c(),u=N(),F&&F.c(),p=N(),q&&q.c(),_=N(),r(t,"class","num svelte-1u08vn"),r(o,"class","name svelte-1u08vn"),r(e,"role","option"),r(e,"aria-selected",m=l[2].callIndex===l[23].originalIndex),Ae(e,"--chip-color",l[23].color),r(e,"data-round",v=l[4][l[28]].roundNumber),r(e,"data-req-info",h=`Request ${l[26].requestIndex+1} ‚Ä¢ ${l[26].calls.length} call${l[26].calls.length===1?"":"s"}`),r(e,"data-call-index",g=l[23].originalIndex),r(e,"aria-label",y="Tool call "+(l[23].name||"None")+(l[26].calls.length===1?" (single-call request)":"")+(((T=(R=l[23].request)==null?void 0:R.response)==null?void 0:T.type)==="failed"?" (failed response)":"")),r(e,"class","svelte-1u08vn"),Te(e,"selected",l[2].callIndex===l[23].originalIndex),Te(e,"topchip",l[0]==="top")},m(R,T){C(R,e,T),c(e,t),c(t,s),c(e,i),c(e,o),c(o,f),w&&w.m(e,null),c(e,u),F&&F.m(e,null),c(e,p),q&&q.m(e,null),c(e,_),b||(k=oe(e,"click",M),b=!0)},p(R,T){var P,E,L,H;l=R,T&2&&n!==(n=l[23].originalIndex+1+"")&&O(s,n),T&2&&a!==(a=ht(l[23])+"")&&O(f,a),l[23].inferred?w||(w=sl(),w.c(),w.m(e,u)):w&&(w.d(1),w=null),l[23].conversationSummary?F||(F=il(),F.c(),F.m(e,p)):F&&(F.d(1),F=null),((E=(P=l[23].request)==null?void 0:P.response)==null?void 0:E.type)==="failed"?q||(q=ol(),q.c(),q.m(e,_)):q&&(q.d(1),q=null),T&6&&m!==(m=l[2].callIndex===l[23].originalIndex)&&r(e,"aria-selected",m),T&2&&Ae(e,"--chip-color",l[23].color),T&16&&v!==(v=l[4][l[28]].roundNumber)&&r(e,"data-round",v),T&2&&h!==(h=`Request ${l[26].requestIndex+1} ‚Ä¢ ${l[26].calls.length} call${l[26].calls.length===1?"":"s"}`)&&r(e,"data-req-info",h),T&2&&g!==(g=l[23].originalIndex)&&r(e,"data-call-index",g),T&2&&y!==(y="Tool call "+(l[23].name||"None")+(l[26].calls.length===1?" (single-call request)":"")+(((H=(L=l[23].request)==null?void 0:L.response)==null?void 0:H.type)==="failed"?" (failed response)":""))&&r(e,"aria-label",y),T&6&&Te(e,"selected",l[2].callIndex===l[23].originalIndex),T&1&&Te(e,"topchip",l[0]==="top")},d(R){R&&I(e),w&&w.d(),F&&F.d(),q&&q.d(),b=!1,k()}}}function al(l){let e,t,n,s,i,o,a,f,u=l[4][l[28]].isRoundStart&&nl(l),p=se(l[26].calls),_=[];for(let m=0;m<p.length;m+=1)_[m]=rl(el(l,p,m));return{c(){u&&u.c(),e=N(),t=d("div"),n=d("div");for(let m=0;m<_.length;m+=1)_[m].c();i=N(),r(n,"class","group-calls-container svelte-1u08vn"),r(n,"aria-label",s=`Request ${l[26].requestIndex+1} with ${l[26].calls.length} call${l[26].calls.length===1?"":"s"}`),r(t,"class","request-group svelte-1u08vn"),r(t,"data-request-index",o=l[26].requestIndex),r(t,"data-request-id",a=l[4][l[28]].requestId),r(t,"data-round",f=l[4][l[28]].roundNumber),Te(t,"single-call",l[26].calls.length===1)},m(m,v){u&&u.m(m,v),C(m,e,v),C(m,t,v),c(t,n);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(n,null);c(t,i)},p(m,v){if(m[4][m[28]].isRoundStart?u?u.p(m,v):(u=nl(m),u.c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),v&23){p=se(m[26].calls);let h;for(h=0;h<p.length;h+=1){const g=el(m,p,h);_[h]?_[h].p(g,v):(_[h]=rl(g),_[h].c(),_[h].m(n,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=p.length}v&2&&s!==(s=`Request ${m[26].requestIndex+1} with ${m[26].calls.length} call${m[26].calls.length===1?"":"s"}`)&&r(n,"aria-label",s),v&2&&o!==(o=m[26].requestIndex)&&r(t,"data-request-index",o),v&16&&a!==(a=m[4][m[28]].requestId)&&r(t,"data-request-id",a),v&16&&f!==(f=m[4][m[28]].roundNumber)&&r(t,"data-round",f),v&2&&Te(t,"single-call",m[26].calls.length===1)},d(m){m&&(I(e),I(t)),u&&u.d(m),Re(_,m)}}}function cl(l){let e="grp-"+l[26].requestIndex,t,n=al(l);return{c(){n.c(),t=be()},m(s,i){n.m(s,i),C(s,t,i)},p(s,i){i&2&&Me(e,e="grp-"+s[26].requestIndex)?(n.d(1),n=al(s),n.c(),n.m(t.parentNode,t)):n.p(s,i)},d(s){s&&I(t),n.d(s)}}}function fl(l){let e,t,n,s,i,o=l[20].roundNumber+"",a,f,u=bt(l[20].requestId)+"",p,_,m,v,h,g,y,b;return{c(){e=d("div"),t=d("span"),n=N(),s=d("span"),i=S("Round "),a=S(o),f=d("span"),p=S(u),m=N(),v=d("span"),r(t,"class","rfs-line svelte-1u08vn"),r(t,"aria-hidden","true"),r(f,"class","rfs-id svelte-1u08vn"),r(f,"title",_=l[20].requestId),r(s,"class","rfs-label svelte-1u08vn"),r(v,"class","rfs-line svelte-1u08vn"),r(v,"aria-hidden","true"),r(e,"class","round-full-separator svelte-1u08vn"),r(e,"data-round",h=l[20].roundNumber),r(e,"data-request-id",g=l[20].requestId),r(e,"title",y=`Round ${l[20].roundNumber} ‚Ä¢ ${l[20].requestId}`),r(e,"aria-label",b=`Round ${l[20].roundNumber} boundary (request id ${l[20].requestId})`)},m(k,w){C(k,e,w),c(e,t),c(e,n),c(e,s),c(s,i),c(s,a),c(s,f),c(f,p),c(e,m),c(e,v)},p(k,w){w&16&&o!==(o=k[20].roundNumber+"")&&O(a,o),w&16&&u!==(u=bt(k[20].requestId)+"")&&O(p,u),w&16&&_!==(_=k[20].requestId)&&r(f,"title",_),w&16&&h!==(h=k[20].roundNumber)&&r(e,"data-round",h),w&16&&g!==(g=k[20].requestId)&&r(e,"data-request-id",g),w&16&&y!==(y=`Round ${k[20].roundNumber} ‚Ä¢ ${k[20].requestId}`)&&r(e,"title",y),w&16&&b!==(b=`Round ${k[20].roundNumber} boundary (request id ${k[20].requestId})`)&&r(e,"aria-label",b)},d(k){k&&I(e)}}}function ul(l){let e;return{c(){e=d("span"),e.textContent="‚àë",r(e,"class","infer-badge svelte-1u08vn"),r(e,"title","Inferred tool name")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function dl(l){let e;return{c(){e=d("span"),e.textContent="üìã",r(e,"class","summary-emoji svelte-1u08vn"),r(e,"title","Conversation summary"),r(e,"aria-hidden","true")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function pl(l){let e;return{c(){e=d("span"),e.textContent="‚ö†Ô∏è",r(e,"class","fail-emoji svelte-1u08vn"),r(e,"title","Failed response"),r(e,"aria-hidden","true")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function _l(l){var q,M;let e,t,n=l[23].originalIndex+1+"",s,i,o,a=ht(l[23])+"",f,u,p,_,m,v,h,g,y,b=l[23].inferred&&ul(),k=l[23].conversationSummary&&dl(),w=((M=(q=l[23].request)==null?void 0:q.response)==null?void 0:M.type)==="failed"&&pl();function F(){return l[16](l[23])}return{c(){var j,A;e=d("button"),t=d("span"),s=S(n),i=N(),o=d("span"),f=S(a),b&&b.c(),u=N(),k&&k.c(),p=N(),w&&w.c(),_=N(),r(t,"class","num svelte-1u08vn"),r(o,"class","name svelte-1u08vn"),r(e,"role","option"),r(e,"aria-selected",m=l[2].callIndex===l[23].originalIndex),Ae(e,"--chip-color",l[23].color),r(e,"data-call-index",v=l[23].originalIndex),r(e,"aria-label",h="Tool call "+(l[23].name||"None")+(((A=(j=l[23].request)==null?void 0:j.response)==null?void 0:A.type)==="failed"?" (failed response)":"")),r(e,"class","svelte-1u08vn"),Te(e,"selected",l[2].callIndex===l[23].originalIndex),Te(e,"topchip",l[0]==="top")},m(j,A){C(j,e,A),c(e,t),c(t,s),c(e,i),c(e,o),c(o,f),b&&b.m(e,null),c(e,u),k&&k.m(e,null),c(e,p),w&&w.m(e,null),c(e,_),g||(y=oe(e,"click",F),g=!0)},p(j,A){var R,T,P,E;l=j,A&16&&n!==(n=l[23].originalIndex+1+"")&&O(s,n),A&16&&a!==(a=ht(l[23])+"")&&O(f,a),l[23].inferred?b||(b=ul(),b.c(),b.m(e,u)):b&&(b.d(1),b=null),l[23].conversationSummary?k||(k=dl(),k.c(),k.m(e,p)):k&&(k.d(1),k=null),((T=(R=l[23].request)==null?void 0:R.response)==null?void 0:T.type)==="failed"?w||(w=pl(),w.c(),w.m(e,_)):w&&(w.d(1),w=null),A&20&&m!==(m=l[2].callIndex===l[23].originalIndex)&&r(e,"aria-selected",m),A&16&&Ae(e,"--chip-color",l[23].color),A&16&&v!==(v=l[23].originalIndex)&&r(e,"data-call-index",v),A&16&&h!==(h="Tool call "+(l[23].name||"None")+(((E=(P=l[23].request)==null?void 0:P.response)==null?void 0:E.type)==="failed"?" (failed response)":""))&&r(e,"aria-label",h),A&20&&Te(e,"selected",l[2].callIndex===l[23].originalIndex),A&1&&Te(e,"topchip",l[0]==="top")},d(j){j&&I(e),b&&b.d(),k&&k.d(),w&&w.d(),g=!1,y()}}}function ml(l){let e,t,n=l[20].isRoundStart&&fl(l),s=se(l[20].calls),i=[];for(let o=0;o<s.length;o+=1)i[o]=_l(ll(l,s,o));return{c(){n&&n.c(),e=N();for(let o=0;o<i.length;o+=1)i[o].c();t=be()},m(o,a){n&&n.m(o,a),C(o,e,a);for(let f=0;f<i.length;f+=1)i[f]&&i[f].m(o,a);C(o,t,a)},p(o,a){if(o[20].isRoundStart?n?n.p(o,a):(n=fl(o),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),a&21){s=se(o[20].calls);let f;for(f=0;f<s.length;f+=1){const u=ll(o,s,f);i[f]?i[f].p(u,a):(i[f]=_l(u),i[f].c(),i[f].m(t.parentNode,t))}for(;f<i.length;f+=1)i[f].d(1);i.length=s.length}},d(o){o&&(I(e),I(t)),n&&n.d(o),Re(i,o)}}}function Ls(l){let e,t,n,s,i,o,a=l[6].length+"",f,u,p,_,m;function v(y,b){return y[1].length?y[5]?Ms:Fs:Es}let h=v(l),g=h(l);return{c(){e=d("section"),t=d("header"),n=d("div"),n.innerHTML='<h2 class="svelte-1u08vn">Next tool calls</h2>',s=N(),i=d("div"),o=d("span"),f=S(a),u=N(),p=d("div"),_=d("div"),g.c(),r(n,"class","header-title svelte-1u08vn"),r(o,"class","count-badge svelte-1u08vn"),r(i,"class","section-meta svelte-1u08vn"),r(t,"class","section-header calls-header svelte-1u08vn"),r(_,"id","tool-calls-content"),r(_,"class","calls-content svelte-1u08vn"),r(p,"class","calls-scroll svelte-1u08vn"),r(p,"role","region"),r(p,"aria-label","Tool calls scroll area"),r(e,"class",m="calls-panel "+(l[0]==="top"?"top-mode":"dense")+" "+(l[5]?"flat-mode":"grouped-mode")+" svelte-1u08vn"),r(e,"data-variant",l[0])},m(y,b){C(y,e,b),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(o,f),c(e,u),c(e,p),c(p,_),g.m(_,null),l[18](p)},p(y,[b]){b&64&&a!==(a=y[6].length+"")&&O(f,a),h===(h=v(y))&&g?g.p(y,b):(g.d(1),g=h(y),g&&(g.c(),g.m(_,null))),b&33&&m!==(m="calls-panel "+(y[0]==="top"?"top-mode":"dense")+" "+(y[5]?"flat-mode":"grouped-mode")+" svelte-1u08vn")&&r(e,"class",m),b&1&&r(e,"data-variant",y[0])},i:z,o:z,d(y){y&&I(e),g.d(),l[18](null)}}}function Hs(l){const e="You are an expert at analyzing files and patterns.";if(!(l!=null&&l.requestMessages))return!1;for(const t of l.requestMessages)if(!((t==null?void 0:t.role)!=="system"||!Array.isArray(t.content))){for(const n of t.content)if(((typeof n=="string"?n:n==null?void 0:n.text)||"").trim()===e)return!0}return!1}function ht(l){return l?(l.name==="None"||l.name&&l.name.toLowerCase()==="none")&&Hs(l.request)?"analyze_files_and_patterns":l.name:""}function bt(l,e=18){if(!l)return"";if(l.length<=e)return l;const t=5;return l.slice(0,e-(t+1))+"‚Ä¶"+l.slice(-t)}function Js(l,e,t){let n,s,i,o,a,f,u,p,_,m,v,h,g;Se(l,qe,j=>t(2,_=j)),Se(l,nt,j=>t(12,m=j)),Se(l,Wn,j=>t(13,v=j)),Se(l,bs,j=>t(14,h=j)),Se(l,hs,j=>t(15,g=j));let{variant:y="panel"}=e,b,k=-1;async function w(j=!0){if(!b)return;const A=_==null?void 0:_.callIndex;if(A==null||A<0)return;await pt();const R=b.querySelector(`button[data-call-index='${A}']`);if(!R)return;const T=R.offsetTop,P=T+R.offsetHeight,E=b.scrollTop,L=E+b.clientHeight;if(!(T>=E&&P<=L))if(j){const H=T-b.clientHeight/2+R.offsetHeight/2;b.scrollTo({top:Math.max(H,0),behavior:"smooth"})}else R.scrollIntoView({block:"nearest",inline:"nearest",behavior:"smooth"})}const F=j=>vt(j.originalIndex),q=j=>vt(j.originalIndex);function M(j){Je[j?"unshift":"push"](()=>{b=j,t(3,b)})}return l.$$set=j=>{"variant"in j&&t(0,y=j.variant)},l.$$.update=()=>{l.$$.dirty&32768&&t(6,n=g),l.$$.dirty&16384&&t(1,s=h),l.$$.dirty&8192&&t(5,i=v),l.$$.dirty&4096&&t(10,o=m),l.$$.dirty&1024&&t(11,a=(()=>{const j=new Map;return o.forEach((A,R)=>{var P;const T=((P=A==null?void 0:A.response)==null?void 0:P.requestId)||`__noid_${R}`;j.has(T)?j.get(T).last=R:j.set(T,{first:R,last:R,id:T})}),Array.from(j.values()).sort((A,R)=>A.first-R.first||A.last-R.last)})()),l.$$.dirty&2048&&t(9,f=(()=>{const j=[];for(let A=0;A<a.length;A++){const R=a[A];let T=!1;for(let P=0;P<a.length;P++){if(A===P)continue;const E=a[P];if(E.first<=R.first&&R.last<=E.last&&(E.first<R.first||R.last<E.last)){T=!0;break}}T||j.push({...R})}return j.sort((A,R)=>A.first-R.first),j.forEach((A,R)=>{A.round=R+1}),j})()),l.$$.dirty&1536&&t(8,u=(()=>{const j=new Array(o.length).fill(null);for(const A of f)for(let R=A.first;R<=A.last;R++)j[R]={round:A.round,isRoundStart:R===A.first,topSpanId:A.id};return j})()),l.$$.dirty&258&&t(4,p=s.map(j=>{var T,P;const A=((P=(T=j.request)==null?void 0:T.response)==null?void 0:P.requestId)||`__noid_${j.requestIndex}`,R=u[j.requestIndex]||{round:0,isRoundStart:!1,topSpanId:A};return{requestIndex:j.requestIndex,request:j.request,requestId:A,calls:j.calls,isRoundStart:R.isRoundStart,roundNumber:R.round,topSpanId:R.topSpanId}})),l.$$.dirty&132&&_.callIndex!==k&&(t(7,k=_.callIndex),w())},[y,s,_,b,p,i,n,k,u,f,o,a,m,v,h,g,F,q,M]}class Bs extends We{constructor(e){super(),Ve(this,e,Js,Ls,Me,{variant:0})}}function vl(l,e,t){const n=l.slice();return n[12]=e[t],n[14]=t,n}function Ds(l){let e,t=[],n=new Map,s=se(l[1]);const i=o=>JSON.stringify([o[12].agentName,o[12].promptKey,o[14]]);for(let o=0;o<s.length;o+=1){let a=vl(l,s,o),f=i(a);n.set(f,t[o]=hl(f,a))}return{c(){e=d("div");for(let o=0;o<t.length;o+=1)t[o].c();r(e,"class","agent-list svelte-rhyrxk")},m(o,a){C(o,e,a);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(o,a){a&11&&(s=se(o[1]),t=zn(t,a,i,1,o,s,n,e,$n,hl,null,vl))},d(o){o&&I(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Us(l){let e;return{c(){e=d("div"),e.textContent="No agents found.",r(e,"class","empty svelte-rhyrxk")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function hl(l,e){let t,n,s,i=e[14]+1+"",o,a,f,u=e[12].agentName+"",p,_,m,v,h=e[12].toolCallCount+"",g,y,b=e[12].toolCallCount===1?"":"s",k,w,F,q,M,j;function A(){return e[8](e[12])}return{key:l,first:null,c(){t=d("button"),n=d("div"),s=d("span"),o=S(i),a=N(),f=d("span"),p=S(u),_=N(),m=d("div"),v=d("span"),g=S(h),y=S(" tool call"),k=S(b),w=N(),r(s,"class","agent-num svelte-rhyrxk"),r(f,"class","agent-name svelte-rhyrxk"),r(n,"class","agent-header-line svelte-rhyrxk"),r(v,"class","agent-requests svelte-rhyrxk"),r(m,"class","agent-meta svelte-rhyrxk"),r(t,"class","agent-item svelte-rhyrxk"),Ae(t,"--agent-color",bl(e[12].agentName)),r(t,"data-agent-name",F=e[12].agentName),r(t,"aria-label",q="Agent "+e[12].agentName),Te(t,"selected",e[0]===e[12]),Te(t,"indented",e[12].shouldIndent),this.first=t},m(R,T){C(R,t,T),c(t,n),c(n,s),c(s,o),c(n,a),c(n,f),c(f,p),c(t,_),c(t,m),c(m,v),c(v,g),c(v,y),c(v,k),c(t,w),M||(j=oe(t,"click",A),M=!0)},p(R,T){e=R,T&2&&i!==(i=e[14]+1+"")&&O(o,i),T&2&&u!==(u=e[12].agentName+"")&&O(p,u),T&2&&h!==(h=e[12].toolCallCount+"")&&O(g,h),T&2&&b!==(b=e[12].toolCallCount===1?"":"s")&&O(k,b),T&2&&Ae(t,"--agent-color",bl(e[12].agentName)),T&2&&F!==(F=e[12].agentName)&&r(t,"data-agent-name",F),T&2&&q!==(q="Agent "+e[12].agentName)&&r(t,"aria-label",q),T&3&&Te(t,"selected",e[0]===e[12]),T&2&&Te(t,"indented",e[12].shouldIndent)},d(R){R&&I(t),M=!1,j()}}}function $s(l){let e,t,n,s,i,o,a=l[1].length+"",f,u,p,_;function m(g,y){return g[1].length?Ds:Us}let v=m(l),h=v(l);return{c(){e=d("section"),t=d("header"),n=d("div"),n.innerHTML='<h2 class="svelte-rhyrxk">Agent Switching</h2>',s=N(),i=d("div"),o=d("span"),f=S(a),u=N(),p=d("div"),_=d("div"),h.c(),r(n,"class","header-title svelte-rhyrxk"),r(o,"class","count-badge svelte-rhyrxk"),r(i,"class","section-meta svelte-rhyrxk"),r(t,"class","section-header agent-header svelte-rhyrxk"),r(_,"class","agent-content svelte-rhyrxk"),r(p,"class","agent-scroll svelte-rhyrxk"),r(p,"role","region"),r(p,"aria-label","Agent switching scroll area"),r(e,"class","agent-panel svelte-rhyrxk")},m(g,y){C(g,e,y),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(o,f),c(e,u),c(e,p),c(p,_),h.m(_,null),l[9](p)},p(g,[y]){y&2&&a!==(a=g[1].length+"")&&O(f,a),v===(v=m(g))&&h?h.p(g,y):(h.d(1),h=v(g),h&&(h.c(),h.m(_,null)))},i:z,o:z,d(g){g&&I(e),h.d(),l[9](null)}}}const zs=200,Vs="panel/editAgent";function bl(l){let e=0;for(let n=0;n<l.length;n++)e=(e<<5)-e+l.charCodeAt(n),e=e&e;return`hsl(${Math.abs(e%360)}, 65%, 55%)`}function Ws(l,e,t){let n,s,i,o,a,f;Se(l,Be,g=>t(5,o=g)),Se(l,qe,g=>t(6,a=g)),Se(l,nt,g=>t(7,f=g)),Bn(()=>{mt.set({startIdx:-1,endIdx:-1})});let u,p=null;async function _(){if(!u||!i)return;await pt();const g=i.agentName;if(g===p)return;p=g;const y=g.replace(/["'\\\[\]]/g,"\\$&"),b=u.querySelector(`button[data-agent-name="${y}"]`);if(!b)return;const k=b.offsetTop,w=k+b.offsetHeight,F=u.scrollTop,q=F+u.clientHeight;if(k>=F&&w<=q)return;const M=k-u.clientHeight/2+b.offsetHeight/2;u.scrollTo({top:Math.max(M,0),behavior:"smooth"})}function m(g){mt.set({startIdx:g.startIdx,endIdx:g.endIdx});const y=g.requests[0];if(!y)return;const b=o.find(k=>k.requestIndex===y.idx);if(b){const k=o.indexOf(b);vt(k)}}const v=g=>m(g);function h(g){Je[g?"unshift":"push"](()=>{u=g,t(2,u)})}return l.$$.update=()=>{l.$$.dirty&128&&t(4,n=(()=>{const g=[];let y=null,b=null;return f.forEach((k,w)=>{var A,R,T,P;const F=(k==null?void 0:k.name)||"default agent",M=(((P=(T=(R=(A=k==null?void 0:k.requestMessages)==null?void 0:A[0])==null?void 0:R.content)==null?void 0:T[0])==null?void 0:P.text)||""||"").substring(0,zs),j=JSON.stringify([F,M]);j!==y?(b&&g.push(b),y=j,b={agentName:F,promptKey:M,requests:[{req:k,idx:w}],startIdx:w,endIdx:w}):(b.requests.push({req:k,idx:w}),b.endIdx=w)}),b&&g.push(b),g})()),l.$$.dirty&48&&t(1,s=n.map(g=>{const y=o.filter(k=>k.requestIndex>=g.startIdx&&k.requestIndex<=g.endIdx).length,b=g.agentName!==Vs;return{...g,toolCallCount:y,shouldIndent:b}})),l.$$.dirty&98&&t(0,i=(()=>{const g=a.callIndex;if(g<0||!o[g])return null;const y=o[g].requestIndex;for(const b of s)if(y>=b.startIdx&&y<=b.endIdx)return b;return null})()),l.$$.dirty&1&&i&&_()},[i,s,u,m,n,o,a,f,v,h]}class Ks extends We{constructor(e){super(),Ve(this,e,Ws,$s,Me,{})}}function gl(l,e,t){const n=l.slice();return n[17]=e[t],n[19]=t,n}function Gs(l){let e,t;return{c(){e=d("pre"),t=S(l[8])},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&256&&O(t,n[8])},d(n){n&&I(e)}}}function Ys(l){let e,t,n=l[0]==="todo"?"Raw JSON":"Todo View",s,i,o,a,f,u;function p(v,h){var g;return h&9&&(o=null),o==null&&(o=!!(v[0]==="todo"&&Array.isArray((g=v[3])==null?void 0:g.todoList))),o?ei:xs}let _=p(l,-1),m=_(l);return{c(){e=d("div"),t=d("button"),s=S(n),i=N(),m.c(),a=be(),r(t,"class","svelte-15q0qw3"),r(e,"class","actions svelte-15q0qw3")},m(v,h){C(v,e,h),c(e,t),c(t,s),C(v,i,h),m.m(v,h),C(v,a,h),f||(u=oe(t,"click",l[10]),f=!0)},p(v,h){h&1&&n!==(n=v[0]==="todo"?"Raw JSON":"Todo View")&&O(s,n),_===(_=p(v,h))&&m?m.p(v,h):(m.d(1),m=_(v),m&&(m.c(),m.m(a.parentNode,a)))},d(v){v&&(I(e),I(i),I(a)),m.d(v),f=!1,u()}}}function Qs(l){let e,t,n=l[0]==="patch"?"Raw JSON":"Patch View",s,i,o,a,f;function u(m,v){return m[0]==="patch"&&m[1].length?li:ti}let p=u(l),_=p(l);return{c(){e=d("div"),t=d("button"),s=S(n),i=N(),_.c(),o=be(),r(t,"class","svelte-15q0qw3"),r(e,"class","actions svelte-15q0qw3")},m(m,v){C(m,e,v),c(e,t),c(t,s),C(m,i,v),_.m(m,v),C(m,o,v),a||(f=oe(t,"click",l[12]),a=!0)},p(m,v){v&1&&n!==(n=m[0]==="patch"?"Raw JSON":"Patch View")&&O(s,n),p===(p=u(m))&&_?_.p(m,v):(_.d(1),_=p(m),_&&(_.c(),_.m(o.parentNode,o)))},d(m){m&&(I(e),I(i),I(o)),_.d(m),a=!1,f()}}}function Xs(l){let e,t,n=l[0]==="formatted"?"Raw JSON":"Formatted",s,i,o,a,f;function u(m,v){var h;return m[0]==="formatted"&&((h=m[3])==null?void 0:h.content)!==void 0?ri:oi}let p=u(l),_=p(l);return{c(){e=d("div"),t=d("button"),s=S(n),i=N(),_.c(),o=be(),r(t,"class","svelte-15q0qw3"),r(e,"class","actions svelte-15q0qw3")},m(m,v){C(m,e,v),c(e,t),c(t,s),C(m,i,v),_.m(m,v),C(m,o,v),a||(f=oe(t,"click",l[11]),a=!0)},p(m,v){v&1&&n!==(n=m[0]==="formatted"?"Raw JSON":"Formatted")&&O(s,n),p===(p=u(m))&&_?_.p(m,v):(_.d(1),_=p(m),_&&(_.c(),_.m(o.parentNode,o)))},d(m){m&&(I(e),I(i),I(o)),_.d(m),a=!1,f()}}}function Zs(l){let e,t,n=l[0]==="diff"?"Raw JSON":"View Diff",s,i,o,a,f,u;function p(v,h){var g,y;return h&9&&(o=null),o==null&&(o=!!(v[0]==="diff"&&((g=v[3])!=null&&g.oldString||Array.isArray((y=v[3])==null?void 0:y.replacements)&&v[3].replacements.length))),o?ci:ai}let _=p(l,-1),m=_(l);return{c(){e=d("div"),t=d("button"),s=S(n),i=N(),m.c(),a=be(),r(t,"class","svelte-15q0qw3"),r(e,"class","actions svelte-15q0qw3")},m(v,h){C(v,e,h),c(e,t),c(t,s),C(v,i,h),m.m(v,h),C(v,a,h),f||(u=oe(t,"click",l[9]),f=!0)},p(v,h){h&1&&n!==(n=v[0]==="diff"?"Raw JSON":"View Diff")&&O(s,n),_===(_=p(v,h))&&m?m.p(v,h):(m.d(1),m=_(v),m&&(m.c(),m.m(a.parentNode,a)))},d(v){v&&(I(e),I(i),I(a)),m.d(v),f=!1,u()}}}function xs(l){let e,t;return{c(){e=d("pre"),t=S(l[8])},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&256&&O(t,n[8])},d(n){n&&I(e)}}}function ei(l){let e,t=Mt(l[3])+"";return{c(){e=d("div"),r(e,"class","todo-wrapper"),r(e,"aria-label","Todo list view")},m(n,s){C(n,e,s),e.innerHTML=t},p(n,s){s&8&&t!==(t=Mt(n[3])+"")&&(e.innerHTML=t)},d(n){n&&I(e)}}}function ti(l){let e,t;return{c(){e=d("pre"),t=S(l[8])},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&256&&O(t,n[8])},d(n){n&&I(e)}}}function li(l){let e,t=se(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kl(gl(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","patch-view svelte-15q0qw3"),r(e,"aria-label","Apply patch visualization")},m(s,i){C(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i&2){t=se(s[1]);let o;for(o=0;o<t.length;o+=1){const a=gl(s,t,o);n[o]?n[o].p(a,i):(n[o]=kl(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function ni(l){let e;return{c(){e=d("div"),e.textContent="(No content changes captured)",r(e,"class","patch-empty svelte-15q0qw3")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function si(l){let e,t=yl(l[17].body)+"",n;return{c(){e=d("pre"),r(e,"class","patch-code svelte-15q0qw3"),r(e,"aria-label",n=l[17].action+" file diff")},m(s,i){C(s,e,i),e.innerHTML=t},p(s,i){i&2&&t!==(t=yl(s[17].body)+"")&&(e.innerHTML=t),i&2&&n!==(n=s[17].action+" file diff")&&r(e,"aria-label",n)},d(s){s&&I(e)}}}function ii(l){let e;return{c(){e=d("div"),e.textContent="File deleted",r(e,"class","patch-deleted-note svelte-15q0qw3")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function kl(l){let e,t,n,s,i=l[17].action+"",o,a,f,u=l[17].filePath+"",p,_,m,v,h;function g(k,w){return k[17].action==="Delete"?ii:k[17].body?si:ni}let y=g(l),b=y(l);return{c(){e=d("div"),t=d("div"),n=d("span"),s=d("span"),o=S(i),a=S(":"),f=N(),p=S(u),m=N(),b.c(),v=N(),r(s,"class","patch-action-text svelte-15q0qw3"),r(n,"class","patch-path svelte-15q0qw3"),r(n,"title",_=l[17].filePath),r(t,"class","patch-head svelte-15q0qw3"),r(e,"class","patch-file svelte-15q0qw3"),r(e,"data-action",h=l[17].action),r(e,"data-idx",l[19])},m(k,w){C(k,e,w),c(e,t),c(t,n),c(n,s),c(s,o),c(s,a),c(n,f),c(n,p),c(e,m),b.m(e,null),c(e,v)},p(k,w){w&2&&i!==(i=k[17].action+"")&&O(o,i),w&2&&u!==(u=k[17].filePath+"")&&O(p,u),w&2&&_!==(_=k[17].filePath)&&r(n,"title",_),y===(y=g(k))&&b?b.p(k,w):(b.d(1),b=y(k),b&&(b.c(),b.m(e,v))),w&2&&h!==(h=k[17].action)&&r(e,"data-action",h)},d(k){k&&I(e),b.d()}}}function oi(l){let e,t;return{c(){e=d("pre"),t=S(l[8])},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&256&&O(t,n[8])},d(n){n&&I(e)}}}function ri(l){let e,t,n,s=l[3].filePath+"",i,o,a,f=l[3].content+"",u;return{c(){e=d("div"),t=d("div"),n=d("span"),i=S(s),o=N(),a=d("pre"),u=S(f),r(n,"class","path svelte-15q0qw3"),r(t,"class","file-head svelte-15q0qw3"),r(e,"class","file-view svelte-15q0qw3")},m(p,_){C(p,e,_),c(e,t),c(t,n),c(n,i),c(e,o),c(e,a),c(a,u)},p(p,_){_&8&&s!==(s=p[3].filePath+"")&&O(i,s),_&8&&f!==(f=p[3].content+"")&&O(u,f)},d(p){p&&I(e)}}}function ai(l){let e,t;return{c(){e=d("pre"),t=S(l[8])},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&256&&O(t,n[8])},d(n){n&&I(e)}}}function ci(l){let e,t=(l[6]?Ft(l[3]):Et(l[3]))+"";return{c(){e=d("div"),r(e,"class","diff-wrapper"),r(e,"aria-label","Replace diff view")},m(n,s){C(n,e,s),e.innerHTML=t},p(n,s){s&72&&t!==(t=(n[6]?Ft(n[3]):Et(n[3]))+"")&&(e.innerHTML=t)},d(n){n&&I(e)}}}function fi(l){let e;function t(i,o){return i[7]||i[6]?Zs:i[4]?Xs:i[2]?Qs:i[5]?Ys:Gs}let n=t(l),s=n(l);return{c(){e=d("div"),s.c(),r(e,"class","fn-args")},m(i,o){C(i,e,o),s.m(e,null)},p(i,[o]){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e,null)))},i:z,o:z,d(i){i&&I(e),s.d()}}}function ui(l){if(!l)return[];const e=l.indexOf("*** Begin Patch"),t=l.indexOf("*** End Patch");e!==-1&&t!==-1&&(l=l.slice(e+15,t).trim());const n=l.split(/\r?\n/),s=/^\*\*\* (Update|Add|Delete) File: (.+)$/,i=[];let o=null;for(const a of n){const f=a.match(s);f?(o&&i.push(o),o={action:f[1],filePath:f[2].trim(),body:[]}):o&&o.body.push(a)}return o&&i.push(o),i.map(a=>({...a,body:a.body.join(`
`).replace(/^[\n\r]+|[\n\r]+$/g,"")}))}function di(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function yl(l){return l?l.split(/\n/).map(e=>{const t=di(e)||"&nbsp;";let n="ctx";return e.startsWith("+")?n="add":e.startsWith("-")?n="del":e.startsWith("@@")&&(n="hunk"),`<span class="pl ${n}">${t}</span>`}).join(`
`):""}function pi(l,e,t){let n,s,i,o,a,f,u,p,_,m,v,{call:h}=e,g="auto";function y(){t(0,g=g==="diff"?"raw":"diff")}function b(){t(0,g=g==="todo"?"raw":"todo")}function k(){t(0,g=g==="formatted"?"raw":"formatted")}function w(){t(0,g=g==="patch"?"raw":"patch")}return l.$$set=F=>{"call"in F&&t(13,h=F.call)},l.$$.update=()=>{var F,q;l.$$.dirty&8192&&t(14,n=(h==null?void 0:h.arguments)??((F=h==null?void 0:h.function)==null?void 0:F.arguments)),l.$$.dirty&8192&&t(16,s=(h==null?void 0:h.name)??((q=h==null?void 0:h.function)==null?void 0:q.name)),l.$$.dirty&16384&&t(3,i=typeof n=="string"?Pe(n):n),l.$$.dirty&65536&&t(7,o=s==="replace_string_in_file"),l.$$.dirty&65536&&t(6,a=s==="multi_replace_string_in_file"),l.$$.dirty&65536&&t(5,f=s==="manage_todo_list"),l.$$.dirty&65536&&t(4,u=s==="create_file"),l.$$.dirty&65536&&t(2,p=s==="apply_patch"),l.$$.dirty&16396&&t(15,_=(()=>{if(!p)return"";if(i&&typeof i=="object")return i.patch||i.input||i.diff||"";if(typeof n=="string"){const M=Pe(n);if(M&&typeof M=="object")return M.patch||M.input||M.diff||"";if(/\*\*\* Begin Patch/.test(n))return n}return""})()),l.$$.dirty&32772&&t(1,m=p?ui(_):[]),l.$$.dirty&16392&&t(8,v=(()=>{try{if(i&&typeof i=="object")return JSON.stringify(i,null,2);if(typeof n=="string"){const M=Pe(n);return M&&typeof M=="object"?JSON.stringify(M,null,2):n}return n!==void 0?JSON.stringify(n,null,2):""}catch{return typeof n=="string"?n:""}})()),l.$$.dirty&255&&g==="auto"&&(o&&(i!=null&&i.oldString)||a&&Array.isArray(i==null?void 0:i.replacements)&&i.replacements.length?t(0,g="diff"):f&&Array.isArray(i==null?void 0:i.todoList)?t(0,g="todo"):u&&(i==null?void 0:i.content)!==void 0?t(0,g="formatted"):p&&m.length&&t(0,g="patch"))},[g,m,p,i,u,f,a,o,v,y,b,k,w,h,n,_,s]}class _i extends We{constructor(e){super(),Ve(this,e,pi,fi,Me,{call:13})}}function wl(l,e,t){const n=l.slice();return n[35]=e[t],n[37]=t,n}function mi(l){const e=l.slice(),t=e[13][e[35].id||e[35].tool_call_id||e[35].toolCallId||"idx_"+e[37]].text;e[38]=t;const n=e[15](e[35],e[38]);e[39]=n;const s=e[35].id||e[35].tool_call_id||e[35].toolCallId||"idx_"+e[37];return e[40]=s,e}function At(l){const e=l.slice(),t=e[1].response.copilotFunctionCalls||e[1].response.toolCalls||[];return e[34]=t,e}function Il(l,e,t){const n=l.slice();return n[44]=e[t],n[46]=t,n}function Cl(l,e,t){const n=l.slice();return n[47]=e[t],n[49]=t,n}function Nl(l,e,t){const n=l.slice();return n[51]=e[t],n}function Sl(l,e,t){const n=l.slice();return n[41]=e[t],n[43]=t,n}function vi(l){let e;return{c(){e=d("div"),e.innerHTML='<em class="text-soft">No response data available</em>',r(e,"class","empty-response svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,i:z,o:z,d(t){t&&I(e)}}}function hi(l){var p,_,m;let e,t,n,s,i,o=l[10]&&jl(l),a=((p=l[1].response.value)==null?void 0:p.length)&&Pl(l),f=(((_=l[1].response.copilotFunctionCalls)==null?void 0:_.length)||((m=l[1].response.toolCalls)==null?void 0:m.length))&&Hl(At(l)),u=l[1].response.usage&&Vl(l);return{c(){o&&o.c(),e=N(),a&&a.c(),t=N(),f&&f.c(),n=N(),u&&u.c(),s=be()},m(v,h){o&&o.m(v,h),C(v,e,h),a&&a.m(v,h),C(v,t,h),f&&f.m(v,h),C(v,n,h),u&&u.m(v,h),C(v,s,h),i=!0},p(v,h){var g,y,b;v[10]?o?o.p(v,h):(o=jl(v),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),(g=v[1].response.value)!=null&&g.length?a?a.p(v,h):(a=Pl(v),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),(y=v[1].response.copilotFunctionCalls)!=null&&y.length||(b=v[1].response.toolCalls)!=null&&b.length?f?(f.p(At(v),h),h[0]&2&&me(f,1)):(f=Hl(At(v)),f.c(),me(f,1),f.m(n.parentNode,n)):f&&($e(),we(f,1,1,()=>{f=null}),ze()),v[1].response.usage?u?u.p(v,h):(u=Vl(v),u.c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},i(v){i||(me(f),i=!0)},o(v){we(f),i=!1},d(v){v&&(I(e),I(t),I(n),I(s)),o&&o.d(v),a&&a.d(v),f&&f.d(v),u&&u.d(v)}}}function jl(l){let e,t,n,s,i,o,a,f,u,p,_,m,v,h,g,y,b,k,w,F,q,M,j,A,R,T,P,E,L,H,te,ie,re,ae,U,ke,J=l[5]?"Hide Raw Response JSON":"Show Raw Response JSON",X,fe,ee,W,_e,$;function ce(K,ue){return K[10].type?gi:bi}let Ie=ce(l),ye=Ie(l),D=l[10].type&&Rl(l);function V(K,ue){return K[10].reason?yi:ki}let Oe=V(l),Ce=Oe(l),le=l[10].reason&&Al(l);function Y(K,ue){return K[10].requestId?Ii:wi}let x=Y(l),B=x(l),ne=l[10].requestId&&Tl(l);function je(K,ue){return K[10].serverRequestId?Ni:Ci}let de=je(l),Z=de(l),pe=l[10].serverRequestId&&Ol(l),ve=l[5]&&ql(l);return{c(){e=d("section"),t=d("details"),n=d("summary"),n.innerHTML='<span class="caret svelte-1t0ixjy"></span><h3 class="svelte-1t0ixjy">Response Metadata</h3>',s=N(),i=d("div"),o=d("div"),a=d("div"),f=d("div"),f.textContent="Type",u=N(),p=d("div"),ye.c(),_=N(),m=d("div"),D&&D.c(),v=N(),h=d("div"),g=d("div"),g.textContent="Reason",y=N(),b=d("div"),Ce.c(),k=N(),w=d("div"),le&&le.c(),F=N(),q=d("div"),M=d("div"),M.textContent="Request ID",j=N(),A=d("div"),B.c(),R=N(),T=d("div"),ne&&ne.c(),P=N(),E=d("div"),L=d("div"),L.textContent="Server Request ID",H=N(),te=d("div"),Z.c(),ie=N(),re=d("div"),pe&&pe.c(),ae=N(),U=d("div"),ke=d("button"),X=S(J),fe=N(),ee=d("button"),ee.textContent="Copy All",W=N(),ve&&ve.c(),r(n,"class","svelte-1t0ixjy"),r(f,"class","meta-cell key svelte-1t0ixjy"),r(f,"role","cell"),r(p,"class","meta-cell val svelte-1t0ixjy"),r(p,"role","cell"),r(m,"class","meta-cell action svelte-1t0ixjy"),r(m,"role","cell"),r(a,"class","meta-row svelte-1t0ixjy"),r(a,"role","row"),r(g,"class","meta-cell key svelte-1t0ixjy"),r(g,"role","cell"),r(b,"class","meta-cell val svelte-1t0ixjy"),r(b,"role","cell"),r(w,"class","meta-cell action svelte-1t0ixjy"),r(w,"role","cell"),r(h,"class","meta-row svelte-1t0ixjy"),r(h,"role","row"),r(M,"class","meta-cell key svelte-1t0ixjy"),r(M,"role","cell"),r(A,"class","meta-cell val svelte-1t0ixjy"),r(A,"role","cell"),r(T,"class","meta-cell action svelte-1t0ixjy"),r(T,"role","cell"),r(q,"class","meta-row svelte-1t0ixjy"),r(q,"role","row"),r(L,"class","meta-cell key svelte-1t0ixjy"),r(L,"role","cell"),r(te,"class","meta-cell val svelte-1t0ixjy"),r(te,"role","cell"),r(re,"class","meta-cell action svelte-1t0ixjy"),r(re,"role","cell"),r(E,"class","meta-row svelte-1t0ixjy"),r(E,"role","row"),r(o,"class","response-meta-table svelte-1t0ixjy"),r(o,"role","table"),r(o,"aria-label","Response metadata key value pairs"),r(ke,"class","mini-btn"),r(ee,"class","mini-btn alt svelte-1t0ixjy"),r(ee,"title","Copy all metadata JSON"),r(U,"class","meta-actions-row svelte-1t0ixjy"),r(i,"class","collapsible-body svelte-1t0ixjy"),r(t,"class","collapsible svelte-1t0ixjy"),r(t,"data-role","response-meta"),t.open=!0,r(t,"aria-label","Response metadata group"),r(e,"class","group response-meta-group svelte-1t0ixjy")},m(K,ue){C(K,e,ue),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(o,a),c(a,f),c(a,u),c(a,p),ye.m(p,null),c(a,_),c(a,m),D&&D.m(m,null),c(o,v),c(o,h),c(h,g),c(h,y),c(h,b),Ce.m(b,null),c(h,k),c(h,w),le&&le.m(w,null),c(o,F),c(o,q),c(q,M),c(q,j),c(q,A),B.m(A,null),c(q,R),c(q,T),ne&&ne.m(T,null),c(o,P),c(o,E),c(E,L),c(E,H),c(E,te),Z.m(te,null),c(E,ie),c(E,re),pe&&pe.m(re,null),c(i,ae),c(i,U),c(U,ke),c(ke,X),c(U,fe),c(U,ee),c(i,W),ve&&ve.m(i,null),_e||($=[oe(ke,"click",l[26]),oe(ee,"click",l[17])],_e=!0)},p(K,ue){Ie===(Ie=ce(K))&&ye?ye.p(K,ue):(ye.d(1),ye=Ie(K),ye&&(ye.c(),ye.m(p,null))),K[10].type?D?D.p(K,ue):(D=Rl(K),D.c(),D.m(m,null)):D&&(D.d(1),D=null),Oe===(Oe=V(K))&&Ce?Ce.p(K,ue):(Ce.d(1),Ce=Oe(K),Ce&&(Ce.c(),Ce.m(b,null))),K[10].reason?le?le.p(K,ue):(le=Al(K),le.c(),le.m(w,null)):le&&(le.d(1),le=null),x===(x=Y(K))&&B?B.p(K,ue):(B.d(1),B=x(K),B&&(B.c(),B.m(A,null))),K[10].requestId?ne?ne.p(K,ue):(ne=Tl(K),ne.c(),ne.m(T,null)):ne&&(ne.d(1),ne=null),de===(de=je(K))&&Z?Z.p(K,ue):(Z.d(1),Z=de(K),Z&&(Z.c(),Z.m(te,null))),K[10].serverRequestId?pe?pe.p(K,ue):(pe=Ol(K),pe.c(),pe.m(re,null)):pe&&(pe.d(1),pe=null),ue[0]&32&&J!==(J=K[5]?"Hide Raw Response JSON":"Show Raw Response JSON")&&O(X,J),K[5]?ve?ve.p(K,ue):(ve=ql(K),ve.c(),ve.m(i,null)):ve&&(ve.d(1),ve=null)},d(K){K&&I(e),ye.d(),D&&D.d(),Ce.d(),le&&le.d(),B.d(),ne&&ne.d(),Z.d(),pe&&pe.d(),ve&&ve.d(),_e=!1,Fe($)}}}function bi(l){let e;return{c(){e=d("span"),e.textContent="‚Äî",r(e,"class","meta-missing svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function gi(l){let e,t=l[10].type+"",n,s;return{c(){e=d("span"),n=S(t),r(e,"class",s="meta-badge "+l[10].type+" svelte-1t0ixjy")},m(i,o){C(i,e,o),c(e,n)},p(i,o){o[0]&1024&&t!==(t=i[10].type+"")&&O(n,t),o[0]&1024&&s!==(s="meta-badge "+i[10].type+" svelte-1t0ixjy")&&r(e,"class",s)},d(i){i&&I(e)}}}function Rl(l){let e,t=l[6].type?"‚úì":"‚ßâ",n,s,i;return{c(){e=d("button"),n=S(t),r(e,"class","copy-btn svelte-1t0ixjy"),r(e,"title","Copy Type")},m(o,a){C(o,e,a),c(e,n),s||(i=oe(e,"click",l[22]),s=!0)},p(o,a){a[0]&64&&t!==(t=o[6].type?"‚úì":"‚ßâ")&&O(n,t)},d(o){o&&I(e),s=!1,i()}}}function ki(l){let e;return{c(){e=d("span"),e.textContent="‚Äî",r(e,"class","meta-missing svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function yi(l){let e,t=l[10].reason+"",n,s;return{c(){e=d("span"),n=S(t),r(e,"class",s="reason-badge reason-"+l[10].reason+" svelte-1t0ixjy")},m(i,o){C(i,e,o),c(e,n)},p(i,o){o[0]&1024&&t!==(t=i[10].reason+"")&&O(n,t),o[0]&1024&&s!==(s="reason-badge reason-"+i[10].reason+" svelte-1t0ixjy")&&r(e,"class",s)},d(i){i&&I(e)}}}function Al(l){let e,t=l[6].reason?"‚úì":"‚ßâ",n,s,i;return{c(){e=d("button"),n=S(t),r(e,"class","copy-btn svelte-1t0ixjy"),r(e,"title","Copy Reason")},m(o,a){C(o,e,a),c(e,n),s||(i=oe(e,"click",l[23]),s=!0)},p(o,a){a[0]&64&&t!==(t=o[6].reason?"‚úì":"‚ßâ")&&O(n,t)},d(o){o&&I(e),s=!1,i()}}}function wi(l){let e;return{c(){e=d("span"),e.textContent="‚Äî",r(e,"class","meta-missing svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Ii(l){let e,t=l[10].requestId+"",n,s;return{c(){e=d("code"),n=S(t),r(e,"class","id-frag full svelte-1t0ixjy"),r(e,"title",s=l[10].requestId)},m(i,o){C(i,e,o),c(e,n)},p(i,o){o[0]&1024&&t!==(t=i[10].requestId+"")&&O(n,t),o[0]&1024&&s!==(s=i[10].requestId)&&r(e,"title",s)},d(i){i&&I(e)}}}function Tl(l){let e,t=l[6].requestId?"‚úì":"‚ßâ",n,s,i;return{c(){e=d("button"),n=S(t),r(e,"class","copy-btn svelte-1t0ixjy"),r(e,"title","Copy Request ID")},m(o,a){C(o,e,a),c(e,n),s||(i=oe(e,"click",l[24]),s=!0)},p(o,a){a[0]&64&&t!==(t=o[6].requestId?"‚úì":"‚ßâ")&&O(n,t)},d(o){o&&I(e),s=!1,i()}}}function Ci(l){let e;return{c(){e=d("span"),e.textContent="‚Äî",r(e,"class","meta-missing svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Ni(l){let e,t=l[10].serverRequestId+"",n,s;return{c(){e=d("code"),n=S(t),r(e,"class","id-frag full svelte-1t0ixjy"),r(e,"title",s=l[10].serverRequestId)},m(i,o){C(i,e,o),c(e,n)},p(i,o){o[0]&1024&&t!==(t=i[10].serverRequestId+"")&&O(n,t),o[0]&1024&&s!==(s=i[10].serverRequestId)&&r(e,"title",s)},d(i){i&&I(e)}}}function Ol(l){let e,t=l[6].serverRequestId?"‚úì":"‚ßâ",n,s,i;return{c(){e=d("button"),n=S(t),r(e,"class","copy-btn svelte-1t0ixjy"),r(e,"title","Copy Server Request ID")},m(o,a){C(o,e,a),c(e,n),s||(i=oe(e,"click",l[25]),s=!0)},p(o,a){a[0]&64&&t!==(t=o[6].serverRequestId?"‚úì":"‚ßâ")&&O(n,t)},d(o){o&&I(e),s=!1,i()}}}function ql(l){let e,t=JSON.stringify(l[1].response,null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-1t0ixjy"),Ae(e,"margin-top","6px")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&2&&t!==(t=JSON.stringify(s[1].response,null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function Pl(l){let e,t,n,s,i;function o(u,p){return u[3]&&u[12].length?Ri:u[3]&&u[11]?ji:Si}let a=o(l),f=a(l);return{c(){e=d("section"),t=d("details"),n=d("summary"),n.innerHTML='<span class="caret svelte-1t0ixjy"></span><h3 class="svelte-1t0ixjy">Response Text</h3>',s=N(),i=d("div"),f.c(),r(n,"class","svelte-1t0ixjy"),r(i,"class","collapsible-body svelte-1t0ixjy"),r(t,"class","collapsible svelte-1t0ixjy"),t.open=!0,r(t,"data-role","response-text"),r(t,"aria-label","Response text group"),r(e,"class","group response-text-group svelte-1t0ixjy")},m(u,p){C(u,e,p),c(e,t),c(t,n),c(t,s),c(t,i),f.m(i,null)},p(u,p){a===(a=o(u))&&f?f.p(u,p):(f.d(1),f=a(u),f&&(f.c(),f.m(i,null)))},d(u){u&&I(e),f.d()}}}function Si(l){let e,t=l[1].response.value.join(`
`)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-1t0ixjy")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&2&&t!==(t=s[1].response.value.join(`
`)+"")&&O(n,t)},d(s){s&&I(e)}}}function ji(l){let e,t=se(l[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=El(Il(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","analyze-files-response svelte-1t0ixjy"),r(e,"aria-label","Analyze files and patterns fenced code rendering")},m(s,i){C(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&20){t=se(s[2]);let o;for(o=0;o<t.length;o+=1){const a=Il(s,t,o);n[o]?n[o].p(a,i):(n[o]=El(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function Ri(l){let e,t,n,s,i,o,a=l[1].response.value.join(`
`)+"",f,u=se(l[12]),p=[];for(let _=0;_<u.length;_+=1)p[_]=Ll(Sl(l,u,_));return{c(){e=d("div");for(let _=0;_<p.length;_+=1)p[_].c();t=N(),n=d("details"),s=d("summary"),s.textContent="Show Raw Combined Text",i=N(),o=d("pre"),f=S(a),r(s,"class","svelte-1t0ixjy"),r(o,"class","code-block small svelte-1t0ixjy"),Ae(o,"margin-top","6px"),r(n,"class","raw-response-text svelte-1t0ixjy"),n.open=!0,r(e,"class","analyze-files-response svelte-1t0ixjy"),r(e,"aria-label","Analyze files and patterns formatted output")},m(_,m){C(_,e,m);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(e,null);c(e,t),c(e,n),c(n,s),c(n,i),c(n,o),c(o,f)},p(_,m){if(m[0]&4096){u=se(_[12]);let v;for(v=0;v<u.length;v+=1){const h=Sl(_,u,v);p[v]?p[v].p(h,m):(p[v]=Ll(h),p[v].c(),p[v].m(e,t))}for(;v<p.length;v+=1)p[v].d(1);p.length=u.length}m[0]&2&&a!==(a=_[1].response.value.join(`
`)+"")&&O(f,a)},d(_){_&&I(e),Re(p,_)}}}function Ai(l){let e,t=l[47].content+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small plain-text svelte-1t0ixjy")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&4&&t!==(t=s[47].content+"")&&O(n,t)},d(s){s&&I(e)}}}function Ti(l){let e,t,n,s=(l[47].lang||"code")+"",i,o,a,f=l[47].raw+"",u,p;return{c(){e=d("div"),t=d("div"),n=d("span"),i=S(s),o=N(),a=d("pre"),u=S(f),p=N(),r(n,"class","code-label svelte-1t0ixjy"),r(t,"class","code-head svelte-1t0ixjy"),r(a,"class","code-block small svelte-1t0ixjy"),r(e,"class","code-fallback svelte-1t0ixjy")},m(_,m){C(_,e,m),c(e,t),c(t,n),c(n,i),c(e,o),c(e,a),c(a,u),c(e,p)},p(_,m){m[0]&4&&s!==(s=(_[47].lang||"code")+"")&&O(i,s),m[0]&4&&f!==(f=_[47].raw+"")&&O(u,f)},d(_){_&&I(e)}}}function Oi(l){let e,t;function n(o,a){return a[0]&4&&(e=null),e==null&&(e=!!Ht(o[47].raw)),e?Pi:qi}let s=n(l,[-1,-1]),i=s(l);return{c(){i.c(),t=be()},m(o,a){i.m(o,a),C(o,t,a)},p(o,a){s===(s=n(o,a))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&I(t),i.d(o)}}}function qi(l){let e,t,n,s=(l[47].lang||"code")+"",i,o,a,f=l[47].raw+"",u,p;return{c(){e=d("div"),t=d("div"),n=d("span"),i=S(s),o=N(),a=d("pre"),u=S(f),p=N(),r(n,"class","code-label svelte-1t0ixjy"),r(t,"class","code-head svelte-1t0ixjy"),r(a,"class","code-block small svelte-1t0ixjy"),r(e,"class","code-fallback svelte-1t0ixjy")},m(_,m){C(_,e,m),c(e,t),c(t,n),c(n,i),c(e,o),c(e,a),c(a,u),c(e,p)},p(_,m){m[0]&4&&s!==(s=(_[47].lang||"code")+"")&&O(i,s),m[0]&4&&f!==(f=_[47].raw+"")&&O(u,f)},d(_){_&&I(e)}}}function Pi(l){let e,t,n,s,i={ctx:l,current:null,token:null,hasCatch:!1,pending:Hi,then:Mi,catch:Fi,value:50};return Wt(s=Promise.resolve(Ht(l[47].raw)),i),{c(){e=d("script"),e.innerHTML="",t=N(),n=be(),i.block.c(),r(e,"context","module")},m(o,a){C(o,e,a),C(o,t,a),C(o,n,a),i.block.m(o,i.anchor=a),i.mount=()=>n.parentNode,i.anchor=n},p(o,a){l=o,i.ctx=l,a[0]&4&&s!==(s=Promise.resolve(Ht(l[47].raw)))&&Wt(s,i)||os(i,l,a)},d(o){o&&(I(e),I(t),I(n)),i.block.d(o),i.token=null,i=null}}}function Fi(l){return{c:z,m:z,p:z,d:z}}function Mi(l){let e,t,n,s,i,o=l[4][l[46]+"-"+l[49]]?"Pretty":"Raw",a,f,u,p,_,m;function v(){return l[27](l[46],l[49])}function h(b,k){return b[4][b[46]+"-"+b[49]]?Li:Ei}let g=h(l),y=g(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="JSON Block",s=N(),i=d("button"),a=S(o),f=N(),y.c(),p=N(),r(n,"class","json-label svelte-1t0ixjy"),r(i,"type","button"),r(i,"class","mini-btn json-raw-toggle"),r(t,"class","json-head svelte-1t0ixjy"),r(e,"class","json-block svelte-1t0ixjy"),r(e,"data-lang",u=l[47].lang)},m(b,k){C(b,e,k),c(e,t),c(t,n),c(t,s),c(t,i),c(i,a),c(e,f),y.m(e,null),C(b,p,k),_||(m=oe(i,"click",v),_=!0)},p(b,k){l=b,k[0]&16&&o!==(o=l[4][l[46]+"-"+l[49]]?"Pretty":"Raw")&&O(a,o),g===(g=h(l))&&y?y.p(l,k):(y.d(1),y=g(l),y&&(y.c(),y.m(e,null))),k[0]&4&&u!==(u=l[47].lang)&&r(e,"data-lang",u)},d(b){b&&(I(e),I(p)),y.d(),_=!1,m()}}}function Ei(l){let e,t=Kl(l[50])+"",n,s,i=se(Gl(l[50])),o=[];for(let a=0;a<i.length;a+=1)o[a]=Fl(Nl(l,i,a));return{c(){e=d("pre"),n=N();for(let a=0;a<o.length;a+=1)o[a].c();s=be(),r(e,"class","code-block small json-pre svelte-1t0ixjy"),r(e,"aria-label","Pretty JSON")},m(a,f){C(a,e,f),e.innerHTML=t,C(a,n,f);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(a,f);C(a,s,f)},p(a,f){if(f[0]&4&&t!==(t=Kl(a[50])+"")&&(e.innerHTML=t),f[0]&4){i=se(Gl(a[50]));let u;for(u=0;u<i.length;u+=1){const p=Nl(a,i,u);o[u]?o[u].p(p,f):(o[u]=Fl(p),o[u].c(),o[u].m(s.parentNode,s))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(a){a&&(I(e),I(n),I(s)),Re(o,a)}}}function Li(l){let e,t=l[47].raw+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-1t0ixjy")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&4&&t!==(t=s[47].raw+"")&&O(n,t)},d(s){s&&I(e)}}}function Fl(l){let e,t,n,s=l[51].key+"",i,o,a,f,u=l[51].value.split(`
`).length+"",p,_,m,v,h=l[51].value+"",g,y,b;return{c(){e=d("details"),t=d("summary"),n=d("span"),i=S(s),o=N(),a=d("span"),f=S("("),p=S(u),_=S(" lines)"),m=N(),v=d("pre"),g=S(h),b=N(),r(n,"class","snippet-key svelte-1t0ixjy"),r(a,"class","snippet-extra svelte-1t0ixjy"),r(t,"class","svelte-1t0ixjy"),r(v,"class","code-block tiny svelte-1t0ixjy"),r(v,"data-snippet-key",y=l[51].key),r(e,"class","snippet-details svelte-1t0ixjy"),e.open=!0},m(k,w){C(k,e,w),c(e,t),c(t,n),c(n,i),c(t,o),c(t,a),c(a,f),c(a,p),c(a,_),c(e,m),c(e,v),c(v,g),c(e,b)},p(k,w){w[0]&4&&s!==(s=k[51].key+"")&&O(i,s),w[0]&4&&u!==(u=k[51].value.split(`
`).length+"")&&O(p,u),w[0]&4&&h!==(h=k[51].value+"")&&O(g,h),w[0]&4&&y!==(y=k[51].key)&&r(v,"data-snippet-key",y)},d(k){k&&I(e)}}}function Hi(l){return{c:z,m:z,p:z,d:z}}function Ml(l){let e;function t(i,o){if(i[47].type==="code"&&(i[47].lang==="json"||i[47].lang==="javascript"||i[47].lang==="js"))return Oi;if(i[47].type==="code")return Ti;if(i[47].type==="text")return Ai}let n=t(l),s=n&&n(l);return{c(){s&&s.c(),e=be()},m(i,o){s&&s.m(i,o),C(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s&&s.d(1),s=n&&n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&I(e),s&&s.d(i)}}}function El(l){let e,t=se(l[44]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ml(Cl(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=be()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);C(s,e,i)},p(s,i){if(i[0]&20){t=se(s[44]);let o;for(o=0;o<t.length;o+=1){const a=Cl(s,t,o);n[o]?n[o].p(a,i):(n[o]=Ml(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function Ji(l){let e;return{c(){e=d("div"),e.textContent="(No content changes captured)",r(e,"class","patch-empty svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Bi(l){let e,t=Wl(l[41].body)+"",n;return{c(){e=d("pre"),r(e,"class","patch-code svelte-1t0ixjy"),r(e,"aria-label",n=l[41].action+" file diff")},m(s,i){C(s,e,i),e.innerHTML=t},p(s,i){i[0]&4096&&t!==(t=Wl(s[41].body)+"")&&(e.innerHTML=t),i[0]&4096&&n!==(n=s[41].action+" file diff")&&r(e,"aria-label",n)},d(s){s&&I(e)}}}function Di(l){let e;return{c(){e=d("div"),e.textContent="File deleted",r(e,"class","patch-deleted-note svelte-1t0ixjy")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Ll(l){let e,t,n,s=l[41].action+"",i,o,a,f,u=l[41].filePath+"",p,_,m,v;function h(b,k){return b[41].action==="Delete"?Di:b[41].body?Bi:Ji}let g=h(l),y=g(l);return{c(){e=d("div"),t=d("div"),n=d("span"),i=S(s),a=N(),f=d("span"),p=S(u),m=N(),y.c(),r(n,"class",o="patch-action tag-"+l[41].action.toLowerCase()+" svelte-1t0ixjy"),r(f,"class","patch-path svelte-1t0ixjy"),r(f,"title",_=l[41].filePath),r(t,"class","patch-head svelte-1t0ixjy"),r(e,"class","patch-file svelte-1t0ixjy"),r(e,"data-action",v=l[41].action),r(e,"data-idx",l[43])},m(b,k){C(b,e,k),c(e,t),c(t,n),c(n,i),c(t,a),c(t,f),c(f,p),c(e,m),y.m(e,null)},p(b,k){k[0]&4096&&s!==(s=b[41].action+"")&&O(i,s),k[0]&4096&&o!==(o="patch-action tag-"+b[41].action.toLowerCase()+" svelte-1t0ixjy")&&r(n,"class",o),k[0]&4096&&u!==(u=b[41].filePath+"")&&O(p,u),k[0]&4096&&_!==(_=b[41].filePath)&&r(f,"title",_),g===(g=h(b))&&y?y.p(b,k):(y.d(1),y=g(b),y&&(y.c(),y.m(e,null))),k[0]&4096&&v!==(v=b[41].action)&&r(e,"data-action",v)},d(b){b&&I(e),y.d()}}}function Hl(l){let e,t,n,s,i,o,a,f=l[34].length+"",u,p,_,m,v,h=se(l[34]),g=[];for(let b=0;b<h.length;b+=1)g[b]=zl(wl(l,h,b));const y=b=>we(g[b],1,1,()=>{g[b]=null});return{c(){e=d("section"),t=d("details"),n=d("summary"),s=d("span"),i=d("h3"),o=S("Tool Calls "),a=d("span"),u=S(f),p=N(),_=d("div"),m=d("div");for(let b=0;b<g.length;b+=1)g[b].c();r(s,"class","caret svelte-1t0ixjy"),r(a,"class","count-badge svelte-1t0ixjy"),r(i,"class","svelte-1t0ixjy"),r(n,"class","svelte-1t0ixjy"),r(m,"class","scroll-area calls-scroll svelte-1t0ixjy"),r(m,"role","region"),r(m,"aria-label","Tool calls within response (each in its own section)"),r(_,"class","collapsible-body svelte-1t0ixjy"),r(t,"class","collapsible svelte-1t0ixjy"),t.open=!0,r(t,"data-role","response-calls"),r(t,"aria-label","Response tool calls group"),r(e,"class","group response-calls-group svelte-1t0ixjy")},m(b,k){C(b,e,k),c(e,t),c(t,n),c(n,s),c(n,i),c(i,o),c(i,a),c(a,u),c(t,p),c(t,_),c(_,m);for(let w=0;w<g.length;w+=1)g[w]&&g[w].m(m,null);l[31](m),v=!0},p(b,k){if((!v||k[0]&2)&&f!==(f=b[34].length+"")&&O(u,f),k[0]&844171){h=se(b[34]);let w;for(w=0;w<h.length;w+=1){const F=wl(b,h,w);g[w]?(g[w].p(F,k),me(g[w],1)):(g[w]=zl(F),g[w].c(),me(g[w],1),g[w].m(m,null))}for($e(),w=h.length;w<g.length;w+=1)y(w);ze()}},i(b){if(!v){for(let k=0;k<h.length;k+=1)me(g[k]);v=!0}},o(b){g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)we(g[k]);v=!1},d(b){b&&I(e),Re(g,b),l[31](null)}}}function Jl(l){let e;return{c(){e=d("span"),e.textContent="INFERRED",r(e,"class","infer-badge svelte-1t0ixjy"),r(e,"title","Inferred tool name")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function Bl(l){let e;return{c(){e=d("span"),e.textContent="Active",r(e,"class","selected-badge svelte-1t0ixjy")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function Dl(l){let e;function t(o,a){var f;return(f=o[13][o[35].id||o[35].tool_call_id||o[35].toolCallId||"idx_"+o[37]])!=null&&f.text?Ul:Ui}function n(o,a){return a===Ul?mi(o):o}let s=t(l),i=s(n(l,s));return{c(){i.c(),e=be()},m(o,a){i.m(o,a),C(o,e,a)},p(o,a){s===(s=t(o))&&i?i.p(n(o,s),a):(i.d(1),i=s(n(o,s)),i&&(i.c(),i.m(e.parentNode,e)))},d(o){o&&I(e),i.d(o)}}}function Ui(l){let e;return{c(){e=d("div"),e.innerHTML='<em class="text-soft">No result output located for this call id</em>',r(e,"class","tool-result-block empty svelte-1t0ixjy"),r(e,"id","resp-fnresult-"+l[37]),r(e,"aria-label","Tool call result output missing")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Ul(l){let e;function t(i,o){return i[7][i[35].id||i[35].tool_call_id||i[35].toolCallId||"idx_"+i[37]]!==!1?zi:$i}let n=t(l),s=n(l);return{c(){s.c(),e=be()},m(i,o){s.m(i,o),C(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&I(e),s.d(i)}}}function $i(l){let e,t,n,s,i,o,a;function f(){return l[30](l[35],l[37])}return{c(){e=d("div"),t=d("div"),n=d("div"),n.textContent="Result (hidden)",s=N(),i=d("button"),i.textContent="Show",r(n,"class","tool-result-head svelte-1t0ixjy"),r(i,"class","result-toggle svelte-1t0ixjy"),r(i,"type","button"),r(t,"class","tool-result-head-row svelte-1t0ixjy"),r(e,"class","tool-result-block collapsed svelte-1t0ixjy"),r(e,"id","resp-fnresult-"+l[37]),r(e,"aria-label","Tool call result output hidden")},m(u,p){C(u,e,p),c(e,t),c(t,n),c(t,s),c(t,i),o||(a=oe(i,"click",f),o=!0)},p(u,p){l=u},d(u){u&&I(e),o=!1,a()}}}function zi(l){let e,t,n,s,i,o,a,f,u,p=l[39]&&$l(l);function _(){return l[29](l[35],l[37])}function m(g,y){return g[39]&&(g[8][g[40]]||"rendered")==="rendered"?Wi:Vi}let v=m(l),h=v(l);return{c(){e=d("div"),t=d("div"),n=d("div"),n.textContent="Result",s=N(),p&&p.c(),i=N(),o=d("button"),o.textContent="Hide",a=N(),h.c(),r(n,"class","tool-result-head svelte-1t0ixjy"),r(o,"class","result-toggle svelte-1t0ixjy"),r(o,"type","button"),r(t,"class","tool-result-head-row svelte-1t0ixjy"),r(e,"class","tool-result-block open svelte-1t0ixjy"),r(e,"id","resp-fnresult-"+l[37]),r(e,"aria-label","Tool call result output")},m(g,y){C(g,e,y),c(e,t),c(t,n),c(t,s),p&&p.m(t,null),c(t,i),c(t,o),c(e,a),h.m(e,null),f||(u=oe(o,"click",_),f=!0)},p(g,y){l=g,l[39]?p?p.p(l,y):(p=$l(l),p.c(),p.m(t,i)):p&&(p.d(1),p=null),v===(v=m(l))&&h?h.p(l,y):(h.d(1),h=v(l),h&&(h.c(),h.m(e,null)))},d(g){g&&I(e),p&&p.d(),h.d(),f=!1,u()}}}function $l(l){let e,t=(l[8][l[40]]||"rendered")==="rendered"?"Raw":"Rendered",n,s,i;function o(){return l[28](l[40])}return{c(){e=d("button"),n=S(t),r(e,"class","result-toggle svelte-1t0ixjy"),r(e,"type","button")},m(a,f){C(a,e,f),c(e,n),s||(i=oe(e,"click",o),s=!0)},p(a,f){l=a,f[0]&258&&t!==(t=(l[8][l[40]]||"rendered")==="rendered"?"Raw":"Rendered")&&O(n,t)},d(a){a&&I(e),s=!1,i()}}}function Vi(l){let e,t=l[38]+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-1t0ixjy")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&8194&&t!==(t=s[38]+"")&&O(n,t)},d(s){s&&I(e)}}}function Wi(l){let e,t=l[39]+"";return{c(){e=d("div"),r(e,"class","diff-wrapper"),r(e,"aria-label","Tool result rendered view")},m(n,s){C(n,e,s),e.innerHTML=t},p(n,s){s[0]&8194&&t!==(t=n[39]+"")&&(e.innerHTML=t)},d(n){n&&I(e)}}}function zl(l){var E,L;let e,t,n,s,i,o,a,f=l[37]+1+"",u,p,_=l[14](l[35])+"",m,v,h=l[3]&&((L=(E=l[35].name)==null?void 0:E.toLowerCase)==null?void 0:L.call(E))==="none"||l[14](l[35])==="patch_file",g,y,b,k,w,F,q,M,j,A,R=h&&Jl(),T=l[0].callIndex===l[37]&&Bl();k=new _i({props:{call:l[35]}});let P=(l[35].id||l[35].tool_call_id||l[35].toolCallId||!0)&&Dl(l);return{c(){e=d("details"),t=d("summary"),n=d("span"),s=N(),i=d("div"),o=d("h5"),a=S("Call "),u=S(f),p=S(": "),m=S(_),v=N(),R&&R.c(),g=N(),T&&T.c(),y=N(),b=d("div"),Ue(k.$$.fragment),w=N(),P&&P.c(),F=N(),r(n,"class","mini-caret svelte-1t0ixjy"),r(o,"class","no-transform svelte-1t0ixjy"),r(i,"class","tool-title-area svelte-1t0ixjy"),r(t,"class","toolcall-head svelte-1t0ixjy"),r(t,"id","resp-fnhead-"+l[37]),r(b,"class","prompt-body svelte-1t0ixjy"),r(e,"class",q="prompt-collapsible toolcall-section "+(l[0].callIndex===l[37]?"active":"")+" svelte-1t0ixjy"),r(e,"id","resp-fncall-"+l[37]),r(e,"data-call-id",M=l[35].id||l[35].tool_call_id||l[35].toolCallId||"idx_"+l[37]),e.open=j=l[0].callIndex===l[37]},m(H,te){C(H,e,te),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(o,a),c(o,u),c(o,p),c(o,m),c(o,v),R&&R.m(o,null),c(i,g),T&&T.m(i,null),c(e,y),c(e,b),Le(k,b,null),c(b,w),P&&P.m(b,null),c(e,F),A=!0},p(H,te){var re,ae;(!A||te[0]&2)&&_!==(_=H[14](H[35])+"")&&O(m,_),te[0]&10&&(h=H[3]&&((ae=(re=H[35].name)==null?void 0:re.toLowerCase)==null?void 0:ae.call(re))==="none"||H[14](H[35])==="patch_file"),h?R||(R=Jl(),R.c(),R.m(o,null)):R&&(R.d(1),R=null),H[0].callIndex===H[37]?T||(T=Bl(),T.c(),T.m(i,null)):T&&(T.d(1),T=null);const ie={};te[0]&2&&(ie.call=H[35]),k.$set(ie),H[35].id||H[35].tool_call_id||H[35].toolCallId,P?P.p(H,te):(P=Dl(H),P.c(),P.m(b,null)),(!A||te[0]&1&&q!==(q="prompt-collapsible toolcall-section "+(H[0].callIndex===H[37]?"active":"")+" svelte-1t0ixjy"))&&r(e,"class",q),(!A||te[0]&2&&M!==(M=H[35].id||H[35].tool_call_id||H[35].toolCallId||"idx_"+H[37]))&&r(e,"data-call-id",M),(!A||te[0]&1&&j!==(j=H[0].callIndex===H[37]))&&(e.open=j)},i(H){A||(me(k.$$.fragment,H),A=!0)},o(H){we(k.$$.fragment,H),A=!1},d(H){H&&I(e),R&&R.d(),T&&T.d(),He(k),P&&P.d()}}}function Vl(l){let e,t,n,s,i,o,a=JSON.stringify(l[1].response.usage,null,2)+"",f;return{c(){e=d("section"),t=d("details"),n=d("summary"),n.innerHTML='<span class="caret svelte-1t0ixjy"></span><h3 class="svelte-1t0ixjy">Usage Statistics</h3>',s=N(),i=d("div"),o=d("pre"),f=S(a),r(n,"class","svelte-1t0ixjy"),r(o,"class","code-block svelte-1t0ixjy"),r(i,"class","collapsible-body svelte-1t0ixjy"),r(t,"class","collapsible svelte-1t0ixjy"),r(t,"data-role","usage"),r(t,"aria-label","Usage statistics group"),r(e,"class","group usage-group svelte-1t0ixjy")},m(u,p){C(u,e,p),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(o,f)},p(u,p){p[0]&2&&a!==(a=JSON.stringify(u[1].response.usage,null,2)+"")&&O(f,a)},d(u){u&&I(e)}}}function Ki(l){let e,t,n,s,i,o;const a=[hi,vi],f=[];function u(p,_){var m;return(m=p[1])!=null&&m.response?0:1}return s=u(l),i=f[s]=a[s](l),{c(){e=d("section"),t=d("header"),t.innerHTML='<h2 class="svelte-1t0ixjy">Response Detail</h2> <div class="section-meta svelte-1t0ixjy"><span class="section-info svelte-1t0ixjy">AI Response, Tool Calls &amp; Usage</span></div>',n=N(),i.c(),r(t,"class","section-header svelte-1t0ixjy"),r(e,"class","main-section response-section svelte-1t0ixjy")},m(p,_){C(p,e,_),c(e,t),c(e,n),f[s].m(e,null),o=!0},p(p,_){let m=s;s=u(p),s===m?f[s].p(p,_):($e(),we(f[m],1,1,()=>{f[m]=null}),ze(),i=f[s],i?i.p(p,_):(i=f[s]=a[s](p),i.c()),me(i,1),i.m(e,null))},i(p){o||(me(i),o=!0)},o(p){we(i),o=!1},d(p){p&&I(e),f[s].d()}}}function Lt(l){return typeof l=="string"&&/\*\*\* Begin Patch[\s\S]*\*\*\* End Patch/.test(l)}function Gi(l){if(!Lt(l))return"";const e=l.match(/\*\*\* Begin Patch[\s\S]*?\*\*\* End Patch/);return e?e[0]:""}function Yi(l){if(!l)return[];const e=l.indexOf("*** Begin Patch"),t=l.indexOf("*** End Patch");e!==-1&&t!==-1&&(l=l.slice(e+15,t).trim());const n=l.split(/\r?\n/),s=/^\*\*\* (Update|Add|Delete) File: (.+)$/,i=[];let o=null;for(const a of n){const f=a.match(s);f?(o&&i.push(o),o={action:f[1],filePath:f[2].trim(),body:[]}):o&&o.body.push(a)}return o&&i.push(o),i.map(a=>({...a,body:a.body.join(`
`).replace(/^[\n\r]+|[\n\r]+$/g,"")}))}function Qi(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Wl(l){return l?l.split(/\n/).map(e=>{const t=Qi(e)||"&nbsp;";let n="ctx";return e.startsWith("+")?n="add":e.startsWith("-")?n="del":e.startsWith("@@")&&(n="hunk"),`<span class="pl ${n}">${t}</span>`}).join(`
`):""}function Xi(l){var e;return(l==null?void 0:l.name)||((e=l==null?void 0:l.function)==null?void 0:e.name)||""}function Zi(l){if(typeof l!="string")return[{type:"text",content:l}];const e=/```(\w+)?\n([\s\S]*?)```/g,t=[];let n=0,s;for(;(s=e.exec(l))!==null;){if(s.index>n){const i=l.slice(n,s.index);i.trim().length&&t.push({type:"text",content:i})}t.push({type:"code",lang:(s[1]||"").toLowerCase(),raw:s[2]}),n=s.index+s[0].length}if(n<l.length){const i=l.slice(n);i.trim().length&&t.push({type:"text",content:i})}return t.length?t:[{type:"text",content:l}]}function Ht(l){try{return JSON.parse(l)}catch{return null}}function ft(l){return l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Kl(l){const e=typeof l=="string"?l:JSON.stringify(l,null,2);return ft(e).replace(/^(\s*)("[^"]+"?)(:)?(.*)$/gm,(t,n,s,i,o)=>{let a=n||"";if(/^".*"$/.test(s)&&i?a+=`<span class="j-key">${ft(s)}</span>${i}`:a+=`<span class="j-lit">${ft(s+(i||""))}</span>`,o){const u=o.trim();let p="j-lit";/^".*"[,]?$/.test(u)?p="j-str":/^(true|false|null)[,]?$/.test(u)?p="j-bool":/^-?\d+(\.\d+)?([eE][+-]?\d+)?[,]?$/.test(u)?p="j-num":(/^[\[{]$/.test(u)||/^[\]}][,]?$/.test(u))&&(p="j-brkt"),a+=` <span class="${p}">${ft(o)}</span>`}return a})}function Gl(l){if(!l||typeof l!="object")return[];const e=[];for(const[t,n]of Object.entries(l))if(typeof n=="string"&&/\n/.test(n)){let s=n;const i=(s.match(/\\n/g)||[]).length;i&&i>(s.match(/\n/g)||[]).length&&(s=s.replace(/\\n/g,`
`)),s=s.replace(/^\uFEFF/,""),e.push({key:t,value:s})}return e}function xi(l){return l?l.scrollHeight-l.clientHeight>2:!1}function eo(l,e,t){return Number.isFinite(l)?Math.min(t,Math.max(e,l)):e}function to(){return new Promise(l=>requestAnimationFrame(()=>l()))}function lo(l,e,{align:t="top",offset:n=8}={}){if(!l||!e)return!1;const s=l.getBoundingClientRect(),i=e.getBoundingClientRect();let o=l.scrollTop+(i.top-s.top)-n;if(t==="center"){const a=l.clientHeight/2-i.height/2;o=l.scrollTop+(i.top-s.top)-a}if(Number.isFinite(o)){const a=Math.max(0,l.scrollHeight-l.clientHeight);return o=eo(o,0,a),l.scrollTop=o,requestAnimationFrame(()=>{l.scrollTop=o}),!0}return!1}function no(l,e,t){let n,s,i,o,a,f,u;Se(l,gs,J=>t(13,u=J));let{current:p}=e,{req:_}=e;function m(J){var fe;if(!J)return"";const X=J.name||((fe=J.function)==null?void 0:fe.name);return(!X||X.toLowerCase()==="none")&&n?"analyze_files_and_patterns":(!X||X.toLowerCase()==="none")&&s&&s.length&&Lt(s[0])?"patch_file":X||"None"}function v(J,X){const fe=Xi(J);if(!X||typeof X!="string")return null;if(fe==="replace_string_in_file"){const ee=fs(X);if(ee)return Et(ee)}if(fe==="multi_replace_string_in_file"){const ee=us(X);if(ee)return Ft(ee)}if(fe==="manage_todo_list"){const ee=ds(X);if(ee)return Mt(ee)}return null}let h={},g=!1,y={},b={};async function k(J,X){if(X)try{await navigator.clipboard.writeText(X),t(6,y={...y,[J]:!0}),clearTimeout(b[J]),b[J]=setTimeout(()=>{t(6,y={...y,[J]:!1})},1400)}catch(fe){console.warn("Failed to copy metadata",J,fe)}}async function w(){if(!f)return;const J=JSON.stringify(f,null,2);try{await navigator.clipboard.writeText(J)}catch{}}let F={};function q(J){const X=F[J]!==!1;t(7,F={...F,[J]:!X})}let M={};function j(J){const X=M[J]||"rendered";t(8,M={...M,[J]:X==="rendered"?"raw":"rendered"})}let A,R;async function T(){var $;const J=p==null?void 0:p.callIndex;if(J==null)return;await pt();const X=document.getElementById(`resp-fncall-${J}`),fe=document.getElementById(`resp-fnresult-${J}`),W=document.getElementById(`resp-fnhead-${J}`)||(($=X==null?void 0:X.querySelector)==null?void 0:$.call(X,".toolcall-head"))||fe||X;if(!W)return;const _e=()=>R&&xi(R)?lo(R,W,{align:"center"}):!1;_e()||W.scrollIntoView({behavior:"auto",block:"center"}),await to(),await pt(),_e()||W.scrollIntoView({behavior:"auto",block:"center"})}const P=()=>k("type",f.type),E=()=>k("reason",f.reason),L=()=>k("requestId",f.requestId),H=()=>k("serverRequestId",f.serverRequestId),te=()=>t(5,g=!g),ie=(J,X)=>t(4,h[J+"-"+X]=!h[J+"-"+X],h),re=J=>j(J),ae=(J,X)=>q(J.id||J.tool_call_id||J.toolCallId||"idx_"+X),U=(J,X)=>q(J.id||J.tool_call_id||J.toolCallId||"idx_"+X);function ke(J){Je[J?"unshift":"push"](()=>{R=J,t(9,R)})}return l.$$set=J=>{"current"in J&&t(0,p=J.current),"req"in J&&t(1,_=J.req)},l.$$.update=()=>{var J,X,fe;if(l.$$.dirty[0]&2&&t(3,n=_!=null&&_.requestMessages?_.requestMessages.some(ee=>ee.role==="system"&&Array.isArray(ee.content)&&ee.content.some(W=>((W==null?void 0:W.text)||W)==="You are an expert at analyzing files and patterns.")):!1),l.$$.dirty[0]&2&&t(21,s=((J=_==null?void 0:_.response)==null?void 0:J.value)||[]),l.$$.dirty[0]&2097160&&t(12,i=n?s.filter(ee=>Lt(ee)).flatMap(ee=>Yi(Gi(ee))):[]),l.$$.dirty[0]&2097160&&t(2,o=n?s.map(ee=>Zi(ee)):[]),l.$$.dirty[0]&12&&t(11,a=n&&o.some(ee=>ee.some(W=>W.type==="code"))),l.$$.dirty[0]&2&&t(10,f=_!=null&&_.response?{type:_.response.type,reason:_.response.reason,requestId:_.response.requestId,serverRequestId:_.response.serverRequestId}:null),l.$$.dirty[0]&1048579&&_!=null&&_.response&&((X=_.response.copilotFunctionCalls)!=null&&X.length||(fe=_.response.toolCalls)!=null&&fe.length)){const ee=`${_.response.requestId||_.response.serverRequestId||""}:${p==null?void 0:p.callIndex}`;ee!==A&&(t(20,A=ee),T())}},[p,_,o,n,h,g,y,F,M,R,f,a,i,u,m,v,k,w,q,j,A,s,P,E,L,H,te,ie,re,ae,U,ke]}class so extends We{constructor(e){super(),Ve(this,e,no,Ki,Me,{current:0,req:1},null,[-1,-1])}}function Yl(l,e,t){const n=l.slice();return n[7]=e[t].call,n[8]=e[t].index,n}function Ql(l){let e,t,n,s,i,o,a=l[1]&&Xl(l),f=se(l[0]),u=[];for(let p=0;p<f.length;p+=1)u[p]=tn(Yl(l,f,p));return{c(){e=d("section"),t=d("div"),n=d("h3"),n.textContent="Current Agent Tool Calls",s=N(),a&&a.c(),i=N(),o=d("div");for(let p=0;p<u.length;p+=1)u[p].c();r(n,"class","svelte-84jo8"),r(t,"class","section-header svelte-84jo8"),r(o,"class","toolcalls-container svelte-84jo8"),r(e,"class","agent-toolcalls-section svelte-84jo8")},m(p,_){C(p,e,_),c(e,t),c(t,n),c(t,s),a&&a.m(t,null),c(e,i),c(e,o);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(o,null)},p(p,_){if(p[1]?a?a.p(p,_):(a=Xl(p),a.c(),a.m(t,null)):a&&(a.d(1),a=null),_&5){f=se(p[0]);let m;for(m=0;m<f.length;m+=1){const v=Yl(p,f,m);u[m]?u[m].p(v,_):(u[m]=tn(v),u[m].c(),u[m].m(o,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=f.length}},d(p){p&&I(e),a&&a.d(),Re(u,p)}}}function Xl(l){let e,t;return{c(){e=d("span"),t=S(l[1]),r(e,"class","agent-badge svelte-84jo8")},m(n,s){C(n,e,s),c(e,t)},p(n,s){s&2&&O(t,n[1])},d(n){n&&I(e)}}}function Zl(l){let e;return{c(){e=d("span"),e.textContent="‚àë",r(e,"class","infer-badge svelte-84jo8"),r(e,"title","Inferred tool name")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function xl(l){let e;return{c(){e=d("span"),e.textContent="üìã",r(e,"class","summary-emoji svelte-84jo8"),r(e,"title","Conversation summary")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function en(l){let e;return{c(){e=d("span"),e.textContent="‚ö†Ô∏è",r(e,"class","fail-emoji svelte-84jo8"),r(e,"title","Failed response")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function tn(l){var F,q;let e,t,n=l[8]+1+"",s,i,o,a=ln(l[7])+"",f,u,p,_,m,v,h,g,y=l[7].inferred&&Zl(),b=l[7].conversationSummary&&xl(),k=((q=(F=l[7].request)==null?void 0:F.response)==null?void 0:q.type)==="failed"&&en();function w(){return l[6](l[8])}return{c(){e=d("button"),t=d("span"),s=S(n),i=N(),o=d("span"),f=S(a),u=N(),y&&y.c(),p=N(),b&&b.c(),_=N(),k&&k.c(),m=N(),r(t,"class","chip-num svelte-84jo8"),r(o,"class","chip-name svelte-84jo8"),r(e,"class","toolcall-chip svelte-84jo8"),Ae(e,"--chip-color",l[7].color),r(e,"aria-label",v="Tool call "+(l[7].name||"None")),Te(e,"selected",l[2].callIndex===l[8])},m(M,j){C(M,e,j),c(e,t),c(t,s),c(e,i),c(e,o),c(o,f),c(e,u),y&&y.m(e,null),c(e,p),b&&b.m(e,null),c(e,_),k&&k.m(e,null),c(e,m),h||(g=oe(e,"click",w),h=!0)},p(M,j){var A,R;l=M,j&1&&n!==(n=l[8]+1+"")&&O(s,n),j&1&&a!==(a=ln(l[7])+"")&&O(f,a),l[7].inferred?y||(y=Zl(),y.c(),y.m(e,p)):y&&(y.d(1),y=null),l[7].conversationSummary?b||(b=xl(),b.c(),b.m(e,_)):b&&(b.d(1),b=null),((R=(A=l[7].request)==null?void 0:A.response)==null?void 0:R.type)==="failed"?k||(k=en(),k.c(),k.m(e,m)):k&&(k.d(1),k=null),j&1&&Ae(e,"--chip-color",l[7].color),j&1&&v!==(v="Tool call "+(l[7].name||"None"))&&r(e,"aria-label",v),j&5&&Te(e,"selected",l[2].callIndex===l[8])},d(M){M&&I(e),y&&y.d(),b&&b.d(),k&&k.d(),h=!1,g()}}}function io(l){let e,t=l[0].length>0&&Ql(l);return{c(){t&&t.c(),e=be()},m(n,s){t&&t.m(n,s),C(n,e,s)},p(n,[s]){n[0].length>0?t?t.p(n,s):(t=Ql(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:z,o:z,d(n){n&&I(e),t&&t.d(n)}}}function ln(l){return l.conversationSummary?"conversation_summary":l.synthetic&&l.name?l.name:l.name||"None"}function oo(l,e,t){let n,s,i,o,a,f;Se(l,mt,p=>t(3,i=p)),Se(l,Be,p=>t(4,o=p)),Se(l,ct,p=>t(5,a=p)),Se(l,qe,p=>t(2,f=p));const u=p=>vt(p);return l.$$.update=()=>{l.$$.dirty&56&&t(0,n=a!=="new-agent"||i.startIdx===-1||i.endIdx===-1?[]:o.map((p,_)=>({call:p,index:_})).filter(({call:p})=>typeof p.requestIndex=="number"&&p.requestIndex>=i.startIdx&&p.requestIndex<=i.endIdx)),l.$$.dirty&9&&t(1,s=(()=>{var _,m;if(i.startIdx===-1||n.length===0)return null;const p=(_=n[0])==null?void 0:_.call;return((m=p==null?void 0:p.request)==null?void 0:m.name)||null})())},[n,s,f,i,o,a,u]}class ro extends We{constructor(e){super(),Ve(this,e,oo,io,Me,{})}}const{Map:ao}=es;function nn(l,e,t){const n=l.slice();return n[38]=e[t][0],n[39]=e[t][1],n}function sn(l,e,t){const n=l.slice();return n[42]=e[t],n[44]=t,n}function on(l,e,t){const n=l.slice();return n[45]=e[t],n[47]=t,n}function rn(l,e,t){const n=l.slice();return n[48]=e[t],n[44]=t,n}function an(l,e,t){const n=l.slice();return n[50]=e[t],n}function cn(l,e,t){const n=l.slice();return n[53]=e[t],n}function fn(l,e,t){const n=l.slice();return n[48]=e[t],n[44]=t,n}function un(l,e,t){const n=l.slice();return n[50]=e[t],n}function dn(l,e,t){const n=l.slice();return n[53]=e[t],n}function co(l){var pe,ve,K,ue;let e,t,n,s,i,o=(((pe=l[0])==null?void 0:pe.name)||"default agent")+"",a,f,u=l[1]&&l[1].trim(),p,_,m,v,h=(((K=(ve=l[0])==null?void 0:ve.response)==null?void 0:K.requestId)||"N/A")+"",g,y,b,k,w=(((ue=l[0])==null?void 0:ue.model)||"Unknown")+"",F,q,M,j,A,R,T,P,E,L,H,te,ie,re,ae,U,ke,J,X,fe,ee,W,_e,$,ce,Ie,ye,D=u&&pn(l);function V(G,ge){return G[4]?vo:G[3]?mo:_o}let Oe=V(l),Ce=Oe(l),le=l[17].length&&_n(l),Y=l[16].length&&bn(l),x=l[12].length&&wn(l),B=l[14].length&&Cn(l);function ne(G,ge){var he;return(he=G[0])!=null&&he.requestOptions?nr:lr}let je=ne(l),de=je(l),Z=l[19]==="new-agent"&&qn();return $=new so({props:{current:l[2],req:l[0]}}),{c(){e=d("div"),t=d("header"),n=d("div"),s=d("span"),i=S("Agent: "),a=S(o),f=N(),D&&D.c(),p=N(),_=d("div"),m=d("span"),v=S("Request ID: "),g=S(h),y=N(),b=d("span"),k=S("Model: "),F=S(w),q=N(),M=d("div"),j=d("button"),Ce.c(),T=N(),P=d("section"),E=d("header"),E.innerHTML='<h2 class="svelte-173f7ix">Request Detail</h2> <div class="section-meta svelte-173f7ix"><span class="section-info svelte-173f7ix">Messages, Tools &amp; Options</span></div>',L=N(),le&&le.c(),H=N(),Y&&Y.c(),te=N(),x&&x.c(),ie=N(),re=d("section"),ae=d("details"),U=d("summary"),ke=d("span"),J=d("h3"),X=S("Request Options "),B&&B.c(),fe=N(),ee=d("div"),de.c(),W=N(),Z&&Z.c(),_e=N(),Ue($.$$.fragment),r(s,"class","agent-info svelte-173f7ix"),r(m,"class","rid svelte-173f7ix"),r(b,"class","model-info svelte-173f7ix"),r(_,"class","hdr-subline svelte-173f7ix"),r(n,"class","hdr-left svelte-173f7ix"),r(j,"class","copy-raw-btn svelte-173f7ix"),r(j,"aria-label","Copy raw request and response"),j.disabled=A=!l[0],r(M,"class","actions svelte-173f7ix"),r(t,"class",R="hdr "+(l[18]?"compact":"")+" svelte-173f7ix"),r(E,"class","section-header svelte-173f7ix"),r(ke,"class","caret svelte-173f7ix"),r(J,"class","svelte-173f7ix"),r(U,"class","svelte-173f7ix"),r(ee,"class","collapsible-body svelte-173f7ix"),r(ae,"class","collapsible svelte-173f7ix"),r(ae,"data-role","options"),r(ae,"aria-label","Request options group"),r(re,"class","group options-group svelte-173f7ix"),r(P,"class","main-section request-section svelte-173f7ix"),r(e,"class","panel detail-panel svelte-173f7ix")},m(G,ge){C(G,e,ge),c(e,t),c(t,n),c(n,s),c(s,i),c(s,a),c(n,f),D&&D.m(n,null),c(n,p),c(n,_),c(_,m),c(m,v),c(m,g),c(_,y),c(_,b),c(b,k),c(b,F),c(t,q),c(t,M),c(M,j),Ce.m(j,null),c(e,T),c(e,P),c(P,E),c(P,L),le&&le.m(P,null),c(P,H),Y&&Y.m(P,null),c(P,te),x&&x.m(P,null),c(P,ie),c(P,re),c(re,ae),c(ae,U),c(U,ke),c(U,J),c(J,X),B&&B.m(J,null),c(ae,fe),c(ae,ee),de.m(ee,null),c(e,W),Z&&Z.m(e,null),c(e,_e),Le($,e,null),ce=!0,Ie||(ye=oe(j,"click",l[20]),Ie=!0)},p(G,ge){var Q,Ne,Ye,st;(!ce||ge[0]&1)&&o!==(o=(((Q=G[0])==null?void 0:Q.name)||"default agent")+"")&&O(a,o),ge[0]&2&&(u=G[1]&&G[1].trim()),u?D?D.p(G,ge):(D=pn(G),D.c(),D.m(n,p)):D&&(D.d(1),D=null),(!ce||ge[0]&1)&&h!==(h=(((Ye=(Ne=G[0])==null?void 0:Ne.response)==null?void 0:Ye.requestId)||"N/A")+"")&&O(g,h),(!ce||ge[0]&1)&&w!==(w=(((st=G[0])==null?void 0:st.model)||"Unknown")+"")&&O(F,w),Oe!==(Oe=V(G))&&(Ce.d(1),Ce=Oe(G),Ce&&(Ce.c(),Ce.m(j,null))),(!ce||ge[0]&1&&A!==(A=!G[0]))&&(j.disabled=A),(!ce||ge[0]&262144&&R!==(R="hdr "+(G[18]?"compact":"")+" svelte-173f7ix"))&&r(t,"class",R),G[17].length?le?le.p(G,ge):(le=_n(G),le.c(),le.m(P,H)):le&&(le.d(1),le=null),G[16].length?Y?Y.p(G,ge):(Y=bn(G),Y.c(),Y.m(P,te)):Y&&(Y.d(1),Y=null),G[12].length?x?x.p(G,ge):(x=wn(G),x.c(),x.m(P,ie)):x&&(x.d(1),x=null),G[14].length?B?B.p(G,ge):(B=Cn(G),B.c(),B.m(J,null)):B&&(B.d(1),B=null),je===(je=ne(G))&&de?de.p(G,ge):(de.d(1),de=je(G),de&&(de.c(),de.m(ee,null))),G[19]==="new-agent"?Z?ge[0]&524288&&me(Z,1):(Z=qn(),Z.c(),me(Z,1),Z.m(e,_e)):Z&&($e(),we(Z,1,1,()=>{Z=null}),ze());const he={};ge[0]&4&&(he.current=G[2]),ge[0]&1&&(he.req=G[0]),$.$set(he)},i(G){ce||(me(Z),me($.$$.fragment,G),ce=!0)},o(G){we(Z),we($.$$.fragment,G),ce=!1},d(G){G&&I(e),D&&D.d(),Ce.d(),le&&le.d(),Y&&Y.d(),x&&x.d(),B&&B.d(),de.d(),Z&&Z.d(),He($),Ie=!1,ye()}}}function fo(l){let e;return{c(){e=d("div"),e.textContent="No selection.",r(e,"class","panel")},m(t,n){C(t,e,n)},p:z,i:z,o:z,d(t){t&&I(e)}}}function pn(l){let e,t,n,s,i,o=l[5]?"Collapse":"Expand",a,f,u,p,_;function m(g,y){return g[5]?po:uo}let v=m(l),h=v(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="Prompt",s=N(),i=d("button"),a=S(o),f=N(),h.c(),r(n,"class","agent-prompt-label svelte-173f7ix"),r(i,"class","raw-toggle-btn prompt-toggle-btn svelte-173f7ix"),r(i,"type","button"),r(t,"class","agent-prompt-head svelte-173f7ix"),r(e,"class","agent-prompt svelte-173f7ix"),r(e,"data-expanded",u=l[5]?"true":"false")},m(g,y){C(g,e,y),c(e,t),c(t,n),c(t,s),c(t,i),c(i,a),c(e,f),h.m(e,null),p||(_=oe(i,"click",l[28]),p=!0)},p(g,y){y[0]&32&&o!==(o=g[5]?"Collapse":"Expand")&&O(a,o),v===(v=m(g))&&h?h.p(g,y):(h.d(1),h=v(g),h&&(h.c(),h.m(e,null))),y[0]&32&&u!==(u=g[5]?"true":"false")&&r(e,"data-expanded",u)},d(g){g&&I(e),h.d(),p=!1,_()}}}function uo(l){let e,t=l[15].preview+"",n;return{c(){e=d("div"),n=S(t),r(e,"class","code-block agent-prompt-body preview svelte-173f7ix"),r(e,"title",l[1])},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&32768&&t!==(t=s[15].preview+"")&&O(n,t),i[0]&2&&r(e,"title",s[1])},d(s){s&&I(e)}}}function po(l){let e,t;return{c(){e=d("pre"),t=S(l[1]),r(e,"class","code-block agent-prompt-body full svelte-173f7ix")},m(n,s){C(n,e,s),c(e,t)},p(n,s){s[0]&2&&O(t,n[1])},d(n){n&&I(e)}}}function _o(l){let e;return{c(){e=d("span"),e.textContent="‚ßâ Copy Raw",r(e,"class","svelte-173f7ix")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function mo(l){let e;return{c(){e=d("span"),e.textContent="‚úì Copied",r(e,"class","svelte-173f7ix")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function vo(l){let e;return{c(){e=d("span"),e.textContent="‚ö†Ô∏è Error",r(e,"class","svelte-173f7ix")},m(t,n){C(t,e,n)},d(t){t&&I(e)}}}function _n(l){let e,t,n,s,i,o,a=l[17].length>1?"s":"",f,u,p,_=l[17].length+"",m,v,h,g=se(l[17]),y=[];for(let b=0;b<g.length;b+=1)y[b]=hn(fn(l,g,b));return{c(){e=d("section"),t=d("details"),n=d("summary"),s=d("span"),i=d("h3"),o=S("System Prompt"),f=S(a),u=N(),p=d("span"),m=S(_),v=N(),h=d("div");for(let b=0;b<y.length;b+=1)y[b].c();r(s,"class","caret svelte-173f7ix"),r(p,"class","count-badge svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(n,"class","svelte-173f7ix"),r(h,"class","collapsible-body svelte-173f7ix"),r(t,"class","collapsible svelte-173f7ix"),r(t,"data-role","system"),r(t,"aria-label","System prompts group"),r(e,"class","group system-group svelte-173f7ix")},m(b,k){C(b,e,k),c(e,t),c(t,n),c(n,s),c(n,i),c(i,o),c(i,f),c(i,u),c(i,p),c(p,m),c(t,v),c(t,h);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(h,null)},p(b,k){if(k[0]&131072&&a!==(a=b[17].length>1?"s":"")&&O(f,a),k[0]&131072&&_!==(_=b[17].length+"")&&O(m,_),k[0]&10619392){g=se(b[17]);let w;for(w=0;w<g.length;w+=1){const F=fn(b,g,w);y[w]?y[w].p(F,k):(y[w]=hn(F),y[w].c(),y[w].m(h,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=g.length}},d(b){b&&I(e),Re(y,b)}}}function ho(l){let e;return{c(){e=d("em"),e.textContent="Empty",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function bo(l){let e,t=se(Array.isArray(l[48].content)?l[48].content:[l[48].content]),n=[];for(let s=0;s<t.length;s+=1)n[s]=vn(un(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=be()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);C(s,e,i)},p(s,i){if(i[0]&131072){t=se(Array.isArray(s[48].content)?s[48].content:[s[48].content]);let o;for(o=0;o<t.length;o+=1){const a=un(s,t,o);n[o]?n[o].p(a,i):(n[o]=vn(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function go(l){let e,t,n,s=l[11]==="sys-"+l[44]?"Copied":"Copy",i,o,a,f=rt(l[48])+"",u,p,_;function m(...v){return l[30](l[44],l[48],...v)}return{c(){e=d("div"),t=d("div"),n=d("button"),i=S(s),o=N(),a=d("pre"),u=S(f),r(n,"class","copy-raw-inline svelte-173f7ix"),r(n,"type","button"),r(t,"class","raw-inline-actions svelte-173f7ix"),r(a,"class","code-block raw-full-inline svelte-173f7ix"),r(e,"class","raw-inline svelte-173f7ix")},m(v,h){C(v,e,h),c(e,t),c(t,n),c(n,i),c(e,o),c(e,a),c(a,u),p||(_=oe(n,"click",m),p=!0)},p(v,h){l=v,h[0]&2048&&s!==(s=l[11]==="sys-"+l[44]?"Copied":"Copy")&&O(i,s),h[0]&131072&&f!==(f=rt(l[48])+"")&&O(u,f)},d(v){v&&I(e),p=!1,_()}}}function ko(l){let e,t=(l[50].text?l[50].text:JSON.stringify(l[50],null,2))+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&131072&&t!==(t=(s[50].text?s[50].text:JSON.stringify(s[50],null,2))+"")&&O(n,t)},d(s){s&&I(e)}}}function yo(l){let e,t=se(gt(typeof l[50]=="string"?l[50]:l[50].text)),n=[];for(let s=0;s<t.length;s+=1)n[s]=mn(dn(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=be()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);C(s,e,i)},p(s,i){if(i[0]&131072){t=se(gt(typeof s[50]=="string"?s[50]:s[50].text));let o;for(o=0;o<t.length;o+=1){const a=dn(s,t,o);n[o]?n[o].p(a,i):(n[o]=mn(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function wo(l){let e,t=l[53].content+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&131072&&t!==(t=s[53].content+"")&&O(n,t)},d(s){s&&I(e)}}}function Io(l){let e,t,n,s,i,o,a,f=l[53].content+"",u,p;return{c(){e=d("div"),t=d("div"),t.innerHTML='Attachments <span class="inline-note svelte-173f7ix">toggle to view</span>',n=N(),s=d("details"),i=d("summary"),i.textContent="Show / Hide Attachments Content",o=N(),a=d("pre"),u=S(f),p=N(),r(t,"class","special-block-header svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(a,"class","code-block special attachments-pre svelte-173f7ix"),r(s,"class","attachments-toggle svelte-173f7ix"),s.open=!0,r(e,"class","special-block attachments-block svelte-173f7ix"),r(e,"aria-label","Attachments")},m(_,m){C(_,e,m),c(e,t),c(e,n),c(e,s),c(s,i),c(s,o),c(s,a),c(a,u),c(e,p)},p(_,m){m[0]&131072&&f!==(f=_[53].content+"")&&O(u,f)},d(_){_&&I(e)}}}function Co(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Apply Patch Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block applypatch-block svelte-173f7ix"),r(e,"aria-label","Apply Patch Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function No(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Output Formatting",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block outputfmt-block svelte-173f7ix"),r(e,"aria-label","Output Formatting")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function So(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Notebook Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block notebook-block svelte-173f7ix"),r(e,"aria-label","Notebook Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function jo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Tool Use Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block tooluse-block svelte-173f7ix"),r(e,"aria-label","Tool Use Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Ro(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block instr-block svelte-173f7ix"),r(e,"aria-label","Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Ao(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="User Request",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block userreq-block svelte-173f7ix"),r(e,"aria-label","User Request")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function To(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Reminder Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block reminder-block svelte-173f7ix"),r(e,"aria-label","Reminder Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Oo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Context",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block ctx-block svelte-173f7ix"),r(e,"aria-label","Context Block")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function qo(l){let e,t,n,s,i=kt(l[53].content)+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Workspace Info",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block ws-block svelte-173f7ix"),r(e,"aria-label","Workspace Info")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=kt(f[53].content)+"")&&O(o,i)},d(f){f&&I(e)}}}function Po(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Environment Info",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block env-block svelte-173f7ix"),r(e,"aria-label","Environment Info")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&131072&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function mn(l){let e;function t(i,o){return i[53].kind==="environment"?Po:i[53].kind==="workspace"?qo:i[53].kind==="context"?Oo:i[53].kind==="reminder"?To:i[53].kind==="userreq"?Ao:i[53].kind==="instructions"?Ro:i[53].kind==="tooluse"?jo:i[53].kind==="notebook"?So:i[53].kind==="outputfmt"?No:i[53].kind==="applypatch"?Co:i[53].kind==="attachments"?Io:wo}let n=t(l),s=n(l);return{c(){s.c(),e=be()},m(i,o){s.m(i,o),C(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&I(e),s.d(i)}}}function vn(l){let e,t;function n(o,a){var f;return a[0]&131072&&(e=null),e==null&&(e=!!(typeof o[50]=="string"||(f=o[50])!=null&&f.text&&Gn.test(o[50].text))),e?yo:ko}let s=n(l,[-1,-1]),i=s(l);return{c(){i.c(),t=be()},m(o,a){i.m(o,a),C(o,t,a)},p(o,a){s===(s=n(o,a))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&I(t),i.d(o)}}}function hn(l){let e,t,n,s,i=(l[17].length>1?l[44]+1:"")+"",o,a,f,u,p,_=l[9][l[44]]?"Show Beautified":"Show Original",m,v,h,g,y,b;function k(...M){return l[29](l[44],...M)}function w(M,j){var A;return M[9][M[44]]?go:(A=M[48].content)!=null&&A.length?bo:ho}let F=w(l),q=F(l);return{c(){e=d("section"),t=d("header"),n=d("h4"),s=S("System Prompt "),o=S(i),a=N(),f=d("span"),f.textContent="system",u=N(),p=d("button"),m=S(_),h=N(),q.c(),g=N(),r(n,"class","svelte-173f7ix"),r(f,"class","role-tag svelte-173f7ix"),r(p,"class","raw-toggle-btn svelte-173f7ix"),r(p,"type","button"),r(p,"data-debug",v=l[9][l[44]]?"open":"closed"),r(t,"class","msg-head svelte-173f7ix"),r(e,"class","msg-section role-system svelte-173f7ix")},m(M,j){C(M,e,j),c(e,t),c(t,n),c(n,s),c(n,o),c(t,a),c(t,f),c(t,u),c(t,p),c(p,m),c(e,h),q.m(e,null),c(e,g),y||(b=oe(p,"click",k),y=!0)},p(M,j){l=M,j[0]&131072&&i!==(i=(l[17].length>1?l[44]+1:"")+"")&&O(o,i),j[0]&512&&_!==(_=l[9][l[44]]?"Show Beautified":"Show Original")&&O(m,_),j[0]&512&&v!==(v=l[9][l[44]]?"open":"closed")&&r(p,"data-debug",v),F===(F=w(l))&&q?q.p(l,j):(q.d(1),q=F(l),q&&(q.c(),q.m(e,g)))},d(M){M&&I(e),q.d(),y=!1,b()}}}function bn(l){let e,t,n,s,i,o,a=l[16].length>1?"s":"",f,u,p,_=l[16].length+"",m,v,h,g=se(l[16]),y=[];for(let b=0;b<g.length;b+=1)y[b]=yn(rn(l,g,b));return{c(){e=d("section"),t=d("details"),n=d("summary"),s=d("span"),i=d("h3"),o=S("User Prompt"),f=S(a),u=N(),p=d("span"),m=S(_),v=N(),h=d("div");for(let b=0;b<y.length;b+=1)y[b].c();r(s,"class","caret svelte-173f7ix"),r(p,"class","count-badge svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(n,"class","svelte-173f7ix"),r(h,"class","collapsible-body user-prompts-wrapper svelte-173f7ix"),r(t,"class","collapsible svelte-173f7ix"),r(t,"data-role","user"),r(t,"aria-label","User prompts group"),r(e,"class","group user-group svelte-173f7ix")},m(b,k){C(b,e,k),c(e,t),c(t,n),c(n,s),c(n,i),c(i,o),c(i,f),c(i,u),c(i,p),c(p,m),c(t,v),c(t,h);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(h,null)},p(b,k){if(k[0]&65536&&a!==(a=b[16].length>1?"s":"")&&O(f,a),k[0]&65536&&_!==(_=b[16].length+"")&&O(m,_),k[0]&12651520){g=se(b[16]);let w;for(w=0;w<g.length;w+=1){const F=rn(b,g,w);y[w]?y[w].p(F,k):(y[w]=yn(F),y[w].c(),y[w].m(h,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=g.length}},d(b){b&&I(e),Re(y,b)}}}function Fo(l){let e;return{c(){e=d("em"),e.textContent="Empty",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Mo(l){let e,t=se(Array.isArray(l[48].content)?l[48].content:[l[48].content]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kn(an(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=be()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);C(s,e,i)},p(s,i){if(i[0]&65536){t=se(Array.isArray(s[48].content)?s[48].content:[s[48].content]);let o;for(o=0;o<t.length;o+=1){const a=an(s,t,o);n[o]?n[o].p(a,i):(n[o]=kn(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function Eo(l){let e,t,n,s=l[11]==="user-"+l[44]?"Copied":"Copy",i,o,a,f=rt(l[48])+"",u,p,_;function m(...v){return l[32](l[44],l[48],...v)}return{c(){e=d("div"),t=d("div"),n=d("button"),i=S(s),o=N(),a=d("pre"),u=S(f),r(n,"class","copy-raw-inline svelte-173f7ix"),r(n,"type","button"),r(t,"class","raw-inline-actions svelte-173f7ix"),r(a,"class","code-block raw-full-inline svelte-173f7ix"),r(e,"class","raw-inline svelte-173f7ix")},m(v,h){C(v,e,h),c(e,t),c(t,n),c(n,i),c(e,o),c(e,a),c(a,u),p||(_=oe(n,"click",m),p=!0)},p(v,h){l=v,h[0]&2048&&s!==(s=l[11]==="user-"+l[44]?"Copied":"Copy")&&O(i,s),h[0]&65536&&f!==(f=rt(l[48])+"")&&O(u,f)},d(v){v&&I(e),p=!1,_()}}}function Lo(l){let e,t=(l[50].text?l[50].text:JSON.stringify(l[50],null,4))+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&65536&&t!==(t=(s[50].text?s[50].text:JSON.stringify(s[50],null,4))+"")&&O(n,t)},d(s){s&&I(e)}}}function Ho(l){let e,t=se(gt(typeof l[50]=="string"?l[50]:l[50].text)),n=[];for(let s=0;s<t.length;s+=1)n[s]=gn(cn(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=be()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);C(s,e,i)},p(s,i){if(i[0]&65536){t=se(gt(typeof s[50]=="string"?s[50]:s[50].text));let o;for(o=0;o<t.length;o+=1){const a=cn(s,t,o);n[o]?n[o].p(a,i):(n[o]=gn(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function Jo(l){let e,t=l[53].content+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&65536&&t!==(t=s[53].content+"")&&O(n,t)},d(s){s&&I(e)}}}function Bo(l){let e,t,n,s,i,o,a,f=l[53].content+"",u,p;return{c(){e=d("div"),t=d("div"),t.innerHTML='Attachments <span class="inline-note svelte-173f7ix">toggle to view</span>',n=N(),s=d("details"),i=d("summary"),i.textContent="Show / Hide Attachments Content",o=N(),a=d("pre"),u=S(f),p=N(),r(t,"class","special-block-header svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(a,"class","code-block special attachments-pre svelte-173f7ix"),r(s,"class","attachments-toggle svelte-173f7ix"),s.open=!0,r(e,"class","special-block attachments-block svelte-173f7ix"),r(e,"aria-label","Attachments")},m(_,m){C(_,e,m),c(e,t),c(e,n),c(e,s),c(s,i),c(s,o),c(s,a),c(a,u),c(e,p)},p(_,m){m[0]&65536&&f!==(f=_[53].content+"")&&O(u,f)},d(_){_&&I(e)}}}function Do(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Apply Patch Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block applypatch-block svelte-173f7ix"),r(e,"aria-label","Apply Patch Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Uo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Output Formatting",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block outputfmt-block svelte-173f7ix"),r(e,"aria-label","Output Formatting")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function $o(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Notebook Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block notebook-block svelte-173f7ix"),r(e,"aria-label","Notebook Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function zo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Tool Use Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block tooluse-block svelte-173f7ix"),r(e,"aria-label","Tool Use Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Vo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block instr-block svelte-173f7ix"),r(e,"aria-label","Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Wo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="User Request",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block userreq-block svelte-173f7ix"),r(e,"aria-label","User Request")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Ko(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Reminder Instructions",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block reminder-block svelte-173f7ix"),r(e,"aria-label","Reminder Instructions")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Go(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Context",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block ctx-block svelte-173f7ix"),r(e,"aria-label","Context Block")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function Yo(l){let e,t,n,s,i=kt(l[53].content)+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Workspace Info",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block ws-block svelte-173f7ix"),r(e,"aria-label","Workspace Info")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=kt(f[53].content)+"")&&O(o,i)},d(f){f&&I(e)}}}function Qo(l){let e,t,n,s,i=l[53].content+"",o,a;return{c(){e=d("div"),t=d("div"),t.textContent="Environment Info",n=N(),s=d("pre"),o=S(i),a=N(),r(t,"class","special-block-header svelte-173f7ix"),r(s,"class","code-block special svelte-173f7ix"),r(e,"class","special-block env-block svelte-173f7ix"),r(e,"aria-label","Environment Info")},m(f,u){C(f,e,u),c(e,t),c(e,n),c(e,s),c(s,o),c(e,a)},p(f,u){u[0]&65536&&i!==(i=f[53].content+"")&&O(o,i)},d(f){f&&I(e)}}}function gn(l){let e;function t(i,o){return i[53].kind==="environment"?Qo:i[53].kind==="workspace"?Yo:i[53].kind==="context"?Go:i[53].kind==="reminder"?Ko:i[53].kind==="userreq"?Wo:i[53].kind==="instructions"?Vo:i[53].kind==="tooluse"?zo:i[53].kind==="notebook"?$o:i[53].kind==="outputfmt"?Uo:i[53].kind==="applypatch"?Do:i[53].kind==="attachments"?Bo:Jo}let n=t(l),s=n(l);return{c(){s.c(),e=be()},m(i,o){s.m(i,o),C(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&I(e),s.d(i)}}}function kn(l){let e,t;function n(o,a){var f;return a[0]&65536&&(e=null),e==null&&(e=!!(typeof o[50]=="string"||(f=o[50])!=null&&f.text&&Gn.test(o[50].text))),e?Ho:Lo}let s=n(l,[-1,-1]),i=s(l);return{c(){i.c(),t=be()},m(o,a){i.m(o,a),C(o,t,a)},p(o,a){s===(s=n(o,a))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&I(t),i.d(o)}}}function yn(l){let e,t,n,s,i,o,a=(l[16].length>1?l[44]+1:"")+"",f,u,p,_,m,v=l[10][l[44]]?"Hide Original":"Show Original",h,g,y,b,k,w,F;function q(...R){return l[31](l[44],...R)}function M(R,T){var P;return R[10][R[44]]?Eo:(P=R[48].content)!=null&&P.length?Mo:Fo}let j=M(l),A=j(l);return{c(){e=d("details"),t=d("summary"),n=d("span"),s=N(),i=d("h4"),o=S("User Prompt "),f=S(a),u=N(),p=d("span"),p.textContent="user",_=N(),m=d("button"),h=S(v),y=N(),b=d("div"),A.c(),k=N(),r(n,"class","mini-caret svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(p,"class","role-tag svelte-173f7ix"),r(m,"class","raw-toggle-btn inline svelte-173f7ix"),r(m,"type","button"),r(m,"data-debug",g=l[10][l[44]]?"open":"closed"),r(t,"class","svelte-173f7ix"),r(b,"class","prompt-body svelte-173f7ix"),r(e,"class","prompt-collapsible role-user svelte-173f7ix"),r(e,"data-kind","user-prompt")},m(R,T){C(R,e,T),c(e,t),c(t,n),c(t,s),c(t,i),c(i,o),c(i,f),c(t,u),c(t,p),c(t,_),c(t,m),c(m,h),c(e,y),c(e,b),A.m(b,null),c(e,k),w||(F=oe(m,"click",q),w=!0)},p(R,T){l=R,T[0]&65536&&a!==(a=(l[16].length>1?l[44]+1:"")+"")&&O(f,a),T[0]&1024&&v!==(v=l[10][l[44]]?"Hide Original":"Show Original")&&O(h,v),T[0]&1024&&g!==(g=l[10][l[44]]?"open":"closed")&&r(m,"data-debug",g),j===(j=M(l))&&A?A.p(l,T):(A.d(1),A=j(l),A&&(A.c(),A.m(b,null)))},d(R){R&&I(e),A.d(),w=!1,F()}}}function wn(l){let e,t,n,s,i,o,a,f=l[12].length+"",u,p,_,m,v=[],h=new ao,g=se(l[12]);const y=b=>b[45].id+"-"+b[47];for(let b=0;b<g.length;b+=1){let k=on(l,g,b),w=y(k);h.set(w,v[b]=In(w,k))}return{c(){e=d("section"),t=d("details"),n=d("summary"),s=d("span"),i=d("h3"),o=S("Tool Calls "),a=d("span"),u=S(f),p=N(),_=d("div"),m=d("div");for(let b=0;b<v.length;b+=1)v[b].c();r(s,"class","caret svelte-173f7ix"),r(a,"class","count-badge svelte-173f7ix"),r(i,"class","svelte-173f7ix"),r(n,"class","svelte-173f7ix"),r(m,"class","tool-call-pairs-wrapper svelte-173f7ix"),r(_,"class","collapsible-body tool-calls-body svelte-173f7ix"),r(_,"role","region"),r(_,"aria-label","Tool call pairs"),r(t,"class","collapsible svelte-173f7ix"),r(t,"data-role","tool-calls"),r(t,"aria-label","Tool calls group"),r(e,"class","group tool-calls-group svelte-173f7ix")},m(b,k){C(b,e,k),c(e,t),c(t,n),c(n,s),c(n,i),c(i,o),c(i,a),c(a,u),c(t,p),c(t,_),c(_,m);for(let w=0;w<v.length;w+=1)v[w]&&v[w].m(m,null)},p(b,k){k[0]&4096&&f!==(f=b[12].length+"")&&O(u,f),k[0]&4096&&(g=se(b[12]),v=zn(v,k,y,1,b,g,h,m,$n,In,null,on))},d(b){b&&I(e);for(let k=0;k<v.length;k+=1)v[k].d()}}}function Xo(l){let e;return{c(){e=d("em"),e.textContent="None",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function Zo(l){let e,t=l[45].argumentsRaw+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&4096&&t!==(t=s[45].argumentsRaw+"")&&O(n,t)},d(s){s&&I(e)}}}function xo(l){let e,t=JSON.stringify(l[45].argumentsParsed,null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&4096&&t!==(t=JSON.stringify(s[45].argumentsParsed,null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function er(l){let e;return{c(){e=d("em"),e.textContent="No output found",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function tr(l){let e,t=l[45].output+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&4096&&t!==(t=s[45].output+"")&&O(n,t)},d(s){s&&I(e)}}}function In(l,e){let t,n,s,i,o,a=(e[45].name||"Unnamed Tool")+"",f,u=e[45].id?` (${e[45].id})`:"",p,_,m,v,h,g,y,b,k,w,F,q,M,j,A,R,T;function P(re,ae){return re[45].argumentsParsed?xo:re[45].argumentsRaw?Zo:Xo}let E=P(e),L=E(e);function H(re,ae){return re[45].output?tr:er}let te=H(e),ie=te(e);return{key:l,first:null,c(){t=d("details"),n=d("summary"),s=d("span"),i=N(),o=d("h4"),f=S(a),p=S(u),_=N(),m=d("div"),v=d("div"),h=d("div"),g=d("div"),g.textContent="Arguments",y=N(),L.c(),b=N(),k=d("div"),w=d("div"),w.textContent="Result",F=N(),ie.c(),q=N(),r(s,"class","mini-caret svelte-173f7ix"),r(o,"class","svelte-173f7ix"),r(n,"class","svelte-173f7ix"),r(g,"class","sub-label-normal svelte-173f7ix"),r(h,"class","tool-call-col args-col svelte-173f7ix"),r(w,"class","sub-label-normal svelte-173f7ix"),r(k,"class","tool-call-col result-col svelte-173f7ix"),r(v,"class","tool-call-columns svelte-173f7ix"),r(m,"class","prompt-body svelte-173f7ix"),r(t,"class","prompt-collapsible tool-call-item svelte-173f7ix"),r(t,"id",M="toolcall-"+(e[45].id||e[47])),r(t,"data-kind","tool-call-pair"),r(t,"data-round",j=e[45].roundNumber),r(t,"data-attachments-total",A=e[45].attachmentsTotal),r(t,"data-attachments-user",R=e[45].attachmentsFromPrevUser),r(t,"data-attachments-args",T=e[45].attachmentsInArgs),this.first=t},m(re,ae){C(re,t,ae),c(t,n),c(n,s),c(n,i),c(n,o),c(o,f),c(o,p),c(t,_),c(t,m),c(m,v),c(v,h),c(h,g),c(h,y),L.m(h,null),c(v,b),c(v,k),c(k,w),c(k,F),ie.m(k,null),c(t,q)},p(re,ae){e=re,ae[0]&4096&&a!==(a=(e[45].name||"Unnamed Tool")+"")&&O(f,a),ae[0]&4096&&u!==(u=e[45].id?` (${e[45].id})`:"")&&O(p,u),E===(E=P(e))&&L?L.p(e,ae):(L.d(1),L=E(e),L&&(L.c(),L.m(h,null))),te===(te=H(e))&&ie?ie.p(e,ae):(ie.d(1),ie=te(e),ie&&(ie.c(),ie.m(k,null))),ae[0]&4096&&M!==(M="toolcall-"+(e[45].id||e[47]))&&r(t,"id",M),ae[0]&4096&&j!==(j=e[45].roundNumber)&&r(t,"data-round",j),ae[0]&4096&&A!==(A=e[45].attachmentsTotal)&&r(t,"data-attachments-total",A),ae[0]&4096&&R!==(R=e[45].attachmentsFromPrevUser)&&r(t,"data-attachments-user",R),ae[0]&4096&&T!==(T=e[45].attachmentsInArgs)&&r(t,"data-attachments-args",T)},d(re){re&&I(t),L.d(),ie.d()}}}function Cn(l){let e,t=l[14].length+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","count-badge svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&16384&&t!==(t=s[14].length+"")&&O(n,t)},d(s){s&&I(e)}}}function lr(l){let e;return{c(){e=d("em"),e.textContent="None"},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function nr(l){let e,t,n,s,i,o,a=l[6]?"Hide Raw JSON":"Show Raw JSON",f,u,p,_,m,v,h,g,y,b,k,w,F,q=l[13].length&&Nn(l);function M(L,H){return L[13].length?ir:sr}let j=M(l),A=j(l);function R(L,H){var te;return H[0]&1&&(y=null),y==null&&(y=!!((te=L[0])!=null&&te.requestOptions&&Object.keys(L[0].requestOptions).filter(jr).length>0)),y?ur:fr}let T=R(l,[-1,-1]),P=T(l),E=l[6]&&On(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),s=S("Tools "),q&&q.c(),i=N(),o=d("button"),f=S(a),u=N(),A.c(),p=N(),_=d("div"),m=N(),v=d("div"),h=d("div"),h.innerHTML='<h4 class="options-heading svelte-173f7ix">Other Request Options</h4>',g=N(),P.c(),b=N(),E&&E.c(),k=be(),r(n,"class","tools-heading svelte-173f7ix"),r(o,"class","mini-btn alt svelte-173f7ix"),r(t,"class","tools-header-row svelte-173f7ix"),r(e,"class","tools-section svelte-173f7ix"),r(_,"class","options-divider svelte-173f7ix"),r(h,"class","section-heading svelte-173f7ix"),r(v,"class","other-options-section svelte-173f7ix")},m(L,H){C(L,e,H),c(e,t),c(t,n),c(n,s),q&&q.m(n,null),c(t,i),c(t,o),c(o,f),c(e,u),A.m(e,null),C(L,p,H),C(L,_,H),C(L,m,H),C(L,v,H),c(v,h),c(v,g),P.m(v,null),C(L,b,H),E&&E.m(L,H),C(L,k,H),w||(F=oe(o,"click",l[33]),w=!0)},p(L,H){L[13].length?q?q.p(L,H):(q=Nn(L),q.c(),q.m(n,null)):q&&(q.d(1),q=null),H[0]&64&&a!==(a=L[6]?"Hide Raw JSON":"Show Raw JSON")&&O(f,a),j===(j=M(L))&&A?A.p(L,H):(A.d(1),A=j(L),A&&(A.c(),A.m(e,null))),T===(T=R(L,H))&&P?P.p(L,H):(P.d(1),P=T(L),P&&(P.c(),P.m(v,null))),L[6]?E?E.p(L,H):(E=On(L),E.c(),E.m(k.parentNode,k)):E&&(E.d(1),E=null)},d(L){L&&(I(e),I(p),I(_),I(m),I(v),I(b),I(k)),q&&q.d(),A.d(),P.d(),E&&E.d(L),w=!1,F()}}}function Nn(l){let e,t=l[13].length+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","count-badge svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&8192&&t!==(t=s[13].length+"")&&O(n,t)},d(s){s&&I(e)}}}function sr(l){let e;return{c(){e=d("em"),e.textContent="No tools definitions",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function ir(l){let e,t,n,s=se(l[13]),i=[];for(let u=0;u<s.length;u+=1)i[u]=Sn(sn(l,s,u));function o(u,p){return u[7]!==null&&u[13][u[7]]?rr:or}let a=o(l),f=a(l);return{c(){e=d("div");for(let u=0;u<i.length;u+=1)i[u].c();t=N(),f.c(),n=be(),r(e,"class","tools-list svelte-173f7ix"),r(e,"role","tablist"),r(e,"aria-label","Available tools")},m(u,p){C(u,e,p);for(let _=0;_<i.length;_+=1)i[_]&&i[_].m(e,null);C(u,t,p),f.m(u,p),C(u,n,p)},p(u,p){if(p[0]&8576){s=se(u[13]);let _;for(_=0;_<s.length;_+=1){const m=sn(u,s,_);i[_]?i[_].p(m,p):(i[_]=Sn(m),i[_].c(),i[_].m(e,null))}for(;_<i.length;_+=1)i[_].d(1);i.length=s.length}a===(a=o(u))&&f?f.p(u,p):(f.d(1),f=a(u),f&&(f.c(),f.m(n.parentNode,n)))},d(u){u&&(I(e),I(t),I(n)),Re(i,u),f.d(u)}}}function Sn(l){let e,t=l[42].name+"",n,s,i,o,a;function f(){return l[34](l[44])}return{c(){e=d("button"),n=S(t),r(e,"class",s="tool-chip "+(l[7]===l[44]?"active":"")+" svelte-173f7ix"),r(e,"role","tab"),r(e,"aria-selected",i=l[7]===l[44])},m(u,p){C(u,e,p),c(e,n),o||(a=oe(e,"click",f),o=!0)},p(u,p){l=u,p[0]&8192&&t!==(t=l[42].name+"")&&O(n,t),p[0]&128&&s!==(s="tool-chip "+(l[7]===l[44]?"active":"")+" svelte-173f7ix")&&r(e,"class",s),p[0]&128&&i!==(i=l[7]===l[44])&&r(e,"aria-selected",i)},d(u){u&&I(e),o=!1,a()}}}function or(l){let e;return{c(){e=d("p"),e.textContent="Select a tool to view its details.",r(e,"class","text-soft"),Ae(e,"margin","10px 0 0"),Ae(e,"font-size",".7rem")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function rr(l){let e=l[7],t,n=An(l);return{c(){n.c(),t=be()},m(s,i){n.m(s,i),C(s,t,i)},p(s,i){i[0]&128&&Me(e,e=s[7])?(n.d(1),n=An(s),n.c(),n.m(t.parentNode,t)):n.p(s,i)},d(s){s&&I(t),n.d(s)}}}function ar(l){let e;return{c(){e=d("p"),e.innerHTML="<em>No description</em>",r(e,"class","tool-desc text-soft svelte-173f7ix")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function cr(l){let e,t=l[13][l[7]].description+"",n;return{c(){e=d("p"),n=S(t),r(e,"class","tool-desc svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&8320&&t!==(t=s[13][s[7]].description+"")&&O(n,t)},d(s){s&&I(e)}}}function jn(l){let e,t,n,s=JSON.stringify(l[13][l[7]].parameters,null,2)+"",i;return{c(){e=d("div"),e.textContent="Parameters",t=N(),n=d("pre"),i=S(s),r(e,"class","sub-label svelte-173f7ix"),r(n,"class","code-block small svelte-173f7ix")},m(o,a){C(o,e,a),C(o,t,a),C(o,n,a),c(n,i)},p(o,a){a[0]&8320&&s!==(s=JSON.stringify(o[13][o[7]].parameters,null,2)+"")&&O(i,s)},d(o){o&&(I(e),I(t),I(n))}}}function Rn(l){let e,t=JSON.stringify(l[13][l[7]].raw,null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix"),Ae(e,"margin-top","8px")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&8320&&t!==(t=JSON.stringify(s[13][s[7]].raw,null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function An(l){let e,t,n,s,i=l[13][l[7]].name+"",o,a,f,u=l[13][l[7]].kind+"",p,_,m,v=l[8]?"Hide Raw Definition":"Show Raw Definition",h,g,y,b,k,w,F;function q(T,P){return T[13][T[7]].description?cr:ar}let M=q(l),j=M(l),A=l[13][l[7]].parameters&&jn(l),R=l[8]&&Rn(l);return{c(){e=d("div"),t=d("header"),n=d("div"),s=d("h5"),o=S(i),a=N(),f=d("span"),p=S(u),_=N(),m=d("button"),h=S(v),g=N(),j.c(),y=N(),A&&A.c(),b=N(),R&&R.c(),r(s,"class","svelte-173f7ix"),r(f,"class","tool-kind-tag svelte-173f7ix"),r(n,"class","tool-title-area svelte-173f7ix"),r(m,"class","mini-btn"),r(t,"class","tool-detail-head svelte-173f7ix"),r(e,"class","tool-detail svelte-173f7ix"),r(e,"role","tabpanel"),r(e,"aria-label",k=l[13][l[7]].name+" tool details")},m(T,P){C(T,e,P),c(e,t),c(t,n),c(n,s),c(s,o),c(n,a),c(n,f),c(f,p),c(t,_),c(t,m),c(m,h),c(e,g),j.m(e,null),c(e,y),A&&A.m(e,null),c(e,b),R&&R.m(e,null),w||(F=oe(m,"click",l[35]),w=!0)},p(T,P){P[0]&8320&&i!==(i=T[13][T[7]].name+"")&&O(o,i),P[0]&8320&&u!==(u=T[13][T[7]].kind+"")&&O(p,u),P[0]&256&&v!==(v=T[8]?"Hide Raw Definition":"Show Raw Definition")&&O(h,v),M===(M=q(T))&&j?j.p(T,P):(j.d(1),j=M(T),j&&(j.c(),j.m(e,y))),T[13][T[7]].parameters?A?A.p(T,P):(A=jn(T),A.c(),A.m(e,b)):A&&(A.d(1),A=null),T[8]?R?R.p(T,P):(R=Rn(T),R.c(),R.m(e,null)):R&&(R.d(1),R=null),P[0]&8320&&k!==(k=T[13][T[7]].name+" tool details")&&r(e,"aria-label",k)},d(T){T&&I(e),j.d(),A&&A.d(),R&&R.d(),w=!1,F()}}}function fr(l){let e;return{c(){e=d("em"),e.textContent="No additional options",r(e,"class","text-soft")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function ur(l){let e,t=se(Object.entries(l[0].requestOptions).filter(Fn)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Tn(nn(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();r(e,"class","options-list svelte-173f7ix")},m(s,i){C(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&1){t=se(Object.entries(s[0].requestOptions).filter(Fn));let o;for(o=0;o<t.length;o+=1){const a=nn(s,t,o);n[o]?n[o].p(a,i):(n[o]=Tn(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&I(e),Re(n,s)}}}function dr(l){let e,t=String(l[39])+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","option-value-text svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=String(s[39])+"")&&O(n,t)},d(s){s&&I(e)}}}function pr(l){let e,t;function n(o,a){return a[0]&1&&(e=null),e==null&&(e=!!(o[39].startsWith("http://")||o[39].startsWith("https://"))),e?wr:o[39].length>50?yr:kr}let s=n(l,[-1,-1]),i=s(l);return{c(){i.c(),t=be()},m(o,a){i.m(o,a),C(o,t,a)},p(o,a){s===(s=n(o,a))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&I(t),i.d(o)}}}function _r(l){let e,t=JSON.stringify(l[39],null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=JSON.stringify(s[39],null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function mr(l){let e,t;function n(o,a){return a[0]&1&&(e=null),e==null&&(e=!!(o[39].length<3&&o[39].every(Rr))),e?Cr:Ir}let s=n(l,[-1,-1]),i=s(l);return{c(){i.c(),t=be()},m(o,a){i.m(o,a),C(o,t,a)},p(o,a){s===(s=n(o,a))&&i?i.p(o,a):(i.d(1),i=s(o),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&I(t),i.d(o)}}}function vr(l){let e,t=String(l[39])+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","option-value-number svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=String(s[39])+"")&&O(n,t)},d(s){s&&I(e)}}}function hr(l){let e,t=String(l[39])+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","option-value-boolean svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=String(s[39])+"")&&O(n,t)},d(s){s&&I(e)}}}function br(l){let e;return{c(){e=d("span"),e.textContent="undefined",r(e,"class","option-value-undefined svelte-173f7ix")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function gr(l){let e;return{c(){e=d("span"),e.textContent="null",r(e,"class","option-value-null svelte-173f7ix")},m(t,n){C(t,e,n)},p:z,d(t){t&&I(e)}}}function kr(l){let e,t=l[39]+"",n;return{c(){e=d("span"),n=S(t),r(e,"class","option-value-text svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=s[39]+"")&&O(n,t)},d(s){s&&I(e)}}}function yr(l){let e,t=l[39]+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=s[39]+"")&&O(n,t)},d(s){s&&I(e)}}}function wr(l){let e,t=l[39]+"",n,s;return{c(){e=d("a"),n=S(t),r(e,"href",s=l[39]),r(e,"target","_blank"),r(e,"rel","noopener noreferrer"),r(e,"class","option-value-url svelte-173f7ix")},m(i,o){C(i,e,o),c(e,n)},p(i,o){o[0]&1&&t!==(t=i[39]+"")&&O(n,t),o[0]&1&&s!==(s=i[39])&&r(e,"href",s)},d(i){i&&I(e)}}}function Ir(l){let e,t=JSON.stringify(l[39],null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block small svelte-173f7ix")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=JSON.stringify(s[39],null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function Cr(l){let e,t,n=l[39].map(String).join(", ")+"",s,i;return{c(){e=d("span"),t=S("["),s=S(n),i=S("]"),r(e,"class","option-value-array svelte-173f7ix")},m(o,a){C(o,e,a),c(e,t),c(e,s),c(e,i)},p(o,a){a[0]&1&&n!==(n=o[39].map(String).join(", ")+"")&&O(s,n)},d(o){o&&I(e)}}}function Tn(l){let e,t,n=l[38]+"",s,i,o,a,f;function u(m,v){return v[0]&1&&(a=null),m[39]===null?gr:m[39]===void 0?br:typeof m[39]=="boolean"?hr:typeof m[39]=="number"?vr:(a==null&&(a=!!Array.isArray(m[39])),a?mr:typeof m[39]=="object"?_r:typeof m[39]=="string"?pr:dr)}let p=u(l,[-1,-1]),_=p(l);return{c(){e=d("div"),t=d("div"),s=S(n),i=N(),o=d("div"),_.c(),f=N(),r(t,"class","option-name svelte-173f7ix"),r(o,"class","option-value svelte-173f7ix"),r(e,"class","option-item svelte-173f7ix")},m(m,v){C(m,e,v),c(e,t),c(t,s),c(e,i),c(e,o),_.m(o,null),c(e,f)},p(m,v){v[0]&1&&n!==(n=m[38]+"")&&O(s,n),p===(p=u(m,v))&&_?_.p(m,v):(_.d(1),_=p(m),_&&(_.c(),_.m(o,null)))},d(m){m&&I(e),_.d()}}}function On(l){let e,t=JSON.stringify(l[0].requestOptions,null,2)+"",n;return{c(){e=d("pre"),n=S(t),r(e,"class","code-block svelte-173f7ix"),Ae(e,"margin-top","10px")},m(s,i){C(s,e,i),c(e,n)},p(s,i){i[0]&1&&t!==(t=JSON.stringify(s[0].requestOptions,null,2)+"")&&O(n,t)},d(s){s&&I(e)}}}function qn(l){let e,t;return e=new ro({}),{c(){Ue(e.$$.fragment)},m(n,s){Le(e,n,s),t=!0},i(n){t||(me(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function Nr(l){let e,t,n,s;const i=[fo,co],o=[];function a(f,u){return f[2]?1:0}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=be()},m(f,u){o[e].m(f,u),C(f,n,u),s=!0},p(f,u){let p=e;e=a(f),e===p?o[e].p(f,u):($e(),we(o[p],1,1,()=>{o[p]=null}),ze(),t=o[e],t?t.p(f,u):(t=o[e]=i[e](f),t.c()),me(t,1),t.m(n.parentNode,n))},i(f){s||(me(t),s=!0)},o(f){we(t),s=!1},d(f){f&&I(n),o[e].d(f)}}}const Pn=180,Gn=/<(environment_info|workspace_info|context|reminderInstructions|userRequest|instructions|toolUseInstructions|notebookInstructions|outputFormatting|applyPatchInstructions|attachments)>/;function Sr(l){if(typeof l!="string")return{preview:"",truncated:!1};const t=l.replace(/\r\n/g,`
`).split(`
`);let s=(t.find(o=>o.trim().length>0)??t[0]??"").trim(),i=t.length>1;return s.length>Pn&&(s=s.slice(0,Pn).trimEnd(),i=!0),i&&(s=s.replace(/\s*$/,"")+"‚Ä¶"),{preview:s,truncated:i}}function gt(l){if(typeof l!="string")return[{kind:"other",content:l}];const e=/<(environment_info|workspace_info|context|reminderInstructions|userRequest|instructions|toolUseInstructions|notebookInstructions|outputFormatting|applyPatchInstructions|attachments)>([\s\S]*?)<\/\1>/g,t=[];let n=0,s;for(;(s=e.exec(l))!==null;){const[i,o,a]=s;if(s.index>n){const u=l.slice(n,s.index);u.trim().length&&t.push({kind:"other",content:u})}let f;switch(o){case"environment_info":f="environment";break;case"workspace_info":f="workspace";break;case"context":f="context";break;case"reminderInstructions":f="reminder";break;case"userRequest":f="userreq";break;case"instructions":f="instructions";break;case"toolUseInstructions":f="tooluse";break;case"notebookInstructions":f="notebook";break;case"outputFormatting":f="outputfmt";break;case"applyPatchInstructions":f="applypatch";break;case"attachments":f="attachments";break;default:f="other"}t.push({kind:f,content:a.trim()}),n=s.index+i.length}if(n<l.length){const i=l.slice(n);i.trim().length&&t.push({kind:"other",content:i})}return t.length?t:[{kind:"other",content:l}]}function kt(l){return typeof l!="string"?l:l.replace(/\t/g,"  ")}function rt(l){if(!l||!l.content)return"";try{return l.content.map(e=>typeof e=="string"?e:e&&typeof e=="object"?e.text?e.text:JSON.stringify(e,null,2):String(e)).join(`
`)}catch{return""}}const jr=l=>!["tools","tool_choice","functions","functionDefinition","copilotFunctions"].includes(l),Rr=l=>typeof l!="object",Fn=([l])=>!["tools","tool_choice","functions","functionDefinition","copilotFunctions"].includes(l);function Ar(l,e,t){let n,s,i,o,a,f,u,p,_,m,v,h,g,y;Se(l,Wn,W=>t(25,v=W)),Se(l,qe,W=>t(26,h=W)),Se(l,Be,W=>t(27,g=W)),Se(l,ct,W=>t(19,y=W));let b=!1,k=!1,w,F=!1,q;function M(){if(!s)return"";try{return JSON.stringify({request:s,response:s.response},null,2)}catch{return"/* Failed to serialize request */"}}async function j(){var _e;const W=M();t(4,k=!1);try{if((_e=navigator==null?void 0:navigator.clipboard)!=null&&_e.writeText)await navigator.clipboard.writeText(W);else{const $=document.createElement("textarea");$.value=W,$.style.position="fixed",$.style.top="-2000px",document.body.appendChild($),$.focus(),$.select(),document.execCommand("copy"),document.body.removeChild($)}t(3,b=!0)}catch($){console.warn("Copy failed",$),t(4,k=!0)}clearTimeout(w),w=setTimeout(()=>{t(3,b=!1),t(4,k=!1)},1800)}let A=!1,R=null,T=!1,P={},E={};function L(W){t(9,P={...P,[W]:!P[W]}),console.debug("[toggleSystemRaw]",W,P[W])}function H(W){t(10,E={...E,[W]:!E[W]}),console.debug("[toggleUserRaw]",W,E[W])}let te=null;async function ie(W,_e,$){const ce=rt($);try{await navigator.clipboard.writeText(ce),t(11,te=W+"-"+_e),setTimeout(()=>{te===W+"-"+_e&&t(11,te=null)},1600)}catch(Ie){console.warn("Failed to copy raw original",Ie)}}const re=()=>t(5,F=!F),ae=(W,_e)=>{_e.stopPropagation(),L(W)},U=(W,_e,$)=>{$.stopPropagation(),ie("sys",W,_e)},ke=(W,_e)=>{_e.stopPropagation(),H(W)},J=(W,_e,$)=>{$.stopPropagation(),ie("user",W,_e)},X=()=>t(6,A=!A),fe=W=>{t(7,R=W),t(8,T=!1)},ee=()=>t(8,T=!T);return l.$$.update=()=>{var W,_e;l.$$.dirty[0]&201326592&&t(2,n=g[h.callIndex]),l.$$.dirty[0]&4&&t(0,s=n&&n.request),l.$$.dirty[0]&33554432&&t(18,i=v),l.$$.dirty[0]&1&&t(17,o=((W=s==null?void 0:s.requestMessages)==null?void 0:W.filter($=>$.role==="system"))||[]),l.$$.dirty[0]&1&&t(16,a=((_e=s==null?void 0:s.requestMessages)==null?void 0:_e.filter($=>$.role==="user"))||[]),l.$$.dirty[0]&16777217&&s!==q&&(t(5,F=!1),t(24,q=s)),l.$$.dirty[0]&1&&t(1,f=typeof(s==null?void 0:s.prompt)=="string"?s.prompt:""),l.$$.dirty[0]&2&&t(15,u=f&&f.trim()?Sr(f):{preview:"",truncated:!1}),l.$$.dirty[0]&1&&t(14,p=(()=>{var Ie,ye;const $=s==null?void 0:s.requestOptions;if(!$)return[];const ce=new Set;if(Array.isArray($.tools))for(const D of $.tools)(Ie=D==null?void 0:D.function)!=null&&Ie.name?ce.add(D.function.name):D!=null&&D.name&&ce.add(D.name);if(Array.isArray($.functions))for(const D of $.functions)D!=null&&D.name&&ce.add(D.name);if(Array.isArray($.copilotFunctions))for(const D of $.copilotFunctions)D!=null&&D.name&&ce.add(D.name);return(ye=$.functionDefinition)!=null&&ye.name&&ce.add($.functionDefinition.name),Array.from(ce)})()),l.$$.dirty[0]&1&&t(13,_=(()=>{var ye,D;const $=s==null?void 0:s.requestOptions;if(!$)return[];const ce=new Map;function Ie(V){!(V!=null&&V.name)||ce.has(V.name)||ce.set(V.name,V)}if(Array.isArray($.tools))for(const V of $.tools)(ye=V==null?void 0:V.function)!=null&&ye.name?Ie({name:V.function.name,description:V.function.description,parameters:V.function.parameters,kind:V.type||"function",raw:V}):V!=null&&V.name&&Ie({name:V.name,description:V.description,parameters:V.parameters,kind:V.type||"tool",raw:V});if(Array.isArray($.functions))for(const V of $.functions)V!=null&&V.name&&Ie({name:V.name,description:V.description,parameters:V.parameters||V.parametersSchema,kind:"function",raw:V});if(Array.isArray($.copilotFunctions))for(const V of $.copilotFunctions)V!=null&&V.name&&Ie({name:V.name,description:V.description,parameters:V.parameters||V.parametersSchema,kind:"copilotFunction",raw:V});if((D=$.functionDefinition)!=null&&D.name){const V=$.functionDefinition;Ie({name:V.name,description:V.description,parameters:V.parameters,kind:"functionDefinition",raw:V})}return Array.from(ce.values())})()),l.$$.dirty[0]&1&&t(12,m=(()=>{var Ce,le;if(!(s!=null&&s.requestMessages))return[];const $=s.requestMessages,ce=new Map;for(const Y of $)if(Y.role==="tool"){const x=Y.tool_call_id||Y.id;if(!x)continue;const B=[];if(Array.isArray(Y.content))for(const ne of Y.content)typeof ne=="string"?B.push(ne):ne!=null&&ne.text?B.push(ne.text):B.push(JSON.stringify(ne));else typeof Y.content=="string"?B.push(Y.content):(Ce=Y.content)!=null&&Ce.text&&B.push(Y.content.text);ce.has(x)||ce.set(x,[]),ce.get(x).push(...B)}function Ie(Y){if(!(Y!=null&&Y.content))return 0;let x=0;for(const B of Y.content){let ne="";if(typeof B=="string")ne=B;else if(B!=null&&B.text)ne=B.text;else continue;ne&&(ne.includes("&lt;attachments")||ne.includes("&lt;attachment"))&&(ne=ne.replace(/&lt;/g,"<").replace(/&gt;/g,">"));const je=ne.match(/<attachments>|<attachment\b/gi);je&&(x+=je.length)}return x}function ye(Y){if(!Y||typeof Y!="string")return 0;let x=Y;(x.includes("&lt;attachments")||x.includes("&lt;attachment"))&&(x=x.replace(/&lt;/g,"<").replace(/&gt;/g,">"));const B=x.match(/<attachments>|<attachment\b/gi);return B?B.length:0}const D=[];let V=0,Oe=null;for(let Y=0;Y<$.length;Y++){const x=$[Y];if(x.role==="assistant"&&Array.isArray(x.tool_calls)&&x.tool_calls.length){let B=-1;for(let de=Y-1;de>=0;de--)if($[de].role==="user"){B=de;break}const ne=B>=0?$[B]:null,je=ne?Ie(ne):0;for(const de of x.tool_calls){const Z=de.id||de.tool_call_id||de.toolCallId,pe=de.function||de.fn||{},ve=pe.name||de.name,K=pe.arguments||de.arguments;let ue=null;if(typeof K=="string")try{ue=JSON.parse(K)}catch{}else K&&typeof K=="object"&&(ue=K);const G=Z&&ce.get(Z)?ce.get(Z):[],ge=typeof K=="string"?ye(K):0,he=je+ge,Q={id:Z,name:ve,argumentsRaw:K,argumentsParsed:ue,outputParts:G,output:G.join(`
`),prevUserIndex:B,attachmentsFromPrevUser:je,attachmentsInArgs:ge,attachmentsTotal:he,attachmentsCount:he},Ne=D[D.length-1],Ye=B!==-1&&B!==Oe;he>0&&(Ye||!Ne||Ne&&Ne.attachmentsTotal===0)?(V+=1,Q.isRoundBoundary=!0,Q.roundNumber=V,Oe=B):Ne&&(Q.roundNumber=Ne.roundNumber),D.push(Q)}}}if(!D.some(Y=>Y.isRoundBoundary)){const Y=D.find(x=>(x.attachmentsTotal||0)>0);if(Y){V=1,Y.isRoundBoundary=!0,Y.roundNumber=1;let x=!1;for(const B of D)B===Y&&(x=!0),x&&!B.roundNumber&&(B.roundNumber=1)}}if(!D.length&&Array.isArray((le=s==null?void 0:s.response)==null?void 0:le.copilotFunctionCalls)&&s.response.copilotFunctionCalls.length){const Y=s.response.copilotFunctionCalls;let x=-1;for(let Z=$.length-1;Z>=0;Z--)if($[Z].role==="user"){x=Z;break}const B=x>=0?$[x]:null,ne=B?Ie(B):0;let je=!1,de=0;for(let Z=0;Z<Y.length;Z++){const pe=Y[Z],ve=pe.id||pe.tool_call_id||pe.callId||"resp_"+Z,K=pe.name||pe.function&&pe.function.name||"Unnamed Tool",ue=pe.arguments||pe.function&&pe.function.arguments||"";let G=null;if(typeof ue=="string")try{G=JSON.parse(ue)}catch{}else ue&&typeof ue=="object"&&(G=ue);const ge=typeof ue=="string"?ye(ue):0,he=ne+ge,Q={id:ve,name:K,argumentsRaw:ue,argumentsParsed:G,outputParts:[],output:"",prevUserIndex:x,attachmentsFromPrevUser:ne,attachmentsInArgs:ge,attachmentsTotal:he,attachmentsCount:he,source:"response"};!je&&he>0?(de=1,Q.isRoundBoundary=!0,Q.roundNumber=1,je=!0):je&&(Q.roundNumber=de),D.push(Q)}if(!D.some(Z=>Z.isRoundBoundary)&&ne>0&&D.length){D[0].isRoundBoundary=!0,D[0].roundNumber=1;for(let Z=1;Z<D.length;Z++)D[Z].roundNumber=1}}return D})())},[s,f,n,b,k,F,A,R,T,P,E,te,m,_,p,u,a,o,i,y,j,L,H,ie,q,v,h,g,re,ae,U,ke,J,X,fe,ee]}class Tr extends We{constructor(e){super(),Ve(this,e,Ar,Nr,Me,{},null,[-1,-1])}}function Mn(l){let e,t,n;return{c(){e=d("button"),e.textContent="‚úï",r(e,"class","clear")},m(s,i){C(s,e,i),t||(n=oe(e,"click",l[3]),t=!0)},p:z,d(s){s&&I(e),t=!1,n()}}}function Or(l){let e,t,n,s,i,o=l[0]&&Mn(l);return{c(){e=d("div"),t=d("input"),n=N(),o&&o.c(),r(t,"placeholder",l[1]),r(t,"class","svelte-xamc1i"),r(e,"class","search-bar svelte-xamc1i")},m(a,f){C(a,e,f),c(e,t),zt(t,l[0]),c(e,n),o&&o.m(e,null),s||(i=[oe(t,"input",l[5]),oe(t,"input",l[2])],s=!0)},p(a,[f]){f&2&&r(t,"placeholder",a[1]),f&1&&t.value!==a[0]&&zt(t,a[0]),a[0]?o?o.p(a,f):(o=Mn(a),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:z,o:z,d(a){a&&I(e),o&&o.d(),s=!1,Fe(i)}}}function qr(l,e,t){let{value:n=""}=e,{placeholder:s=""}=e;const i="function";function o(u){t(0,n=u.target.value)}function a(){t(0,n="")}function f(){n=this.value,t(0,n)}return l.$$set=u=>{"value"in u&&t(0,n=u.value),"placeholder"in u&&t(1,s=u.placeholder)},[n,s,o,a,i,f]}class En extends We{constructor(e){super(),Ve(this,e,qr,Or,Me,{value:0,placeholder:1,type:4})}get type(){return this.$$.ctx[4]}}function Ln(l){let e,t,n,s,i,o,a=(l[6]?l[0]+1:0)+"",f,u,p=l[1].length+"",_,m,v,h,g,y,b,k,w,F,q,M;return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),s.textContent="Filtered",i=N(),o=d("span"),f=S(a),u=S(" / "),_=S(p),m=N(),v=d("div"),h=d("button"),g=S("‚óÄ"),b=N(),k=d("button"),w=S("‚ñ∂"),r(s,"class","label"),r(o,"class","count-mini"),r(n,"class","status-item"),r(t,"class","global-status nav-side-status"),r(t,"aria-label","Filtered navigation status"),r(h,"class","nav-side-btn nav-filtered-btn"),h.disabled=y=l[0]<=0,r(h,"title","Previous (Filtered)"),r(k,"class","nav-side-btn nav-filtered-btn"),k.disabled=F=l[0]>=l[1].length-1,r(k,"title","Next (Filtered)"),r(v,"class","nav-buttons-row"),r(e,"class","nav-side nav-right-filtered")},m(j,A){C(j,e,A),c(e,t),c(t,n),c(n,s),c(n,i),c(n,o),c(o,f),c(o,u),c(o,_),c(e,m),c(e,v),c(v,h),c(h,g),c(v,b),c(v,k),c(k,w),q||(M=[oe(h,"click",l[24]),oe(k,"click",l[25])],q=!0)},p(j,A){A[0]&65&&a!==(a=(j[6]?j[0]+1:0)+"")&&O(f,a),A[0]&2&&p!==(p=j[1].length+"")&&O(_,p),A[0]&1&&y!==(y=j[0]<=0)&&(h.disabled=y),A[0]&3&&F!==(F=j[0]>=j[1].length-1)&&(k.disabled=F)},d(j){j&&I(e),q=!1,Fe(M)}}}function Pr(l){let e,t,n,s=l[9]?"agent switching":"tool calls grouped into rounds",i,o;return{c(){e=d("div"),t=d("p"),n=S("Load a file to see "),i=S(s),o=S("."),r(t,"class","placeholder-hint"),r(e,"class","overview-empty-placeholder")},m(a,f){C(a,e,f),c(e,t),c(t,n),c(t,i),c(t,o)},p(a,f){f[0]&512&&s!==(s=a[9]?"agent switching":"tool calls grouped into rounds")&&O(i,s)},i:z,o:z,d(a){a&&I(e)}}}function Fr(l){let e,t,n,s;const i=[Er,Mr],o=[];function a(f,u){return f[9]?0:1}return t=a(l),n=o[t]=i[t](l),{c(){e=d("div"),n.c(),r(e,"class","toolcalls-scroll")},m(f,u){C(f,e,u),o[t].m(e,null),s=!0},p(f,u){let p=t;t=a(f),t!==p&&($e(),we(o[p],1,1,()=>{o[p]=null}),ze(),n=o[t],n||(n=o[t]=i[t](f),n.c()),me(n,1),n.m(e,null))},i(f){s||(me(n),s=!0)},o(f){we(n),s=!1},d(f){f&&I(e),o[t].d()}}}function Mr(l){let e,t;return e=new Bs({props:{variant:"panel"}}),{c(){Ue(e.$$.fragment)},m(n,s){Le(e,n,s),t=!0},i(n){t||(me(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function Er(l){let e,t;return e=new Ks({}),{c(){Ue(e.$$.fragment)},m(n,s){Le(e,n,s),t=!0},i(n){t||(me(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function Lr(l){let e,t;return e=new Tr({}),{c(){Ue(e.$$.fragment)},m(n,s){Le(e,n,s),t=!0},i(n){t||(me(e.$$.fragment,n),t=!0)},o(n){we(e.$$.fragment,n),t=!1},d(n){He(e,n)}}}function Hr(l){let e;return{c(){e=d("div"),e.innerHTML='<h2>No data loaded</h2> <p>Drag &amp; drop a log file to begin.</p> <p class="file-hint">Supported: <code>sim‚Äërequests-*.txt</code>, <code>*‚Äëfetchlog‚Äë*.txt</code>, or any valid JSON log file</p>',r(e,"class","empty-state tall")},m(t,n){C(t,e,n)},i:z,o:z,d(t){t&&I(e)}}}function Hn(l){let e,t,n;return{c(){e=d("button"),e.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>',r(e,"class","back-to-top"),r(e,"aria-label","Back to top"),r(e,"title","Back to top")},m(s,i){C(s,e,i),t||(n=oe(e,"click",Br),t=!0)},p:z,d(s){s&&I(e),t=!1,n()}}}function Jr(l){let e,t,n,s,i,o,a=l[7]===0?"0 / 0":`${l[8]+1} / ${l[7]}`,f,u,p,_,m,v,h,g,y,b,k,w,F,q,M,j,A,R,T,P,E,L,H,te,ie,re,ae,U,ke,J,X,fe,ee,W,_e,$,ce,Ie,ye,D,V,Oe,Ce,le,Y,x,B=l[1].length>0&&Ln(l);T=new Ps({}),T.$on("loadText",l[26]);function ne(Q){l[27](Q)}let je={type:"function",placeholder:"Function search"};l[12].fn!==void 0&&(je.value=l[12].fn),L=new En({props:je}),Je.push(()=>Kt(L,"value",ne));function de(Q){l[28](Q)}let Z={type:"response",placeholder:"Response search"};l[12].response!==void 0&&(Z.value=l[12].response),ie=new En({props:Z}),Je.push(()=>Kt(ie,"value",de));const pe=[Fr,Pr],ve=[];function K(Q,Ne){return Q[13].length>0?0:1}U=K(l),ke=ve[U]=pe[U](l);const ue=[Hr,Lr],G=[];function ge(Q,Ne){return Q[13].length===0?0:1}fe=ge(l),ee=G[fe]=ue[fe](l);let he=l[2]&&Hn();return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),s.textContent="All",i=N(),o=d("span"),f=S(a),u=N(),p=d("div"),_=d("div"),m=d("button"),v=S("‚óÄ"),g=N(),y=d("button"),b=S("‚ñ∂"),w=N(),B&&B.c(),F=N(),q=d("div"),M=d("aside"),j=d("div"),A=d("div"),R=d("div"),Ue(T.$$.fragment),P=N(),E=d("div"),Ue(L.$$.fragment),te=N(),Ue(ie.$$.fragment),ae=N(),ke.c(),J=N(),X=d("main"),ee.c(),W=N(),_e=d("aside"),_e.innerHTML="",$=N(),ce=d("footer"),Ie=S("Total calls: "),ye=S(l[11]),D=S(". Current: "),V=S(l[10]),Oe=S("."),Ce=N(),he&&he.c(),r(s,"class","label"),r(o,"class","count-mini"),r(n,"class","status-item"),r(t,"class","global-status nav-left-status"),r(t,"aria-label","Global navigation status (All)"),r(m,"class","nav-side-btn nav-all-btn"),m.disabled=h=l[8]<=0,r(m,"title","Previous (All)"),r(y,"class","nav-side-btn nav-all-btn"),y.disabled=k=l[8]>=l[7]-1,r(y,"title","Next (All)"),r(_,"class","nav-buttons-row"),r(p,"class","nav-side nav-left-all nav-left-nav"),Ae(p,"opacity",l[5]?1:0),r(R,"class","ingest-block"),r(E,"class","filters-stack"),r(E,"aria-label","Filtering controls"),r(A,"class","ingest-filters-grid"),r(A,"aria-label","Data load and filters"),r(j,"class","left-stack"),r(M,"class","overview-pane"),r(M,"aria-label","Tool calls overview & controls"),r(X,"class","main-content"),r(X,"aria-label","Request detail panel"),r(q,"class","workspace-split"),r(_e,"class","sidebar compact"),r(ce,"class","footer"),r(e,"class","app-shell")},m(Q,Ne){C(Q,e,Ne),c(e,t),c(t,n),c(n,s),c(n,i),c(n,o),c(o,f),l[20](t),c(e,u),c(e,p),c(p,_),c(_,m),c(m,v),c(_,g),c(_,y),c(y,b),l[23](p),c(e,w),B&&B.m(e,null),c(e,F),c(e,q),c(q,M),c(M,j),c(j,A),c(A,R),Le(T,R,null),c(A,P),c(A,E),Le(L,E,null),c(E,te),Le(ie,E,null),c(j,ae),ve[U].m(j,null),c(q,J),c(q,X),G[fe].m(X,null),c(e,W),c(e,_e),c(e,$),c(e,ce),c(ce,Ie),c(ce,ye),c(ce,D),c(ce,V),c(ce,Oe),c(e,Ce),he&&he.m(e,null),le=!0,Y||(x=[oe(m,"click",l[21]),oe(y,"click",l[22])],Y=!0)},p(Q,Ne){(!le||Ne[0]&384)&&a!==(a=Q[7]===0?"0 / 0":`${Q[8]+1} / ${Q[7]}`)&&O(f,a),(!le||Ne[0]&256&&h!==(h=Q[8]<=0))&&(m.disabled=h),(!le||Ne[0]&384&&k!==(k=Q[8]>=Q[7]-1))&&(y.disabled=k),(!le||Ne[0]&32)&&Ae(p,"opacity",Q[5]?1:0),Q[1].length>0?B?B.p(Q,Ne):(B=Ln(Q),B.c(),B.m(e,F)):B&&(B.d(1),B=null);const Ye={};!H&&Ne[0]&4096&&(H=!0,Ye.value=Q[12].fn,Vt(()=>H=!1)),L.$set(Ye);const st={};!re&&Ne[0]&4096&&(re=!0,st.value=Q[12].response,Vt(()=>re=!1)),ie.$set(st);let wt=U;U=K(Q),U===wt?ve[U].p(Q,Ne):($e(),we(ve[wt],1,1,()=>{ve[wt]=null}),ze(),ke=ve[U],ke?ke.p(Q,Ne):(ke=ve[U]=pe[U](Q),ke.c()),me(ke,1),ke.m(j,null));let It=fe;fe=ge(Q),fe!==It&&($e(),we(G[It],1,1,()=>{G[It]=null}),ze(),ee=G[fe],ee||(ee=G[fe]=ue[fe](Q),ee.c()),me(ee,1),ee.m(X,null)),(!le||Ne[0]&2048)&&O(ye,Q[11]),(!le||Ne[0]&1024)&&O(V,Q[10]),Q[2]?he?he.p(Q,Ne):(he=Hn(),he.c(),he.m(e,null)):he&&(he.d(1),he=null)},i(Q){le||(me(T.$$.fragment,Q),me(L.$$.fragment,Q),me(ie.$$.fragment,Q),me(ke),me(ee),le=!0)},o(Q){we(T.$$.fragment,Q),we(L.$$.fragment,Q),we(ie.$$.fragment,Q),we(ke),we(ee),le=!1},d(Q){Q&&I(e),l[20](null),l[23](null),B&&B.d(),He(T),He(L),He(ie),ve[U].d(),G[fe].d(),he&&he.d(),Y=!1,Fe(x)}}}function Br(){window.scrollTo({top:0,behavior:"smooth"})}function Dr(l,e,t){let n,s,i,o,a,f,u,p,_,m,v,h,g,y,b;Se(l,Ke,U=>t(15,_=U)),Se(l,Xe,U=>t(16,m=U)),Se(l,qe,U=>t(17,v=U)),Se(l,ct,U=>t(18,h=U)),Se(l,Be,U=>t(19,g=U)),Se(l,dt,U=>t(12,y=U)),Se(l,nt,U=>t(13,b=U));let k=!1;Tt(()=>{const U=()=>{t(2,k=window.scrollY>300)};return window.addEventListener("scroll",U),()=>{window.removeEventListener("scroll",U)}});function w(U){Ts(U),setTimeout(j,30)}let F,q,M=!1;function j(){if(!F)return;const U=window.innerHeight,ke=F.offsetHeight||0;let J=(U-ke)/2;if(J<20&&(J=20),t(3,F.style.top=`${Math.round(J)}px`,F),q){const X=q.offsetHeight||0;let fe=J-X-16;fe<20&&(fe=20),t(4,q.style.top=`${Math.round(fe)}px`,q)}t(5,M=!0)}let A;function R(){cancelAnimationFrame(A),A=requestAnimationFrame(j)}Tt(()=>(j(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)));function T(U){Je[U?"unshift":"push"](()=>{q=U,t(4,q)})}const P=()=>ks(),E=()=>ys();function L(U){Je[U?"unshift":"push"](()=>{F=U,t(3,F)})}const H=()=>ws(),te=()=>Is(),ie=U=>w(U.detail);function re(U){l.$$.not_equal(y.fn,U)&&(y.fn=U,dt.set(y))}function ae(U){l.$$.not_equal(y.response,U)&&(y.response=U,dt.set(y))}return l.$$.update=()=>{l.$$.dirty[0]&524288&&t(11,n=g.length),l.$$.dirty[0]&131072&&t(10,s=v.callIndex+1),l.$$.dirty[0]&262144&&t(9,i=h==="new-agent"),l.$$.dirty[0]&131072&&t(8,o=v.callIndex||0),l.$$.dirty[0]&131072&&t(7,a=v.totalAll||0),l.$$.dirty[0]&65536&&t(1,f=m||[]),l.$$.dirty[0]&32768&&t(0,u=_||-1),l.$$.dirty[0]&3&&t(6,p=f.length>0&&u!==-1)},[u,f,k,F,q,M,p,a,o,i,s,n,y,b,w,_,m,v,h,g,T,P,E,L,H,te,ie,re,ae]}class Ur extends We{constructor(e){super(),Ve(this,e,Dr,Jr,Me,{},null,[-1,-1])}}new Ur({target:document.getElementById("app")});
